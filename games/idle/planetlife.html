<html><head><script src="//www.google.com/jsapi"></script><script>window.parent.maeExportApis_();</script>

                
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0">
	<meta charset="UTF-8">
  <style>
* {
  -webkit-touch-callout: none;
  -webkit-user-select: none;  
}

@font-face {
    font-family: "Press Start 2p";
    src:url("https://cdn.jsdelivr.net/gh/polandstick/mgg2@7b2af95dcfaa66cdf12bf44547469c43066f6142/games/planet-life/PressStart2P-Regular.ttf");
}

 
body {
	margin: 0px;
 
	color: #FFFFFF;
	font-family: 'Press Start 2P', cursive;
	font-size: 10px;
	line-height: 20px;
	font-smooth:never;
 
	-webkit-font-smoothing: antialiased;
}

#backgroundDiv {
	z-index: -1;
	position: fixed;
	top: 0;
	left: 0;
	height: 100%;
	width: 100%;
	background-image: url("https://cdn.jsdelivr.net/gh/polandstick/mgg2@7b2af95dcfaa66cdf12bf44547469c43066f6142/games/planet-life/images/backgrounds/BG_Universe.png");
	background-repeat: repeat;
}

.bodyWrapper {
	max-width: 400px;
	margin-left: auto;
	margin-right: auto;
	padding-left: 10px;
	padding-right: 10px;
	 
}

@media screen and (min-width: 9000px) {
  .bodyWrapper {
    
   	max-width: 100%;
	margin-left: auto;
	margin-right: auto;
	padding-left: 10px;
	padding-right: 10px;
  }
}

h1 {
	font-size: 12px;
	color: #ffffff;
}

h2 {
	font-size: 12px;
	color: #ffffff;
}

button {
	border-radius: 10px;
	color: #FFFFFF;
	 
	font-family: 'Press Start 2P', cursive;
	font-size: 10px;
	padding: 10px 15px;
	text-decoration: none;
	border: none;
}


 

 

.blackCover {
	position: relative;
	display: inline-block;
	z-index: 1;
	width: 100%;
	background: #1c1c1c;
	border-radius: 10px;
	bottom: 2px;
}

 

.handlingBlackCover {
	z-index: 0;
	width: 100%;
 
 
	background: #1c1c1c;
	border-radius: 10px;
	margin-top: -35px;
	margin-bottom: 10px;
	margin-left: auto;
	margin-right: auto;
	padding: 20px 0px 10px;
}

#derekDiv {
	display: inline-block;
}

.derekArt {
	position: absolute;
	width: 100%;
	right: 128px;
}

.derekImg {
	position: absolute;
	display: inline-block;
	margin-left: auto;
	margin-right: auto;
}

#coolMathSplash {
	display: none;
	position: absolute;
	z-index: 100;
	width: 100%;
}

#settingsArt {
	display: none;
}

#settingsHandling {
	display: none;
}

#settingsHeadline {
	display: none;
	font-size: 20px;
	margin-top: 40px;
}

button.settingsButton {
	width: 80%;
	height: 50px;
	background: #424242;
	box-shadow: 0 5px #282828;
	font-size: 12px;
}

button.settingsButtonYellow {
	width: 80%;
	height: 50px;
	background: #ffb200;
	box-shadow: 0 5px #282828;
	font-size: 12px;
}

button:disabled {
	background-color: #747474;
}

img {
	border: none;
}

.halfWidth {
	width: 50%;
	position: relative;
	float: left;
}

.halfWidthRight {
	width: 50%;
	position: relative;
	float: right;
	text-align: right;
}

.fullWidth {
	position: relative;
	z-index: 10;
	float: left;
	width: 100%;
}

#resIconDiv {
	position: fixed;
	display: block;
	z-index: 20;
	width: 100%;
	height: 40px;
	background-color: #2b2b2b; 
	float: left;
	top: 0px;
	border-bottom: 4px solid #1c1c1c;
}

#resIconWrapper {
	position: relative;
	max-width: 400px;
	margin-left: auto;
	margin-right: auto;
	padding-left: 5px;
}

 
  #resIconWrapper {
     
    position: relative;
	max-width: 100%;
	margin-left: auto;
	margin-right: auto;
    padding-left: 20px;
    padding-right: 20px;
  }
 

#resIconDiv p {
	display: inline-block;
}

.resIcon {
	margin: 0px 10px;
}

 

 

 

#resInfoDiv {
	position: absolute;
	background-color: #1c1c1c;
	top: -460px;
	padding-top: 500px;
	height: 40px;
	width: 100%;
	margin-bottom: 20px;
	left: 0px;
}

#infoContentHolder {
	display: inline-block;
	background: #1c1c1c;
	margin-right: 20px;
	margin-left: 20px;
}

#resInfoDiv p {
	float: left;
	display: inline-block;
	margin-right: 20px;
	margin-left: 3px;
}

#woodSec {
	color: #d0ba91;
}

#goldSec {
	color: #f3b63f;
}

#cocoSec {
	color: #8b5937;
}

#ghostCount {
	color: #c8ffa0;
}

#resInfoDiv img {
	float: left;
	display: inline-block;
	margin-right: 5px;
	margin-top: 11px;
}

.right {
	position: absolute;
	right: 0px;
	-moz-transform: scaleX(-1);
    -o-transform: scaleX(-1);
    -webkit-transform: scaleX(-1);
    transform: scaleX(-1);
    filter: FlipH;
    -ms-filter: "FlipH";
}

.floatRight {
	float: right;
}

#artDiv {
	display: block;
	text-align: center;
	z-index: 11;
}

.textHolder {
	margin-top: 0px;
	padding: 0px 20px 0px;
}

#handling {
 
}

#resCounter {
 
	 
}

.clear {
	position: relative;
	clear: both;
}

.buttonImg {
	width: 60px;
	margin-left: 10px;
}

button.buildButton {
	background-color: #ffb200;
	box-shadow: 0 5px #d39300;
	color: #000000;
}

button.buildButtonActive {
	background-color: #ffd000;
	transform: translateY(3px);
	box-shadow: 0 2px #d39300;
}

button:disabled.buildButton {
	background-color: #3d3d3d;
	transform: translateY(3px);
	box-shadow: 0 0px #d39300;
}

button:disabled.buildButtonActive {
	background-color: #3d3d3d;
	box-shadow: 0 0px #d39300;
}

.buildButtonText {
	display: inline-block;
	color: #c6c6c6;
}

.buildButtonImage {
	float: left;
	width: 100px;
	margin-left: 10px;
	margin-bottom: 10px;
}

.buildButtonImageFull {
	float: left;
	width: 95%;
	margin-left: 10px;
	margin-bottom: 10px;
}

.smallBuildButtonImage {
	float: left;
	width: 60px;
	margin-left: 5px;
	margin-bottom: 5px;
	
	 
	margin-top: 10px;
	 
}

.smallBuildButtonText {
	margin-top: 25px;
	margin-left: 10px;
	font-size: 12px;
	
	 
	margin-left: 88px;
	text-align: left;
	line-height: 15px;
	 
}

.buildButtonHeadline {
	margin-left: 10px;
	margin-top: 40px;
}

.menuButtonHeadline {
	display: block;
	text-align: center;
	font-size: 20px;
	margin-top: 20px;
	margin-bottom: 20px;
}

.marked {
	color: #2bba00;
}

.dmgText {
	font-size: 15px;
}

.settings {
	display: none;
	position: fixed;
	top: 0px;
	left: 0px;
	z-index: 100;
	width: 100%;
	height: 100%;
	overflow: hidden;
}

#settingsBackground {
	position: relative;
	background: #000000;
	opacity: 0.5;
	width: 100%;
	height: 100%;
}

#settingsForeground {
	position: absolute;
	background: #2d2d2d;
	z-index: 101;
	border-radius: 25px;
	width: 80%;
	top: 40px;
	padding-top: 20px;
	padding-bottom: 20px;
	text-align: center;
	left: 8%;
}

.buttonBackground {
	position: absolute;
	top: 0px;
	width: 100%;
	height: 100%;
	z-index: -1;
	background: #424242;
	box-shadow: 0 5px #282828;
	border-radius: 10px;
}

.buttonBackgroundPressed {
	position: absolute;
	top: 0px;
	width: 100%;
	height: 100%;
	z-index: -1;
	background: #5b5b5b;
	box-shadow: 0 1px #303030;
	border-radius: 10px;
}

.buildBackground {
	position: absolute;
	top: 0px;
	width: 100%;
	height: 100%;
	z-index: -1;
	background: #2b2b2b;
	border-radius: 10px;
}

#dungeonLevel {
	margin-top: 25px;
	margin-bottom: 0px;
}

#sureSureBut {
	display: none;
}

#loading_container {
	color: red;
}

.loader {
  margin: 100px auto;
  font-size: 25px;
  width: 1em;
  height: 1em;
  border-radius: 50%;
  position: relative;
  text-indent: -9999em;
  -webkit-animation: load5 1.1s infinite ease;
  animation: load5 1.1s infinite ease;
  -webkit-transform: translateZ(0);
  -ms-transform: translateZ(0);
  transform: translateZ(0);
}

.blocking-loader {
  font-size: 25px;
  width: 1em;
  height: 1em;
	border-radius: 50%;
	top: 50%;
	left: 50%;
  position: fixed;
  text-indent: -9999em;
  -webkit-animation: load5 1.1s infinite ease;
  animation: load5 1.1s infinite ease;
  -webkit-transform: translateZ(0);
  -ms-transform: translateZ(0);
  transform: translateZ(0);
}

@-webkit-keyframes load5 {
  0%,
  100% {
    box-shadow: 0em -2.6em 0em 0em #ffffff, 1.8em -1.8em 0 0em rgba(255, 255, 255, 0.2), 2.5em 0em 0 0em rgba(255, 255, 255, 0.2), 1.75em 1.75em 0 0em rgba(255, 255, 255, 0.2), 0em 2.5em 0 0em rgba(255, 255, 255, 0.2), -1.8em 1.8em 0 0em rgba(255, 255, 255, 0.2), -2.6em 0em 0 0em rgba(255, 255, 255, 0.5), -1.8em -1.8em 0 0em rgba(255, 255, 255, 0.7);
  }
  12.5% {
    box-shadow: 0em -2.6em 0em 0em rgba(255, 255, 255, 0.7), 1.8em -1.8em 0 0em #ffffff, 2.5em 0em 0 0em rgba(255, 255, 255, 0.2), 1.75em 1.75em 0 0em rgba(255, 255, 255, 0.2), 0em 2.5em 0 0em rgba(255, 255, 255, 0.2), -1.8em 1.8em 0 0em rgba(255, 255, 255, 0.2), -2.6em 0em 0 0em rgba(255, 255, 255, 0.2), -1.8em -1.8em 0 0em rgba(255, 255, 255, 0.5);
  }
  25% {
    box-shadow: 0em -2.6em 0em 0em rgba(255, 255, 255, 0.5), 1.8em -1.8em 0 0em rgba(255, 255, 255, 0.7), 2.5em 0em 0 0em #ffffff, 1.75em 1.75em 0 0em rgba(255, 255, 255, 0.2), 0em 2.5em 0 0em rgba(255, 255, 255, 0.2), -1.8em 1.8em 0 0em rgba(255, 255, 255, 0.2), -2.6em 0em 0 0em rgba(255, 255, 255, 0.2), -1.8em -1.8em 0 0em rgba(255, 255, 255, 0.2);
  }
  37.5% {
    box-shadow: 0em -2.6em 0em 0em rgba(255, 255, 255, 0.2), 1.8em -1.8em 0 0em rgba(255, 255, 255, 0.5), 2.5em 0em 0 0em rgba(255, 255, 255, 0.7), 1.75em 1.75em 0 0em #ffffff, 0em 2.5em 0 0em rgba(255, 255, 255, 0.2), -1.8em 1.8em 0 0em rgba(255, 255, 255, 0.2), -2.6em 0em 0 0em rgba(255, 255, 255, 0.2), -1.8em -1.8em 0 0em rgba(255, 255, 255, 0.2);
  }
  50% {
    box-shadow: 0em -2.6em 0em 0em rgba(255, 255, 255, 0.2), 1.8em -1.8em 0 0em rgba(255, 255, 255, 0.2), 2.5em 0em 0 0em rgba(255, 255, 255, 0.5), 1.75em 1.75em 0 0em rgba(255, 255, 255, 0.7), 0em 2.5em 0 0em #ffffff, -1.8em 1.8em 0 0em rgba(255, 255, 255, 0.2), -2.6em 0em 0 0em rgba(255, 255, 255, 0.2), -1.8em -1.8em 0 0em rgba(255, 255, 255, 0.2);
  }
  62.5% {
    box-shadow: 0em -2.6em 0em 0em rgba(255, 255, 255, 0.2), 1.8em -1.8em 0 0em rgba(255, 255, 255, 0.2), 2.5em 0em 0 0em rgba(255, 255, 255, 0.2), 1.75em 1.75em 0 0em rgba(255, 255, 255, 0.5), 0em 2.5em 0 0em rgba(255, 255, 255, 0.7), -1.8em 1.8em 0 0em #ffffff, -2.6em 0em 0 0em rgba(255, 255, 255, 0.2), -1.8em -1.8em 0 0em rgba(255, 255, 255, 0.2);
  }
  75% {
    box-shadow: 0em -2.6em 0em 0em rgba(255, 255, 255, 0.2), 1.8em -1.8em 0 0em rgba(255, 255, 255, 0.2), 2.5em 0em 0 0em rgba(255, 255, 255, 0.2), 1.75em 1.75em 0 0em rgba(255, 255, 255, 0.2), 0em 2.5em 0 0em rgba(255, 255, 255, 0.5), -1.8em 1.8em 0 0em rgba(255, 255, 255, 0.7), -2.6em 0em 0 0em #ffffff, -1.8em -1.8em 0 0em rgba(255, 255, 255, 0.2);
  }
  87.5% {
    box-shadow: 0em -2.6em 0em 0em rgba(255, 255, 255, 0.2), 1.8em -1.8em 0 0em rgba(255, 255, 255, 0.2), 2.5em 0em 0 0em rgba(255, 255, 255, 0.2), 1.75em 1.75em 0 0em rgba(255, 255, 255, 0.2), 0em 2.5em 0 0em rgba(255, 255, 255, 0.2), -1.8em 1.8em 0 0em rgba(255, 255, 255, 0.5), -2.6em 0em 0 0em rgba(255, 255, 255, 0.7), -1.8em -1.8em 0 0em #ffffff;
  }
}
@keyframes load5 {
  0%,
  100% {
    box-shadow: 0em -2.6em 0em 0em #ffffff, 1.8em -1.8em 0 0em rgba(255, 255, 255, 0.2), 2.5em 0em 0 0em rgba(255, 255, 255, 0.2), 1.75em 1.75em 0 0em rgba(255, 255, 255, 0.2), 0em 2.5em 0 0em rgba(255, 255, 255, 0.2), -1.8em 1.8em 0 0em rgba(255, 255, 255, 0.2), -2.6em 0em 0 0em rgba(255, 255, 255, 0.5), -1.8em -1.8em 0 0em rgba(255, 255, 255, 0.7);
  }
  12.5% {
    box-shadow: 0em -2.6em 0em 0em rgba(255, 255, 255, 0.7), 1.8em -1.8em 0 0em #ffffff, 2.5em 0em 0 0em rgba(255, 255, 255, 0.2), 1.75em 1.75em 0 0em rgba(255, 255, 255, 0.2), 0em 2.5em 0 0em rgba(255, 255, 255, 0.2), -1.8em 1.8em 0 0em rgba(255, 255, 255, 0.2), -2.6em 0em 0 0em rgba(255, 255, 255, 0.2), -1.8em -1.8em 0 0em rgba(255, 255, 255, 0.5);
  }
  25% {
    box-shadow: 0em -2.6em 0em 0em rgba(255, 255, 255, 0.5), 1.8em -1.8em 0 0em rgba(255, 255, 255, 0.7), 2.5em 0em 0 0em #ffffff, 1.75em 1.75em 0 0em rgba(255, 255, 255, 0.2), 0em 2.5em 0 0em rgba(255, 255, 255, 0.2), -1.8em 1.8em 0 0em rgba(255, 255, 255, 0.2), -2.6em 0em 0 0em rgba(255, 255, 255, 0.2), -1.8em -1.8em 0 0em rgba(255, 255, 255, 0.2);
  }
  37.5% {
    box-shadow: 0em -2.6em 0em 0em rgba(255, 255, 255, 0.2), 1.8em -1.8em 0 0em rgba(255, 255, 255, 0.5), 2.5em 0em 0 0em rgba(255, 255, 255, 0.7), 1.75em 1.75em 0 0em #ffffff, 0em 2.5em 0 0em rgba(255, 255, 255, 0.2), -1.8em 1.8em 0 0em rgba(255, 255, 255, 0.2), -2.6em 0em 0 0em rgba(255, 255, 255, 0.2), -1.8em -1.8em 0 0em rgba(255, 255, 255, 0.2);
  }
  50% {
    box-shadow: 0em -2.6em 0em 0em rgba(255, 255, 255, 0.2), 1.8em -1.8em 0 0em rgba(255, 255, 255, 0.2), 2.5em 0em 0 0em rgba(255, 255, 255, 0.5), 1.75em 1.75em 0 0em rgba(255, 255, 255, 0.7), 0em 2.5em 0 0em #ffffff, -1.8em 1.8em 0 0em rgba(255, 255, 255, 0.2), -2.6em 0em 0 0em rgba(255, 255, 255, 0.2), -1.8em -1.8em 0 0em rgba(255, 255, 255, 0.2);
  }
  62.5% {
    box-shadow: 0em -2.6em 0em 0em rgba(255, 255, 255, 0.2), 1.8em -1.8em 0 0em rgba(255, 255, 255, 0.2), 2.5em 0em 0 0em rgba(255, 255, 255, 0.2), 1.75em 1.75em 0 0em rgba(255, 255, 255, 0.5), 0em 2.5em 0 0em rgba(255, 255, 255, 0.7), -1.8em 1.8em 0 0em #ffffff, -2.6em 0em 0 0em rgba(255, 255, 255, 0.2), -1.8em -1.8em 0 0em rgba(255, 255, 255, 0.2);
  }
  75% {
    box-shadow: 0em -2.6em 0em 0em rgba(255, 255, 255, 0.2), 1.8em -1.8em 0 0em rgba(255, 255, 255, 0.2), 2.5em 0em 0 0em rgba(255, 255, 255, 0.2), 1.75em 1.75em 0 0em rgba(255, 255, 255, 0.2), 0em 2.5em 0 0em rgba(255, 255, 255, 0.5), -1.8em 1.8em 0 0em rgba(255, 255, 255, 0.7), -2.6em 0em 0 0em #ffffff, -1.8em -1.8em 0 0em rgba(255, 255, 255, 0.2);
  }
  87.5% {
    box-shadow: 0em -2.6em 0em 0em rgba(255, 255, 255, 0.2), 1.8em -1.8em 0 0em rgba(255, 255, 255, 0.2), 2.5em 0em 0 0em rgba(255, 255, 255, 0.2), 1.75em 1.75em 0 0em rgba(255, 255, 255, 0.2), 0em 2.5em 0 0em rgba(255, 255, 255, 0.2), -1.8em 1.8em 0 0em rgba(255, 255, 255, 0.5), -2.6em 0em 0 0em rgba(255, 255, 255, 0.7), -1.8em -1.8em 0 0em #ffffff;
  }
}
</style>	<title>Planet Life</title>
  <script async="" src="https://www.googletagmanager.com/gtag/js?id=G-MENBM6GSNY"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-MENBM6GSNY")</script>
<style type="text/css">#button {
  display:none;
}
.imgb_vis {
  animation: imgb-animation 7s linear;
}
@keyframes imgb-animation {
  10% {
    transform: translateX(0);
  }
  20% {
    transform: translateX(100px);
  }
  90% {
    transform: translateX(100px);
  }
  100% {
    transform: translateX(0);
  }
}</style></head>
<body>
  <img src="https://cdn.jsdelivr.net/gh/polandstick/mgg2@7b2af95dcfaa66cdf12bf44547469c43066f6142/games/planet-life/images/handling/coolMathSplash.png" id="coolMathSplash" style="display: none;">
  <div id="backgroundDiv" style="background-image: url(&quot;https://cdn.jsdelivr.net/gh/polandstick/mgg2@7b2af95dcfaa66cdf12bf44547469c43066f6142/games/planet-life/images/backgrounds/BG_Universe.png&quot;);"></div>
<div id="gameDiv" style="display: block;">
  <div id="resIconDiv">
    <div id="resIconWrapper">
      <img src="https://cdn.jsdelivr.net/gh/polandstick/mgg2@7b2af95dcfaa66cdf12bf44547469c43066f6142/games/planet-life/images/icons/wood.png" alt="wood">
      <p id="wood">0</p>
      <img src="https://cdn.jsdelivr.net/gh/polandstick/mgg2@7b2af95dcfaa66cdf12bf44547469c43066f6142/games/planet-life/images/icons/gold.png" alt="gold">
      <p id="gold">0</p>
      <img src="https://cdn.jsdelivr.net/gh/polandstick/mgg2@7b2af95dcfaa66cdf12bf44547469c43066f6142/games/planet-life/images/icons/coco.png" alt="coco">
      <p id="coco">0</p>
      <img src="https://cdn.jsdelivr.net/gh/polandstick/mgg2@7b2af95dcfaa66cdf12bf44547469c43066f6142/games/planet-life/images/icons/stardust.png" alt="stardust">
      <p id="stardust">0</p>
      <div class="floatRight">
        <img src="https://cdn.jsdelivr.net/gh/polandstick/mgg2@7b2af95dcfaa66cdf12bf44547469c43066f6142/games/planet-life/images/icons/settings.png" style="margin-right: 10px; margin-top: 4px; width: 60%" onclick="toggleSettings()">
      </div>
    </div>
  </div>
  <div class="fullWidth" id="resInfoDiv">
    <div id="infoContentHolder">
      <img src="https://cdn.jsdelivr.net/gh/polandstick/mgg2@7b2af95dcfaa66cdf12bf44547469c43066f6142/games/planet-life/images/icons/wood.png" alt="wood per second">
      <p id="woodSec">+0/s</p>
      <img src="https://cdn.jsdelivr.net/gh/polandstick/mgg2@7b2af95dcfaa66cdf12bf44547469c43066f6142/games/planet-life/images/icons/gold.png" alt="gold per second">
      <p id="goldSec">+0/s</p>
      <img src="https://cdn.jsdelivr.net/gh/polandstick/mgg2@7b2af95dcfaa66cdf12bf44547469c43066f6142/games/planet-life/images/icons/coco.png" alt="coco per second">
      <p id="cocoSec">+0/s</p>
      <div class="floatRight" id="ghostCounter" style="display: none;">
        <img src="https://cdn.jsdelivr.net/gh/polandstick/mgg2@7b2af95dcfaa66cdf12bf44547469c43066f6142/games/planet-life/images/icons/ghost.png" alt="ghosts">
        <p id="ghostCount">0</p>
      </div>
      <div class="floatRight" id="ringCounter" style="display: none;">
        <img src="https://cdn.jsdelivr.net/gh/polandstick/mgg2@7b2af95dcfaa66cdf12bf44547469c43066f6142/games/planet-life/images/icons/lollipop.gif" alt="space rings">
        <p id="ringCount">0</p>
      </div>
    </div>
  </div>
  <div class="bodyWrapper" id="bWrapper">
  <div id="almostBlackground"></div>
    <br>
    <br>
    <br>
    <div class="fullWidth" id="artDiv">
      <h1 id="dungeonLevel"></h1>
      <h1 id="settingsHeadline">Settings</h1>
      <div class="blackCover">
        <div class="derekArt" id="derekDiv" style="display: none;">
          <img src="https://cdn.jsdelivr.net/gh/polandstick/mgg2@7b2af95dcfaa66cdf12bf44547469c43066f6142/games/planet-life/images/handling/invisibleImg.gif" class="derekImg" style="z-index: 10;" id="legsImg">
          <img src="https://cdn.jsdelivr.net/gh/polandstick/mgg2@7b2af95dcfaa66cdf12bf44547469c43066f6142/games/planet-life/images/handling/invisibleImg.gif" class="derekImg" style="z-index: 11;" id="headImg">
          <img src="https://cdn.jsdelivr.net/gh/polandstick/mgg2@7b2af95dcfaa66cdf12bf44547469c43066f6142/games/planet-life/images/handling/invisibleImg.gif" class="derekImg" style="z-index: 12;" id="fistImg">
          <img src="https://cdn.jsdelivr.net/gh/polandstick/mgg2@7b2af95dcfaa66cdf12bf44547469c43066f6142/games/planet-life/images/handling/derekBlack.gif" class="derekImg" id="derekBlackImg">
        </div>
        <img src="https://cdn.jsdelivr.net/gh/polandstick/mgg2@7b2af95dcfaa66cdf12bf44547469c43066f6142/games/planet-life/images/handling/asteroid.gif" id="handlingArt">
      </div>
      <img src="https://cdn.jsdelivr.net/gh/polandstick/mgg2@7b2af95dcfaa66cdf12bf44547469c43066f6142/games/planet-life/images/handling/tinyImg.gif" id="settingsArt">
    </div>
  	<div class="fullWidth" id="textDiv">
      <div class="handlingBlackCover">
        <div class="textHolder">
          <p id="resCounter"></p>
          <p id="handling">You reach the huge potato-shaped chunk of asteroid. No wait. It's actually a giant Coco Pops! </p>
        </div>
      </div>
      <p id="settingsHandling"></p>
      <div id="loading_container"></div>
  		<div id="buttons"><div class="fullWidth" id="fullBackBut" style="display: block; margin-bottom: 10px;"><img class="buttonImg" src="https://cdn.jsdelivr.net/gh/polandstick/mgg2@7b2af95dcfaa66cdf12bf44547469c43066f6142/games/planet-life/images/handling/planet.gif" id="imgBackBut" style="margin-right: 20px; float: left;"><h1 style="color: rgb(255, 255, 255); margin-left: 15px; margin-top: 20px; margin-right: 10px;">Back</h1><div class="buttonBackground"></div></div><div class="fullWidth" id="fullstrawBut" style="display: block; margin-bottom: 10px;"><img src="https://cdn.jsdelivr.net/gh/polandstick/mgg2@7b2af95dcfaa66cdf12bf44547469c43066f6142/games/planet-life/images/handling/swirlyStraw.gif" class="buildButtonImage" style="margin-right: 20px;"><h1 class="buildButtonHeadline">Automatic Swirly Straw</h1><div class="resIconDiv" id="iconstrawBut" style="display: inline-block; margin-left: 10px; width: 100%;"><button id="strawBut" class="buildButton" disabled="">Build</button><img src="https://cdn.jsdelivr.net/gh/polandstick/mgg2@7b2af95dcfaa66cdf12bf44547469c43066f6142/games/planet-life/images/icons/wood.png" class="resIcon" style="display: inline-block;"><p class="buildButtonText" style="display: inline-block;">100</p><img src="https://cdn.jsdelivr.net/gh/polandstick/mgg2@7b2af95dcfaa66cdf12bf44547469c43066f6142/games/planet-life/images/icons/gold.png" class="resIcon" style="display: inline-block;"><p class="buildButtonText" style="display: inline-block;">10</p><img src="https://cdn.jsdelivr.net/gh/polandstick/mgg2@7b2af95dcfaa66cdf12bf44547469c43066f6142/games/planet-life/images/icons/coco.png" class="resIcon" style="display: none;"><p class="buildButtonText" style="display: none;">0</p><img src="https://cdn.jsdelivr.net/gh/polandstick/mgg2@7b2af95dcfaa66cdf12bf44547469c43066f6142/games/planet-life/images/icons/stardust.png" class="resIcon" style="display: none;"><p class="buildButtonText" style="display: none;">0</p></div><div class="fullWidth" id="full2strawBut" style="margin-left: 10px;"><p class="buildButtonText" id="strawBut-buildButtonDescription" style="margin-right: 20px;">Sucks up 1 coco/sec</p></div><div class="buildBackground"></div></div><br><br></div>
      <div id="settingsButtons">
      </div>
    <div class="fullWidth">
      <br>
      <br>
    </div>
  	</div>
  </div>
</div>
  <script src="https://cdn.jsdelivr.net/gh/polandstick/mgg2@7b2af95dcfaa66cdf12bf44547469c43066f6142/games/planet-life/en.json"></script>
  <script src="https://cdn.jsdelivr.net/gh/polandstick/mgg2@7b2af95dcfaa66cdf12bf44547469c43066f6142/games/planet-life/bridge.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/polandstick/mgg2@7b2af95dcfaa66cdf12bf44547469c43066f6142/games/planet-life/base64.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/polandstick/mgg2@7b2af95dcfaa66cdf12bf44547469c43066f6142/games/planet-life/state.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/polandstick/mgg2@7b2af95dcfaa66cdf12bf44547469c43066f6142/games/planet-life/initVars.js"></script>
  <script>

var audioSettings = {
	meiThresholdComplete: false,
	isMusicMuted: false,
	isSFXMuted: false,
	shouldPlayMusic: false,
	isBattleMusic: false,
	sfxPlayers: null,
	musicPlayer: null,
	battlePlayer: null,
};


var soundEffect = {
	slotMachine: "InsertCoin",
	win: "Win",
	loose: "Lose",
	buy: "Purchase",
	explosion: "Explosion",
	click: "pop-low",
	cheer: "Cheer",
	cry: "Cry",
	derek: "Derek",
	beating: "Arrr",
	beating2: "Arrr2",
	beating3: "Arrr3",
	beating4: "Arrr4",
	beating5: "Arrr5",
	punch1: "Punch1",
	punch2: "Punch2",
	punch3: "Punch3",
	punch4: "Punch1",
	text: "5",
	burger: "Burger",
	worm: "Worm",
	wormHole: "Wormhole",
	sven: "Sven",
	burgulon: "Burgulon",
	wifyHello: "WifyHello",
	wifyWrong: "WifyWrong",
	wifyCorrect: "WifyCorrect",
	fart: "Fart",
	ghost: "Ghost",
	heal: "Heal",
	potion: "Potion",
	thirsty: "Thirsty",
	vomit: "Vomit",
	doorOfRegret: "DoorOfRegret",
	party: "Party",
	hi: "Hi",
	baby: "Baby",
	babyCry: "BabyCry",
	ding: "Ding",
	heavy: "Heavy",
	house: "House",
	jack: "Jack",
	jazz: "Jazz",
	jerkSquad: "JerkSquad",
	shock: "Shock",
	stanley: "Stanley",
	tadaa: "Tadaa",
	techno: "Techno",
	canOpen: "CanOpen",
	core: "Core",
	beanie: "Beanie",
	mouladin: "Mouladin",
	slopnax: "Slopnax",
	bentLords: "BentLords",
	technoLow: "TechnoLow",
	mayonada: "Mayonada",
};

function loadAudioState() {
	audioSettings.isSFXMuted = state.soundMuted;
	audioSettings.isMusicMuted = state.musicMuted;
}

function playSound(filename) {
	if (audioSettings.isSFXMuted) { return; }
	
	if (!audioSettings.meiThresholdComplete) { return; }

	if (audioSettings.sfxPlayers === null) {
		audioSettings.sfxPlayers = {};
		for (var key in soundEffect) {
			if (soundEffect.hasOwnProperty(key)) {
				let value = soundEffect[key];
				audioSettings.sfxPlayers[value] = new Audio("https://cdn.jsdelivr.net/gh/polandstick/mgg2@7b2af95dcfaa66cdf12bf44547469c43066f6142/games/planet-life/audio/" + value + ".mp3");
			}
		}
	}

	audioSettings.sfxPlayers[filename].play();
}

function playBattleMusic() {
	if (audioSettings.isMusicMuted) { return; }
	if (!audioSettings.shouldPlayMusic) { return; }
	
	if (!audioSettings.meiThresholdComplete) { return; }

	audioSettings.isBattleMusic = true;

	if (audioSettings.battlePlayer === null) {
		audioSettings.battlePlayer = new Audio("https://cdn.jsdelivr.net/gh/polandstick/mgg2@7b2af95dcfaa66cdf12bf44547469c43066f6142/games/planet-life/audio/Honk_DereksTheme.mp3");

		audioSettings.battlePlayer.addEventListener("ended", function () {
			if (audioSettings.isMusicMuted || !audioSettings.isBattleMusic) { return; }
			audioSettings.battlePlayer.currentTime = 0;
			audioSettings.battlePlayer.play();
		});

	}

	if (audioSettings.musicPlayer !== null) {
		audioSettings.musicPlayer.pause();
	}

	if (audioSettings.battlePlayer !== null) {
		audioSettings.battlePlayer.play();
	}
}

function playMusic() {
	if (audioSettings.isMusicMuted) { return; }
	if (!audioSettings.shouldPlayMusic) { return; }
	
	if (!audioSettings.meiThresholdComplete) { return; }

	audioSettings.isBattleMusic = false;

	if (audioSettings.musicPlayer === null) {
		audioSettings.musicPlayer = new Audio("https://cdn.jsdelivr.net/gh/polandstick/mgg2@7b2af95dcfaa66cdf12bf44547469c43066f6142/games/planet-life/audio/rumsang_v2.mp3");;

		audioSettings.musicPlayer.addEventListener("ended", function () {
			if (audioSettings.isMusicMuted || audioSettings.isBattleMusic) { return; }
			audioSettings.musicPlayer.currentTime = 0;
			audioSettings.musicPlayer.play();
		});
		audioSettings.musicPlayer.play();
	}

	if (audioSettings.battlePlayer !== null) {
		audioSettings.battlePlayer.pause();
	}

	if (audioSettings.musicPlayer !== null) {
		audioSettings.musicPlayer.play();
	}
}

function resetMusic() {
	if (audioSettings.isMusicMuted) { return; }

	if (audioSettings.musicPlayer !== null) {
		audioSettings.musicPlayer.pause();
		audioSettings.musicPlayer.currentTime = 0;
	}

	if (audioSettings.battlePlayer !== null) {
		audioSettings.battlePlayer.pause();
		audioSettings.battlePlayer.currentTime = 0;
	}
}

function muteSound() {
	audioSettings.isSFXMuted = true;
	updateState("soundMuted", true);

	for (var key in audioSettings.sfxPlayers) {
		if (audioSettings.sfxPlayers.hasOwnProperty(key)) {
			audioSettings.sfxPlayers[key].pause();
		}
	}
}

function unMuteSound() {
	audioSettings.isSFXMuted = false;
	updateState("soundMuted", false);
}

function muteMusic() {
	audioSettings.isMusicMuted = true;
	updateState("musicMuted", true);

	if (audioSettings.musicPlayer !== null) {
		audioSettings.musicPlayer.pause();
	}

	if (audioSettings.battlePlayer !== null) {
		audioSettings.battlePlayer.pause();
	}
}

function unMuteMusic() {
	audioSettings.isMusicMuted = false;
	updateState("musicMuted", false);

	playMusic();
}

function playRandomPunchSound() {
	var punches = [soundEffect.punch1,soundEffect.punch2,soundEffect.punch3];
	var chosenPunch = Math.floor(Math.random() * punches.length);
	playSound(punches[chosenPunch]);
}

function playRandomDerekSound() {
	var punches = [soundEffect.beating,soundEffect.beating2,soundEffect.beating3,soundEffect.beating4,soundEffect.beating5];
	var chosenPunch = Math.floor(Math.random() * punches.length);
	playSound(punches[chosenPunch]);
}


</script>  <script src="https://cdn.jsdelivr.net/gh/polandstick/mgg2@7b2af95dcfaa66cdf12bf44547469c43066f6142/games/planet-life/handling.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/polandstick/mgg2@7b2af95dcfaa66cdf12bf44547469c43066f6142/games/planet-life/broccoliHandling.js"></script>
  <script>

function checkLastPaywall() {
	if (hasBridge()) {
		changeScene(
			"Wait.. Who's there?",
			"invisibleImg"
		);
		createGoButton("Who is it?","talk",goStoppedByBob2);
	} else {
		goNewBeginning();
	}
}

function goStoppedByBob2() {
	changeScene(
		"Hey, it's Bob the Bottle again!</br>Looks like you're all done with <span style='color:#ffea00'>Chapter 2.</span> Way to go!</br>Let's get you to the menu so you can get going on the last chapter!",
		"bobBottle"
	);
	createGoButton("Ok!","talk",goStartMenu3);
}

function goNewBeginning() {
	updateState('burgulonTime', true);
	updateState('bBurgulonUnlocked', true);
	changeScene("...","invisibleImg","");
	setTimeout(function(){
		changeScene("Hello?","invisibleImg","");
	},3000);
	setTimeout(function(){
		changeScene("Hello?","invisibleImg","");
		createGoButton("...","talk",goNewBeginning2);
	},5000);
}

function goNewBeginning2() {
	changeScene(
		"Is anybody here?",
		"invisibleImg"
	);
	setTimeout(function(){
		changeScene(
			"Is anybody here?",
			"invisibleImg"
		);
		createGoButton("...","talk",goNewBeginning3);
	},2000);
}

function goNewBeginning3() {
	
	
	
	
	
	
	
	
	
	
	
	playSound(soundEffect.burgulon);
	changeScene(
		"Oh hey there. You must be that new planet Burgulon",
		"burgulon"
	);
	createGoButton("Hi","talk",goNewBeginning4);
}

function goNewBeginning4() {
	
	
	
	
	
	
	
	
	
	
	
	playSound(soundEffect.burgulon);
	changeScene(
		"So you used to be a robot, but now you're a planet. Quite a transformation I must say",
		"burgulon"
	);
	createGoButton("...","talk",goNewBeginning5);
}

function goNewBeginning5() {
	
	
	
	
	
	playSound(soundEffect.burgulon);
	changeScene(
		"You seem a bit sad.. Do you miss your old planet friend? I'm sure he also misses you, but he is very far away from here",
		"burgulon"
	);
	createGoButton("...","talk",goNewBeginning6);
}

function goNewBeginning6() {
	
	
	
	
	
	playSound(soundEffect.burgulon);
	changeScene(
		"But I wouldn't dwell too much on the past. You have a whole new exciting life ahead of you",
		"burgulon"
	);
	createGoButton("...","talk",goNewBeginning7);
}

function goNewBeginning7() {
	
	
	
	
	
	playSound(soundEffect.burgulon);
	changeScene(
		"You're a planet now! So go see what planet life is all about.</br>I'm sure there's a lot of new friends for you just around the corner",
		"burgulon"
	);
	createGoButton("OK!","talk",goNewGalaxy);
}










function goNewGalaxy() {
	audioSettings.shouldPlayMusic = true;
	changeBackground("BG_Universe");
	playMusic();
	changeScene(
		"You are a shiny little mechanical planet, hanging out in a remote solar system",
		"burgulon",
		"goNewGalaxy"
	);
	createGoButton("Your Surface","burgulonSurface",goBurgulonSurface);
	if (!state.bBret) {
		createGoButton("Explore","binoculars",goSpaceJerk);
	}
	if (state.bBeanieProgress == 0 && state.bCocoPS > 0) {
		createGoButton("Explore","binoculars",goMeetBeanie);
	}
	if (state.bBeanieProgress > 0 && state.bBeanieProgress < 7) {
		createGoButton("Beanie","beanie",goBeanie);
	}
	if (state.bBeanieProgress >= 7) {
		createGoButton("Beanie","beanieBlind",goBeanie);
	}
	
	
	
	
	
	
	if (state.bBeanieProgress >= 6 && state.bAppleProgress == 0) {
		createGoButton("Look for meaning","binoculars",goGetApple);
	}
	if (!state.bStanley && state.bBeanieProgress >= 2) {
		createGoButton("Explore","binoculars",goMeetStanley);
	}
	if (state.bStanley && state.bBentProgress == 0) {
		createGoButton("Stanley The Star","stanley",goStanley);
	}
	if (!state.bAncientPlanet && state.bStardust >= 25) {
		createGoButton("Explore","binoculars",goMeetAncientPlanet);
	}
	if (state.bAncientPlanet) {
		createGoButton("Ancient Planet","ancientPlanet",goAncientPlanet);
	}
	
	
	
	if (state.bSpaceBar) {
		createGoButton("Space Bar","spaceBar",goSpaceBar);
	}
	if (state.bSpaceBen) {
		createGoButton("Space Ben","space_ben",goBurgSpaceBen);
	}
	if (state.bBeanieProgress >= 7 && !state.bPlanetBack) {
		createGoButton("Jack","jack",goInspectJack);
	}
	if (state.bPlanetBack) {
		createGoButton("Planet","planet",goPlanetBack);
	}
}



function goWarship() {
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	

}

function throwPebble() {
	bossBattle = "";
	changeScene(
		"You throw a small asteroid at the warship..",
		"derekulianWarship"
	);
	createGoButton("And?","talk",pickADerek,state.bCoreStardust);
}

function goNotEvenANibble() {
	changeScene(
		"They are a bit annoyed at you, but you don't smell of delicious stardust, so they let you be for now",
		"derekulianWarship"
	);
	createGoButton("Suckers","talk",goNewGalaxy);
}

function goSpaceJerk() {
	changeScene(
		"The only thing you can see around here is a small interstellar bus stop.<br/>There's a lonely jerk sitting there.. After some chit chat he reveals that his name is Bret, and he works as a mechanic on an evil spaceship close by",
		"busStop",
		"goSpaceJerk"
	);
	createGoButton("Back","burgulon",goNewGalaxy);
	createGoButton("Wanna hang?","talk",goRecruitJerk);
}

function goRecruitJerk() {
	playSound(soundEffect.hi);
	updateState('bBret', true);
	changeScene(
		"Bret looks at his cool wrist watch. The bus won't come in the next couple of years, so he has time to spare",
		"bret",
		"goRecruitJerk"
	);
	createGoButton("Great timing!","talk",goBurgulonSurface);
}


















































function goBurgulonSurface() {
	
	changeBackground("BG_Burgulon");
	changeScene(
		"Your fragmented mechanical surface is creaking and clonking. Deep chirps come from within your robot core",
		"burgulonSurface",
		"goBurgulonSurface"
	);
	createGoButton("Space","burgulon",goNewGalaxy);
	
	
	
	if (state.tTerrariumFound) {
		createGoButton("Time Terrarium","timeTerrarium",goTimeTerrarium);
	}
	if (state.bAppleProgress >= 2 && !state.bSpaceRadio && state.bJerkStarted) {
		createGoButton("Check your surface","binoculars",goMeetSpaceRadio);
	}
	if (state.bBentProgress > 0 && state.bJackLetters == 0) {
		createGoButton("Receive Mail","intergalacticMailman",goFirstLetter);
	}
	if (state.bMinionsKilled == 1 && state.bJackLetters == 1) {
		createGoButton("Receive Mail","intergalacticMailman",goSecondLetter);
	}
	if (state.bMinionsKilled == 2 && state.bJackLetters == 2) {
		createGoButton("Receive Mail","intergalacticMailman",goThirdLetter);
	}
	if (state.bMinionsKilled == 3 && state.bJackLetters == 3) {
		createGoButton("Receive Mail","intergalacticMailman",goFourthLetter);
	}
	if (state.bBeanieProgress >= 4 && state.bAppleProgress < 2) {
		createGoButton("Your Core","blackHole",goCore);
	} else if (state.bAppleProgress >= 2) {
		createGoButton("Your Core",state.bCoreState,goCore);
	}
	if (state.bSpaceRadio) {
		createGoButton("Space Radio","spaceRadio",goSpaceRadio);		
	}
	if (state.bJerkClub) {
		createGoButton("Jerk Club","jerkClub",goJerkClub);
	}
	if (state.bBret) {
		createGoButton("Bret","bret",goBret);
	}
	if (state.bEggProgess > 0 && state.bEggProgess < 10) {
		createGoButton("Egg","egg",goVisitEgg);	
	}
	if (state.bEggProgess == 10 && state.bBeanieProgress < 6) {
		createGoButton("Baby Engineer","engineerBaby",goVisitBaby);
	}
	if (state.bWoodSynthesizer) {
		createGoButton("Wood Synthesizer","woodSynthesizer",goWoodSynthesizer);
	}
	if (state.bWoodSynthesizer) {
		createProduct("Celestial Summoner");
	}
	if (state.bCelestialSummoner && state.bBentProgress < 1) {
		createGoButton("Celestial Summoner","celestialSummoner",goCelestialSummoner);
	}
}

function goFindCore() {
	changeScene(
		"The baby stops crying for no reason at all, and crawls down through your cracks",
		"engineerBaby"
	);
	createGoButton("Follow baby","engineerBaby",goFindCore2);
}

function goFindCore2() {
	updateState('bBeanieProgress', 6);
	changeScene(
		"It seems like the baby has found the core of your body. There is a bubbling black hole in the center, where your core should be. This would be great stuff for a therapist",
		"blackHole"
	);
	createGoButton("Back","burgulonSurface",goBurgulonSurface);
}

function goVisitEgg() {
	if (state.bEggProgess == 1) {
		changeScene(
			"The little egg is smooth to the touch. You wonder what's going on in there. Maybe you can hatch it if keep coming back to visit it?",
			"egg",
			"goVisitEgg"
		);
		createGoButton("Back","burgulonSurface",goBurgulonSurface);
		createGoButton("Wait a little while","egg",goVisitEgg);
	} else if (state.bEggProgess == 2) {
		changeScene(
			"You can hear somebody doing algebra from the inside of the egg",
			"egg",
			"goVisitEgg"
		);
		createGoButton("Back","burgulonSurface",goBurgulonSurface);
		createGoButton("Wait a little while","egg",goVisitEgg);
	} else if (state.bEggProgess == 3) {
		changeScene(
			"You can hear hammering noises from the inside",
			"egg",
			"goVisitEgg"
		);
		createGoButton("Back","burgulonSurface",goBurgulonSurface);
		createGoButton("Wait a little while","egg",goVisitEgg);
	} else if (state.bEggProgess == 4) {
		changeScene(
			"There is somebody drooling from the inside of the egg",
			"egg",
			"goVisitEgg"
		);
		createGoButton("Back","burgulonSurface",goBurgulonSurface);
		createGoButton("Wait a little while","egg",goVisitEgg);
	} else if (state.bEggProgess == 5) {
		changeScene(
			"Wait! Can you hear the egg shell cracking?",
			"egg",
			"goVisitEgg"
		);
		setTimeout(function(){
			changeScene(
				"Oh, it was just the sound of Bret trying to hide a fart",
				"bret"
			);
			createGoButton("Back","burgulonSurface",goBurgulonSurface);
			createGoButton("Wait a little while","egg",goVisitEgg);
			updateState('bEggProgess', state.bEggProgess + 1);
		},2500);
	} else if (state.bEggProgess == 7) {
		changeScene(
			"Somebody is using a laser cutter to undermine the weak points in the egg shell",
			"egg",
			"goVisitEgg"
		);
		createGoButton("Back","burgulonSurface",goBurgulonSurface);
		createGoButton("Wait a little while","egg",goVisitEgg);
	} else if (state.bEggProgess == 8) {
		changeScene(
			"Somebody is crying from the inside of the egg",
			"egg",
			"goVisitEgg"
		);
		createGoButton("Back","burgulonSurface",goBurgulonSurface);
		createGoButton("Wait a little while","egg",goVisitEgg);
	} else if (state.bEggProgess == 9) {
		changeScene(
			"You can hear very determined hammering from the inside of the egg",
			"egg",
			"goVisitEgg"
		);
		createGoButton("Back","burgulonSurface",goBurgulonSurface);
		createGoButton("Wait a little while","egg",goVisitEgg);
	}
	if (!state.bEggProgess == 5) {
		createGoButton("Back","burgulonSurface",goBurgulonSurface);
		createGoButton("Wait a little while","egg",goVisitEgg);
	}
	if (state.bEggProgess == 9) {
		changeScene("Wait! Can you hear the egg shell cracking?","egg");
		setTimeout(function(){
			changeScene("...","eggHatch");
		},2500);
		setTimeout(function(){
			playSound(soundEffect.baby);
			changeScene("WOW! It's a baby engineer! What a rare sight","engineerBaby");
		},6000);
		setTimeout(function(){
			updateState('bEggProgess', state.bEggProgess + 1);
			changeScene("He is drooling at a floor plan of your giant mechanical body","engineerBaby");
			createGoButton("Rad","burgulonSurface",goBurgulonSurface);
		},8000);
	} else {
		updateState('bEggProgess', state.bEggProgess + 1);
	}
}



function goBret() {
	playSound(soundEffect.hi);
	if (!state.bBretDoingCoco) {
		changeScene(
			"Bret is playing the air guitar on your surface.<br/>He tells you that you actually have a pretty high coco yield for a robot planet",
			"bret",
			"goBret"
		);
		createGoButton("Back","burgulonSurface",goBurgulonSurface);
		createGoButton("Extraction time!","coco",goBretCoco);
	} else {
		changeScene(
			"Bret is hard at work prying <span style='color:#ff0000'>" + (state.productStates[18] + 1) + " coco/sec</span> out of your cracks. He occasionally samples the goods",
			"bret",
			"goBret"
		);
		createGoButton("Back","burgulonSurface",goBurgulonSurface);
		if (state.bBeanieProgress >= 3 && !state.bWoodSynthesizer) {
			createGoButton("What's up?","talk",goBretAncientSecret);
		}
		createGoButton("Talk","talk",goBretTalk);
		if (state.bAppleProgress >= 2 && !state.bJerkClub) {
			createGoButton("Hear proposition","talk",goHearBusinessPlan);
		}
		createProduct("Crowbar Upgrade");
	}
}

function goHearBusinessPlan() {
	changeScene(
		"Bret awkwardly stumbles through a business plan. What if we start a Jerk Club!? Bret has plenty of Jerk friends out in the galaxy who would be willing to join",
		"bret",
		"createJerkClub"
	);
	createGoButton("Maybe later","talk",goBret);
	createProduct("Jerk Club");
}

function goBretAncientSecret() {
	changeScene(
		"Bret is super psyched about this new idea that he claims he came up with himself. Do you want to fund 'his' project?",
		"bret",
		"bretAncientSecret"
	);
	createGoButton("Back","bret",goBret);
	createProduct("Wood Synthesizer");
}

function goBretTalk() {
	playSound(soundEffect.hi);
	var h = "Bret is doing some poses.<br/>";
	var bretTalks = [
		"He brags that he used to work in a dungeon. But he got tired of seeing his friends get beaten to death by wild Derekulians, so he quit and found another job. You wonder if this really counts as bragging.",
		"He tells you about his favourite bands, but he has terrible taste in music, so the conversation doesn't last long.",
		"He brags about the time that his jerk team managed to defeat a Derekulian. It was super awesome until the Derekulian was revived by some stardust, and then just beat them all up.",
		"He tries to hide a fart, but fails. He pretends like it was just the creaking of the floor.",
		
	];
	h += bretTalks[bretTalkCount];
	h += "<br/>His butt crack is showing while he picks up the crowbar that he dropped";
	bretTalkCount++;
	if (bretTalkCount == bretTalks.length) {
		bretTalkCount = 0;
	}
	changeScene(h,"bret","goBretTalk");
	createGoButton("Back","bret",goBret);
	createGoButton("Talk more","talk",goBretTalk);
}

function goBretCoco() {
	updateState('bCocoPS', 1);
	updateState('bBretDoingCoco', true);
	changeScene(
		"Bret yanks a crowbar out of his pants and starts to pry coco out of your surface. It hurts and tickles at the same time",
		"coco",
		"goBretCoco"
	);
	createGoButton("Hehe.. auch!","talk",goBurgulonSurface);
}



function goWoodSynthesizer() {
	changeScene(
		"The beautiful machine is popping out <span style='color:#ff0000'>" + (state.productStates[21] + 1) + " wood/sec</span>. You can't help but make a happy little chirp",
		"woodSynthesizer",
		"goWoodSynthesizer"
	);
	createGoButton("Back","burgulonSurface",goBurgulonSurface);
	createProduct("Upgrade Wood Synthesizer");
}

function goCelestialSummoner() {
	changeScene(
		"The impossibly complex summoning device is charged and ready. You're giggling with anticipation!",
		"celestialSummoner",
		"goCelestialSummoner"
	);
	createGoButton("Back","burgulonSurface",goBurgulonSurface);
	if (!state.bCelestialSummonerCharged && state.bSpaceBar) {
		createProduct("Recharge Celestial Summoner");
	}
	if (!state.bSpaceBar) {
		createGoButton("Activate!","celestialSummoner",goSummonSpaceBar);
	}
	if (state.bCelestialSummonerCharged && !state.bSpaceBen) {
		createGoButton("Activate!","celestialSummoner",goSummonSpaceBen);
	} else if (state.bCelestialSummonerCharged && state.bSpaceBen) {
		createGoButton("Activate!","celestialSummoner",goSummonJack);
	}
	
	
	
	
	
}



function goSummonSpaceBar() {
	changeScene(
		"You press the button..",
		"celestialSummoner"
	);
	setTimeout(function(){
		playSound(soundEffect.explosion);
		changeScene(
			"PUF!",
			"explosion"
		);
	},1500);
	setTimeout(function(){
		changeScene(
			"..It's an old space bar.</br>Not quite what you were expecting, but still. Try not to act dissapointed",
			"spaceBar"
		);
		createGoButton("Ok","talk",goMeetSpaceBar);
	},2000);	
}

function goMeetSpaceBar() {
	playSound(soundEffect.party);
	changeScene(
		"You smell the stale smell of spilled beer and wasted lives. In the distance you can see the bar floating around in space. It seems to be attracted to the coco smell",
		"spaceBar",
		"goMeetSpaceBar"
	);
	createGoButton("Hello?","talk",goMeetSpaceBar2);
}

function goMeetSpaceBar2() {
	updateState('bSpaceBar', true);
	updateState('bCelestialSummonerCharged', false);
	changeScene(
		"Oh hi. We're running low on coco.. The party's growing kinda dull. Are you selling man?",
		"spaceBar"
	);
	createGoButton("I got Coco","coco",goSpaceBar);
}

function goSpaceBar() {
	playSound(soundEffect.party);
	changeScene(
		"There's an ancient party going on in there.. You are unsure if anybody even enjoys it anymore.<br/>But you are here to sell your coco, so stop worrying about that.</br>You have left around <span style='color:#8b5937'>" + state.bSpaceBarCoco + " coco</span> at the bar. They earn <span style='color:#ffc800'>" + calculateSpaceBarGold() + " gold</span> every 10 seconds!",
		"spaceBar",
		"goSpaceBar"
	);
	createGoButton("Back","burgulon",goNewGalaxy);
	createGoButton("How does this work?","talk",goSpaceBarTalk);
	createGoButton("Deposit coco","coco",goBarDepositCoco);
	if (state.bSpaceBarGold > 0) {
		createGoButton("Get the gold (more than " + state.bSpaceBarGold + " gold)","gold",goSpaceBarGold);
	}
	createProduct("Bar Upgrade");
}

function goSpaceBarGold() {
	changeScene(
		"You pick up <span style='color:#ffc800'>" + state.bSpaceBarGold + " gold</span> from the dealers. You casually threaten them, so they can keep up their excellent work",
		"gold"
	);
	createGoButton("Better not be skimmin' on me boys!","talk",goSpaceBar);
	updateState('bGold', state.bGold + state.bSpaceBarGold);
	updateState('bSpaceBarGold', 0);
}

function goBarDepositCoco() {
	changeScene(
		"You've deposited <span style='color:#8b5937'>" + state.bSpaceBarCoco + " coco</span> at the bar. The dealers are hard at work, converting it to gold for you. Just don't ask any questions",
		"coco"
	);
	if (state.bCoco >= 100) {
		createGoButton("Back","spaceBar",goSpaceBar);
		createGoButton("Deposit 100 coco","coco",goDepositCoco,100);
	} else {
		createGoButton("I don't have enough coco","coco",goSpaceBar);
	}
	if (state.bCoco >= 250) {
		createGoButton("Deposit 250 coco","coco",goDepositCoco,250);
	}
	if (state.bCoco >= 500) {
		createGoButton("Deposit 500 coco","coco",goDepositCoco,500);
	}
	if (state.bCoco >= 1000) {
		createGoButton("Deposit 1000 coco","coco",goDepositCoco,1000);
	}
	if (state.bCoco >= 5000) {
		createGoButton("Deposit 5000 coco","coco",goDepositCoco,5000);
	}
	if (state.bCoco >= 10000) {
		createGoButton("Deposit 10000 coco","coco",goDepositCoco,10000);
	}
}

function calculateSpaceBarGold() {
	if (state.bSpaceBarCoco > 0) {
		return (Math.round(state.bSpaceBarRate * (state.bSpaceBarCoco / 500)) + 1);
	} else {
		return 0;
	}
}

function goDepositCoco(amount) {
	updateState('bSpaceBarCoco', state.bSpaceBarCoco + amount);
	updateState('bCoco', state.bCoco - amount);
	upgradeAnimation("Let's deal some coco!","coco",goBarDepositCoco);
}

function goSpaceBarTalk() {
	changeScene(
		"Hey don't worry about it. These guys got you covered.</br>If you just leave your coco here, they will turn it around in no time. That means gold!</br>The more coco deposited, the quicker it will be flipped",
		"spaceBar"
	);
	createGoButton("Sounds legit","talk",goSpaceBar);
}



function goSummonSpaceBen() {
	playSound(soundEffect.explosion);
	changeScene(
		"!!!",
		"explosion"
	);
	setTimeout(function(){
		updateState('bCelestialSummonerCharged', false);
		updateState('bSpaceBen', true);
		changeScene(
			"What is this? Some gnome guy in a spaceship... Oh it's Space Ben.</br>He tells you that he has pivoted into the stardust business. He says it without parting his teeth at all. Fascinating",
			"space_ben"
		);
		createGoButton("Hello?","talk",goBurgSpaceBen);
	},500);
}

function goBurgSpaceBen() {
	changeScene(
		"Space Ben is sitting in his space shop.. Looking at you. Do you want to buy something? Do you?</br>He will sell anything for stardust",
		"space_ben",
		"newSpaceBen"
	);
	createGoButton("Back","burgulon",goNewGalaxy);

	if (state.bSpaceBenUpgraded) {

		if (state.bStardust >= state.bSpaceBenPrices[0]) {
			createGoButton("Buy 10000 wood (" + state.bSpaceBenPrices[0] + " stardust)","wood",stardustExchange,0);
		} else {
			createIconButton(
				"Buy 10000 wood (" + state.bSpaceBenPrices[0] + " stardust)",
				"https://cdn.jsdelivr.net/gh/polandstick/mgg2@7b2af95dcfaa66cdf12bf44547469c43066f6142/games/planet-life/images/handling/wood.gif",
				"fullWoodBut",
				"",
				"#8c1d1d",
				true,
				"buttons",
				stardustExchange,
				0
			);		
		}
		if (state.bStardust >= state.bSpaceBenPrices[1]) {
			createGoButton("Buy 3000 gold (" + state.bSpaceBenPrices[1] + " stardust)","gold",stardustExchange,1);
		} else {
			createIconButton(
				"Buy 3000 gold (" + state.bSpaceBenPrices[1] + " stardust)",
				"https://cdn.jsdelivr.net/gh/polandstick/mgg2@7b2af95dcfaa66cdf12bf44547469c43066f6142/games/planet-life/images/handling/gold.gif",
				"fullGoldBut",
				"",
				"#8c1d1d",
				true,
				"buttons",
				stardustExchange,
				1
			);			
		}
		if (state.bStardust >= state.bSpaceBenPrices[2]) {
			createGoButton("Buy 10000 coco (" + state.bSpaceBenPrices[2] + " stardust)","coco",stardustExchange,2);
		} else {
			createIconButton(
				"Buy 10000 coco (" + state.bSpaceBenPrices[2] + " stardust)",
				"https://cdn.jsdelivr.net/gh/polandstick/mgg2@7b2af95dcfaa66cdf12bf44547469c43066f6142/games/planet-life/images/handling/coco.gif",
				"fullCocoBut",
				"",
				"#8c1d1d",
				true,
				"buttons",
				stardustExchange,
				2
			);			
		}
		createSingleProduct("300 Space Rings (1000 stardust)");

	} else {

		if (state.bStardust >= state.bSpaceBenPrices[0]) {
			createGoButton("Buy 1000 wood (" + state.bSpaceBenPrices[0] + " stardust)","wood",stardustExchange,0);
		} else {
			createIconButton(
				"Buy 1000 wood (" + state.bSpaceBenPrices[0] + " stardust)",
				"https://cdn.jsdelivr.net/gh/polandstick/mgg2@7b2af95dcfaa66cdf12bf44547469c43066f6142/games/planet-life/images/handling/wood.gif",
				"fullWoodBut",
				"",
				"#8c1d1d",
				true,
				"buttons",
				stardustExchange,
				0
			);		
		}
		if (state.bStardust >= state.bSpaceBenPrices[1]) {
			createGoButton("Buy 300 gold (" + state.bSpaceBenPrices[1] + " stardust)","gold",stardustExchange,1);
		} else {
			createIconButton(
				"Buy 300 gold (" + state.bSpaceBenPrices[1] + " stardust)",
				"https://cdn.jsdelivr.net/gh/polandstick/mgg2@7b2af95dcfaa66cdf12bf44547469c43066f6142/games/planet-life/images/handling/gold.gif",
				"fullGoldBut",
				"",
				"#8c1d1d",
				true,
				"buttons",
				stardustExchange,
				1
			);			
		}
		if (state.bStardust >= state.bSpaceBenPrices[2]) {
			createGoButton("Buy 1000 coco (" + state.bSpaceBenPrices[2] + " stardust)","coco",stardustExchange,2);
		} else {
			createIconButton(
				"Buy 1000 coco (" + state.bSpaceBenPrices[2] + " stardust)",
				"https://cdn.jsdelivr.net/gh/polandstick/mgg2@7b2af95dcfaa66cdf12bf44547469c43066f6142/games/planet-life/images/handling/coco.gif",
				"fullCocoBut",
				"",
				"#8c1d1d",
				true,
				"buttons",
				stardustExchange,
				2
			);			
		}
		createSingleProduct("30 Space Rings (100 stardust)");
		
	}

	createProduct("Upgrade Shop");

}

function stardustExchange(res) {
	playSound(soundEffect.buy);
	var thePrices;
	if (state.bSpaceBenUpgraded) {
		thePrices = [10000,3000,10000];
	} else {
		thePrices = [1000,300,1000];
	}
	var resImages = [
		"wood",
		"gold",
		"coco"
	];
	changeScene(
		"Here you go sir",
		resImages[res]
	);
	if (res == 0) {
		updateState('bWood', state.bWood + thePrices[0]);
	}
	if (res == 1) {
		updateState('bGold', state.bGold + thePrices[1]);
	}
	if (res == 2) {
		updateState('bCoco', state.bCoco + thePrices[2]);
	}
	updateState('bStardust', state.bStardust - state.bSpaceBenPrices[res])
	var newArray = state.bSpaceBenPrices;
	if (state.bSpaceBenUpgraded) {

		for (var i = 0; i < newArray.length; i++) {
			if (res != i) {
				if (state.bSpaceBenPrices[i] > 100) {
					newArray[i] -= 10;					
				}
			}
		}
		if (state.bSpaceBenPrices[res] < 750) {
			newArray[res] += 20;		
		}

	} else {

		for (var i = 0; i < newArray.length; i++) {
			if (res != i) {
				if (state.bSpaceBenPrices[i] > 10) {
					newArray[i] -= 1;					
				}
			}
		}
		if (state.bSpaceBenPrices[res] < 75) {
			newArray[res] += 2;		
		}

	}
	updateState('bSpaceBenPrices', newArray);
	setTimeout(function(){
		goBurgSpaceBen();
	},200);
}




function goSpaceRadio() {
	changeScene(
		"The space radio is very ready to play some music!",
		"spaceRadio",
		"goSpaceRadio"
	);
	createGoButton("Back","burgulonSurface",goBurgulonSurface);
	if (state.bShipsSummoned[0] && state.bDerekShipStates[0] < allDerekShips[0].levels) {
		createGoButton("Flying Saucer","flyingSaucer",loadDerekShip,0);
	} else if (state.bDerekShipStates[0] < allDerekShips[0].levels) {
		createSingleProduct("Friend House Music (200 gold)");
	}
	if (state.bShipsSummoned[1] && state.bDerekShipStates[1] < allDerekShips[1].levels) {
		createGoButton("Evil Toaster","evilToaster",loadDerekShip,1);
	} else if (state.bDerekShipStates[1] < allDerekShips[1].levels && state.bDerekShipStates[0] == allDerekShips[0].levels) {
		createSingleProduct("Jerk Techno (800 gold)");
	}
	if (state.bShipsSummoned[2] && state.bDerekShipStates[2] < allDerekShips[2].levels) {
		createGoButton("The Mother Cow","derekulianWarship",loadDerekShip,2);
	} else if (state.bDerekShipStates[2] < allDerekShips[2].levels && state.bDerekShipStates[1] == allDerekShips[1].levels) {
		createSingleProduct("Gnomish Heavy Metal (2000 gold)");
	}
	if (state.bShipsSummoned[3] && state.bDerekShipStates[3] < allDerekShips[3].levels) {
		createGoButton("Derekulus X","spaceDungeon",loadDerekShip,3);
	} else if (state.bDerekShipStates[3] < allDerekShips[3].levels && state.bDerekShipStates[2] == allDerekShips[2].levels) {
		createSingleProduct("Beanie's Improv Jazz (10000 gold)");
	}		
}

function goMeetSpaceRadio() {
	updateState('bSpaceRadio', true);
	changeScene(
		"It looks like an old Derekulian space radio has landed on your surface.</br>They must have gotten tired of the noise, and thrown it into space",
		"spaceRadio"
	);
	createGoButton("Groovy!","spaceRadio",goSpaceRadio);
}


function goGetApple() {
	changeScene(
		"You take a dedicated look around the emptiness of the universe. There's not a lot of anything here.. Especially not meaning",
		"invisibleImg"
	);
	createGoButton("Typical!","talk",goGetApple2);
}

function goGetApple2() {
	changeScene(
		"Wait a minute.. Isn't that something over there?",
		"tinyApple"
	);
	createGoButton("Where?","talk",goGetApple3);
}

function goGetApple3() {
	playSound(soundEffect.wormHole);
	changeScene(
		"Wow! Look at those colors. Is it a wormhole?",
		"wormhole"
	);
	createGoButton("Woooow","talk",goGetApple4);
}

function goGetApple4() {
	playSound(soundEffect.explosion);
	changeScene(
		"!!!",
		"explosion"
	);
	setTimeout(function(){
		updateState('bAppleProgress', 1);
		changeScene(
			"An apple came out of the wormhole! What does this even mean? This apple is probably super important.. It feels like it's the missing piece somehow. Maybe it's what you need to light your fire. Get in the groove. Get your inner light blazing.. </br></br>Anyways, that's enough hints for now. Just take the apple",
			"smallApple"
		);
		createGoButton("Hehe","talk",goNewGalaxy);
	},500);
}


function burgerIsARobot() {
	updateState('bWood', state.bWood + 1000);
	updateState('bGold', state.bGold + 1000);
	updateState('bCoco', state.bCoco + 1000);
	
	console.log(".. or is he burger?"); 
}

function readyForJerk() {
	updateState('bBeanieProgress', 8);
	updateState('bBret', true);
	updateState('bEggProgess', 10);
	updateState('bAncientPlanet', true);
	updateState('bJerkClub', true);
	updateState('bAppleProgress', 2);
	updateState('bSpaceBar', true);
	updateState('bCoco', state.bCoco + 1000);
	updateState('bGold', state.bGold + 200);
	updateState('bWood', state.bWood + 600);
	console.log(".. It's time for the jerkening");
}

function hungryForStardust() {
	updateState('bStardust', state.bStardust + 500);
	console.log("Oh, that sweet taste");
}

function willYouMarryMe() {
	updateState('bSpaceRings', state.bSpaceRings + 200);
	console.log("No but here are your stupid space rings!");
}

function youCompleteMe() {
	updateState('bCoreStardust', state.bCoreCapacity);
	console.log("No you complete ME!");
}





















































































































</script>  <script src="https://cdn.jsdelivr.net/gh/polandstick/mgg2@7b2af95dcfaa66cdf12bf44547469c43066f6142/games/planet-life/theEnd.js"></script>
  <script>

function goMeetBeanie() {
	changeScene(
		"There's a small nebula cloud out in the distance. Looks like there's something behind it",
		"nebula"
	);
	createGoButton("Back","burgulon",goNewGalaxy);
	createGoButton("Blow the cloud away","nebula",goMeetBeanie2);
}

function goMeetBeanie2() {
	changeScene("Swuuush...","nebulaDissolve");
	setTimeout(function(){
		playSound(soundEffect.beanie);
		changeScene(
			"The cloud dissolves, and behind it you discover a little green planet",
			"beanie"
		);
		createGoButton("Hello","talk",goMeetBeanie3);
	},1000);

}

function goMeetBeanie3() {
	updateState('bBeanieProgress', 1);
	changeScene(
		"The planet breaks open in a warming smile. She is very happy that you got her out of that dense nebula mess. Also her name is Beanie, so that's cool",
		"beanie"
	);
	createGoButton("Hehe","talk",goBeanie);
}




function goBeanie() {
	if (state.bBeanieProgress < 7) {
		playSound(soundEffect.beanie);
		changeScene(
			"Beanie is spinning around herself in a very graceful way",
			"beanie",
			"goBeanie"
		);
		createGoButton("Back","burgulon",goNewGalaxy);
		if (state.bBeanieProgress == 1) {
			createSingleProduct("Give 20 coco as a present");
		}
		if (state.bBeanieProgress == 2) {
			createSingleProduct("Give 50 gold as a present");
		}
		
		
		
		
		
		
	}
	if (state.bBeanieProgress == 7) {
		changeScene(
			"Oh no! It looks like Beanie got her eyes burned out when you summoned that stupid new sun",
			"beanieBlind"
		);
		createGoButton("Oh no!","talk",goBeanieBlind);
	}
	if (state.bBeanieProgress == 8) {
		goBeanieImagination();
	}
}

function buyTinyBean() {
	var size = "Tiny";
	var colors = ["Purple","Blue","Orange"];
	var color = colors[Math.floor(Math.random() * colors.length)];
	var name = "Tiny " + color + " Bean";

	var image = "beanTiny" + color;
	var thisBean = new bean(size,color,image,name);
	var beanArray = state.bMyBeans;
	beanArray.push(thisBean);
	updateState('bMyBeans', beanArray);

	changeScene(
		"You got: " + name + "!",
		image,
		"boughtABean"
	);
	createGoButton("Cool bean!",image,goBeanie);
}

function goBeanieBlind() {
	changeScene(
		"Beanie doesn't seem to notice you. Maybe she is preoccupied elsewhere",
		"beanieBlind"
	);
	createGoButton("Poke","beanieBlind",goBeaniePoke);
}

function goBeaniePoke() {
	changeScene(
		"You poke Beanie, and..",
		"beanieBlind"
	);
	setTimeout(function(){
		playSound(soundEffect.explosion);
		changeScene(
			"PUF!",
			"explosion"
		);
	},1500);
	setTimeout(function(){
		changeScene(
			"You have been transported into Beanies imagination. It smells nice in here",
			"beanieImagination"
		);
		createGoButton("Cool!","talk",goBeanieImaginationIntro);
	},2000);
}

function goBeanieImaginationIntro() {
	updateState('bBeanieProgress', 8);
	changeScene(
		"Beanie walks up to you. She's very proud of her imaginary world. Go take a look around! This place is much more awesome than reality",
		"beanieBean"
	);
	createGoButton("Sure!","beanieImagination",goBeanieImagination);
}




function goBeanieImagination() {
	changeBackground("BG_BeanieImagination");
	changeScene(
		"This is all inside Beanies head. Amazing! There's even a Casino here",
		"beanieImagination",
		"goBeanieImagination"
	);
	createGoButton("Back","burgulon",goNewGalaxy);
	
	
	
	
	createGoButton("Casino Camp","casino",goCasino);
	if (state.bMouladinProgress == 0) {
		createGoButton("Forest","forest",goMeetMouladin);
	} else {
		if (state.bMouladinProgress < 5) {
			createGoButton("Mouladin","mouladin",goMouladin);
		} else {
			createGoButton("Remouladin","appleWorm",goMouladin);
		}
	}
	if (state.bMouladinProgress > 1) {
		createGoButton("Beanie","beanieBean",goBeanieBean);
	}
	if (state.bFriendJerkinson) {
		createGoButton("Jerkinson Crusoe","jerkinsonCrusoe",goJerkinson);
	}
	if (state.bFriendSweatson) {
		createGoButton("Sweatson","sweatson",goSweatson);
	}
	if (state.bFriendAncientDerek) {
		createGoButton("Ancient Derek","ancientDerek",goAncientDerek);
	}
	if (state.bPotato) {
		createGoButton("Space Potato","potato",goPotato);
	}
	if (state.bSlopnax) {
		createGoButton("Slopnax","slopnax",goSlopnaxFriend)
	}
	if (state.bLemonada) {
		createGoButton("Lemonada","lemonada",goLemonada);
	}
	
}

function goBeanieBean() {
	playSound(soundEffect.beanie);
	changeScene(
		"Hey it's Beanie! She was out for a long walk in her imagination, but now she is back",
		"beanieBean"
	);
	createGoButton("Back","beanieImagination",goBeanieImagination);
	if (!state.bBeanieImaginationUpgrade) {
		createGoButton("What can you do with your imagination?","talk",goBeanieBuyJerkUpgrade);		
	}
	createGoButton("Talk","talk",goBeanieBeanTalk);
}

function goBeanieBuyJerkUpgrade() {
	changeScene(
		"Beanie tells you that her imagination could become much more powerful. If she digested enough stardust she might even be able to imagine <span style='color:#ea00ff'>LE</span><span style='color:#ffd900'>GE</span><span style='color:#00ff08'>ND</span><span style='color:#00d9ff'>ARY</span> jerks for you",
		"beanieBean",
		"goBeanieUpgradeJerks"
	);
	createGoButton("Back","beanieBean",goBeanieBean);
	createProduct("Upgrade Beanies Imagination");
}

function goBeanieImagineJerks() {
	var squadFullText = "";
	if (countJerksInPile() >= 50) {
		squadFullText = "</br><span style='color:#ff0000'>There are 50 jerks in your squad. It's completely packed!! You need to remove some if you want to buy new jerks</span>";
	}
	changeScene(
		"Beanie tells you that she could try to imagine some <span style='color:#ea00ff'>LE</span><span style='color:#ffd900'>GE</span><span style='color:#00ff08'>ND</span><span style='color:#00d9ff'>ARY</span> jerks for you.</br>She will need some space rings to fuel her imagination.</br>You have <span style='color:#ffc800'>" + state.bSpaceRings + " space rings</span>" + squadFullText,
		"beanieBean",
		"legendaryJerks"
	);
	createGoButton("Back","jerkClub",goJerkClub);

	if (countJerksInPile() < 50) {
		createSingleProduct("Imagine <span style='color:#ea00ff'>LE</span><span style='color:#ffd900'>GE</span><span style='color:#00ff08'>ND</span><span style='color:#00d9ff'>ARY</span> jerks (25000 space rings)");
	} else {
		createIconButton(
			"Imagine <span style='color:#ea00ff'>LE</span><span style='color:#ffd900'>GE</span><span style='color:#00ff08'>ND</span><span style='color:#00d9ff'>ARY</span> jerks (25000 space rings)",
			"https://cdn.jsdelivr.net/gh/polandstick/mgg2@7b2af95dcfaa66cdf12bf44547469c43066f6142/games/planet-life/images/handling/spaceRing.gif",
			"legendaryJerksBut",
			"",
			"#8c1d1d",
			true,
			"buttons",
			goBeanieImagineJerks,
			0
		);	
	}
}

function goImagineLegendaryJerks() {

		var rarity = 10;
		playSound(soundEffect.cheer);
		playSound(soundEffect.canOpen);
		var openedJerks;
		pickTwoJerks();
		while (openedJerks[0].navn == openedJerks[1].navn) {
			pickTwoJerks();
		}
		function pickTwoJerks() {
			openedJerks = [allJerks[pickJerkByRarity(rarity)],allJerks[pickJerkByRarity(rarity)]];
		}
		
		changeScene(
			"Two <span style='color:#ea00ff'>LE</span><span style='color:#ffd900'>GE</span><span style='color:#00ff08'>ND</span><span style='color:#00d9ff'>ARY</span> jerks pop out:</br>A <span style='color:#2fde10'>" + openedJerks[0].navn + "</span></br>and a <span style='color:#2fde10'>" + openedJerks[1].navn + "</span></br>Which one do you want on your squad?",
			"beanieBean"
		);
		createGoButton("I don't want any of these jerks!","no",goBeanieImagineJerks);
		createGoButton(openedJerks[0].navn + " <span style='color:#ffea00'>(" + openedJerks[0].actionCost + " actions)</span>" + "</br><span style='color:#8a8a8a'>" + openedJerks[0].description + "</span>",openedJerks[0].image,pickAJerk,openedJerks[0],true);
		createGoButton(openedJerks[1].navn + " <span style='color:#ffea00'>(" + openedJerks[1].actionCost + " actions)</span>" + "</br><span style='color:#8a8a8a'>" + openedJerks[1].description + "</span>",openedJerks[1].image,pickAJerk,openedJerks[1],true);

}

function goBeanieBeanTalk() {
	var beanieTalks = [
		"Beanie is excited that you are visiting her in her imagination. She actually likes this place better than reality",
		"She says it's fine if you bring some friends in here. It can be a little lonely with only made up people",
		"She found some vague old memories of a weird lumberjack, and a snobbish empress. She turned them into some mean poker players",
		"The One Eyed Derekulian? She actually has no idea how she came up with that. But she hopes you like the taste of coffee",
		"You ask her about Mouladin, and she seems confused. She didn't come up with anyone like that.. She starts to question your sanity",
		"Beanie is working on imagining her imagination a little bigger. She is thinking of expanding with a few more lakes, and maybe even a city if she has got time",
		"She hopes you like the beans. They are home grown in her imagination",
	];
	changeScene(
		beanieTalks[beanieTalkCount],
		"beanieBean"
	);
	createGoButton("Back","beanieBean",goBeanieBean);
	createGoButton("Stay a little while longer","talk",goBeanieBeanTalk);
	if (beanieTalkCount < beanieTalks.length - 1) {
		beanieTalkCount++;
	} else {
		beanieTalkCount = 0;
	}
}



















function goGiveBeanieCoco() {
	updateState('bCoco', state.bCoco + 20);
	changeScene(
		"Beanie is flattered and amused that you would want to gift her coco. She doesn't even like coco.<br/>You have a witty little conversation about how adorable Bret is",
		"beanie",
		"goGiveBeanieCoco"
	);
	createGoButton("Hehe","talk",goGiveBeanieCoco2);
}

function goGiveBeanieCoco2() {
	updateState('bBeanieProgress', 2);
	updateState('bEggProgess', 1);
	changeScene(
		"After your conversation you find an egg on your surface. You didn't even notice Beanie putting it there",
		"egg"
	);	
	createGoButton("Aww sweet","talk",goNewGalaxy);
}

function goGiveBeanieGold() {
	updateState('bGold', state.bGold + 50);
	changeScene(
		"Beanie shakes her head. You know you shouldn't have. Why would a beautiful planet like her even need gold. You are too shy to say anything worthwile, but Beanie doesn't seem to mind",
		"beanie",
		"goGiveBeanieGold"
	);
	createGoButton("Hehe","talk",goGiveBeanieGold2);
}

function goGiveBeanieGold2() {
	updateState('bBeanieProgress', 3);
	changeScene(
		"Beanie whispers an ancient secret to Bret, and he is like totally. You should talk to him and hear what's up",
		"bret"
	);	
	createGoButton("Right","talk",goNewGalaxy);
}



function goCasino() {
	changeBackground("BG_CasinoCamp");
	changeScene(
		"There's a little camp near the forest. It's apparently a cosy little casino.</br>Maybe you can win something here",
		"casino"
	);
	createGoButton("Back","beanieImagination",goBeanieImagination);
	createGoButton("One Eyed Derekulian Roulette","rouletteTent",goRoulette);
	createGoButton("Wooden Poker","pokerTable",goPoker);
}



function goRoulette() {
	changeScene(
		"You enter a stuffy tent. Inside sits an old one eyed Derekulian, staring you down with his lonely eye. Wanna play a game!?",
		"derekulianRoulette",
		"goRoulette"
	);
	createGoButton("Back","casino",goCasino);
	createGoButton("Are there rules?","talk",goRouletteRules);
	createSingleProduct("Bet 50 gold");
	createSingleProduct("Bet 500 gold");
	createSingleProduct("Bet 1000 gold");
}

function goRouletteRules() {
	changeScene(
		"The old Derekulian laughs like a car that won't start. If you find the eye, you lose the gold. If you don't you get richer. Try not to get greedy, hehehehe!",
		"derekulianRoulette",
		"goRouletteRules"
	);
	createGoButton("Sounds simple","talk",goRoulette);
}

function goPlayRoulette(amount) {
	


	(soundEffect.buy);
	rouletteBet = amount;
	changeScene(
		"You put your <span style='color:#fcba03'>" + amount + " gold</span> on the table. Before you know it, 3 cups of coffee appear on the table. You clearly have to drink one of them. Which do you choose?",
		"derekulianRouletteCups",
		"goPlayRoulette"
	);
	createGoButton("First cup","coffeeCup",goDrinkCoffee,1);
	createGoButton("Second cup","coffeeCup",goDrinkCoffee,2);
	createGoButton("Third cup","coffeeCup",goDrinkCoffee,3);
}

function goDrinkCoffee(cup) {
	playSound(soundEffect.thirsty);
	changeScene(
		"You carefully chuck down the boiling hot coffee, afraid what you might find in the depths. As you drink you discover..",
		"coffeeCup"
	);
	createGoButton("Enough with the suspense!","talk",goFinishCup,cup);
}

function goFinishCup(cup) {
	var eyeCup = Math.round(Math.random() * 3);
	if (eyeCup == cup) {
		playSound(soundEffect.shock);
		rouletteBet = 0;
		changeScene(
			"..There's <span style='color:#ff1500'>A DISGUSTING EYE</span> at the bottom of the cup! You almost swallowed it. How gross!</br>Oh and you lost all the gold you bet. How unfortunate!",
			"coffeeCupEye"
		);
		createGoButton("Terrible coffee!","coffeeCup",goRoulette);
	} else {
		playSound(soundEffect.heal);
		rouletteBet = Math.round(rouletteBet + (rouletteBet / 2));
		changeScene(
			"..There's <span style='color:#00ff11'>NO DISGUSTING EYE</span> in your cup! Just how you like your coffee. And hey, you won more gold!",
			"coffeeCupEmpty"
		);
		createGoButton("Great coffee!","coffeeCup",goEvaluateGamblingHabits);
	}
}

function goEvaluateGamblingHabits() {
	changeScene(
		"You now have <span style='color:#fcba03'>" + rouletteBet + " gold</span>. Can you control your gambling, or are you going to be a raging ludomaniac?",
		"gold"
	);
	if (rouletteBet >= 100000 && !state.bRouletteCubeFound) {
		createGoButton("Claim special reward","wormCube",goFindRouletteCube);
	}
	createGoButton("Leave with <span style='color:#fcba03'>" + rouletteBet + " gold</span>","gold",goLeaveRoulette);
	createGoButton("I'm not done here. More coffee!","coffeeCup",goPlayRoulette,rouletteBet);
}

function goLeaveRoulette() {
	playSound(soundEffect.buy);
	updateState('bGold', state.bGold + rouletteBet);
	var lolliCount = Math.ceil(rouletteBet/100);
	changeScene(
		"You get <span style='color:#fcba03'>" + rouletteBet + " gold.</span></br>And then the bull hands you <span style='color:#ff0000'>" + lolliCount + " lollipops</span> as a thanks for spending time with him.</br>You leave the tent, completely high on caffeine",
		"rouletteTent"
	);
	rouletteBet = 0;
	updateState('bLollipops', state.bLollipops + lolliCount);
	createGoButton("Phew!","talk",goCasino);
}

function goFindRouletteCube() {
	updateState('bRouletteCubeFound', true);
	updateState('wormCubes', state.wormCubes + 1);
	if (state.tTerrariumFound) {
		changeScene(
			"Ok wow! Your special reward was <span style='color:#ff00bb'>a Worm Cube</span></br>Let's put it in the Time Terrarium",
			"wormCube"
		);
	} else {
		changeScene(
			"Ok wow! Your special reward was <span style='color:#ff00bb'>a Worm Cube</span></br>You don't know what it is, but you have a feeling that you will need it in another life. Better keep it safe",
			"wormCube"
		);
	}
	createGoButton("Fantastic!","wormCube",goEvaluateGamblingHabits);
}




function goMeetMouladin() {
	changeScene(
		"In the forest there is a small clearing",
		"forest"
	);
	createGoButton("Enter clearing","forest",goMeetMouladin2);
}

function goMeetMouladin2() {
	playSound(soundEffect.mouladin);
	changeScene(
		"In the clearing there's a wormlike thing sitting on a rock, meditating",
		"mouladin"
	);
	createGoButton("Hello?","talk",goMeetMouladin3);
}

function goMeetMouladin3() {
	changeScene(
		"The worm doesn't open his eyes as he speaks to you. His name is Mouladin, and he is busy gathering mental power. He has travelled from the past to be born in the future, and he has chosen Beanie's imagination as his womb. Whatever that means",
		"mouladin"
	);
	createGoButton("Can I help?","talk",goMeetMouladin4);
}

function goMeetMouladin4() {
	updateState('bMouladinProgress', 1);
	changeScene(
		"The worm smiles. If you could get him some lollipops, that would be great.</br>You wonder what lollipops are going to do for him",
		"mouladin"
	);
	createGoButton("Sure sure","talk",goBeanieImagination);
}

var mouladinImages = [
	"invisibleImg",
	"mouladin",
	"mouladin2",
	"mouladin3",
	"mouladin4",
	"appleWorm"
];

function goMouladin() {
	var moderateLollipopAmount;
	var lolliesLeftToGive = lolliGoals[state.bMouladinProgress] - state.bMouladinLollipops;
	if (state.bLollipops > lolliesLeftToGive) {
		moderateLollipopAmount = lolliesLeftToGive;
	} else {
		moderateLollipopAmount = state.bLollipops;
	}
	if (state.bMouladinProgress < 5) {
		playSound(soundEffect.mouladin);
		changeScene(
			"Mouladin has been expecting you. He has <span style='color:#ff0000'>" + state.bMouladinLollipops + "/" + lolliGoals[state.bMouladinProgress] + " lollipops,</span> but that is not enough!</br>Bring him some more",
			mouladinImages[state.bMouladinProgress]
		);
	} else {
		playSound(soundEffect.worm);
		changeScene(
			"Remouladin is floating around in his apple.</br>His appetite for lollipops have been filled. But he is willing to trade you some stardust for them",
			mouladinImages[state.bMouladinProgress]
		);
	}
	createGoButton("Back","beanieImagination",goBeanieImagination);
	if (state.bMouladinProgress >= 5) {
		if (state.wormCubes > 0) {
			createGoButton("How many Worm Cubes do I have?","wormCube",goCheckWormCubes,"burgulon");
		}
		createGoButton("Trade <span style='color:#ff0000'>" + state.bLollipops + " lollipops</span> for <span style='color:#00fff7'>" + (state.bLollipops * 10) + " stardust</span>","stardust",goTradeLollies);	
	} 
	if (state.bMouladinUpgradePoints > 0) {
		createGoButton("Feel a strange sensation","burgulon",goMouladinUpgrade,true);
	} else if (checkMouladinUpgrades() > 0){
		createGoButton("Feel your powers","burgulon",goMouladinUpgrade,false);
	}
	if (state.bLollipops > 0 && state.bMouladinProgress < 5) {
		createGoButton("Give " + moderateLollipopAmount + " lollipops","Lollipop",goGiveLollipops,moderateLollipopAmount);
	}
	createGoButton("Talk","talk",goMouladinTalk);
}

function goTradeLollies() {
	changeScene(
		"You hand Remouladin all your <span style='color:#ff0000'>" + state.bLollipops + " lollipops</span> and get <span style='color:#00fff7'>" + (state.bLollipops * 10) + " stardust</span> in exchange",
		"stardust"
	);
	createGoButton("Thanks!","talk",goMouladin);
	updateState('bStardust', state.bStardust + (state.bLollipops * 10));
	updateState('bLollipops', 0);
}

function checkMouladinUpgrades() {
	var mouladinUpgradeCount = 0;
	for (var i = 0; i < state.bMouladinUpgrades.length; i++) {
		if (state.bMouladinUpgrades[i]) {
			mouladinUpgradeCount++;
		}
	}
	return mouladinUpgradeCount;
}

function goGiveLollipops(amount) {
	changeScene(
		"You give Mouladin your <span style='color:#ff0000'>" + amount + " lollipops.</span></br>He smiles slightly with a soft hum",
		"Lollipop" 
	);
	updateState('bMouladinLollipops', state.bMouladinLollipops + amount);
	updateState('bLollipops', state.bLollipops - amount);
	if (state.bMouladinLollipops >= lolliGoals[state.bMouladinProgress]) {
		createGoButton("You are welcome","talk",goEvolveMouladin);	
	} else {
		createGoButton("You are welcome","talk",goMouladin);	
	}
}

function goEvolveMouladin() {
	var mTexts = [
		"",
		"",
		"Mouladin starts to float around in the air. You seem to have largely underestimated the power of lollipops!",
		"You can feel the energy in the air around Mouladin. You wonder what he will be able to with those powers, except for making lollipops float around him",
		"Mouladin opens his eyes. His immense wisdom is beaming out! It looks pretty funny",
		"",
	];

	changeScene(
		"What? Mouladin is evolving after eating all the <span style='color:#ff0000'>lollipops!</span>",
		mouladinImages[state.bMouladinProgress]
	);
	setTimeout(function(){
		playSound(soundEffect.explosion);
		changeScene(
			"",
			"explosion"
		);
		updateState('bMouladinProgress', state.bMouladinProgress + 1);
	},4000);
	setTimeout(function(){
		updateState('bMouladinLollipops', 0);
		updateState('bMouladinUpgradePoints', state.bMouladinUpgradePoints + 1);
		if (state.bMouladinProgress < 5) {
			changeScene(
				mTexts[state.bMouladinProgress],
				mouladinImages[state.bMouladinProgress]
			);
			createGoButton("Cool!","talk",goMouladin);
		} else {
			changeScene(
				"...",
				"apple"
			);
			setTimeout(function(){
				changeScene(
					"...",
					"appleToWorm"
				);
			},1500);
			setTimeout(function(){
				changeScene(
					"...",
					"appleWorm"
				);
				createGoButton("Hello?","talk",goWelcomeRemouladin);
			},2000);			
		}
	},4500);
}

function goMouladinTalk() {
	var mouladinTalks = [
		"You realize that Mouladin has a strange relationship with time.",
		"Apparently he has already lived a thousand years, but at the same time he was just born quite recently",
		"You have a strong urge to help him on his quest to become a space god. But you are still unclear on what lollipops have to do with that.",
		"You get a feeling that he can help you get more powerful.",
		"You now know that the goal is to think about absolutely nothing. It's actually quite difficult.",
		"You feel that Mouladin is related to many beings throughout the universe. You don't even wonder how",
	];
	changeScene(
		"Mouladin is looking peaceful.</br>" + mouladinTalks[mouladinTalkNr],
		mouladinImages[state.bMouladinProgress]
	);
	createGoButton("Back",mouladinImages[state.bMouladinProgress],goMouladin);
	createGoButton("Interesting","talk",goMouladinTalk);
	mouladinTalkNr++;
	if (mouladinTalkNr == mouladinTalks.length) {
		mouladinTalkNr = 0;
	}
}

function goMouladinUpgrade(upgrade) {

	var mentalPowers = [
		"An extra jerk action every turn",
		"Draw an extra jerk every turn",
		"Beans are twice as powerful",
		"Gnomes are twice as sneaky"
	];

	var mentalPowersImages = [
		"jerkRegular",
		"jerkomancer",
		"beanHuge",
		"tipToesTyler"
	];

	if (upgrade) {

		changeScene(
			"Mouladin wants to share his newly gained mental powers with you. He shows you a menu card of things he can do for you. Which one do you choose?",
			mouladinImages[state.bMouladinProgress]
		);
		createGoButton("Back",mouladinImages[state.bMouladinProgress],goMouladin);
		
		for (var i = 0; i < mentalPowers.length; i++) {
			if (state.bMouladinUpgrades[i] == false) {
				createGoButton(mentalPowers[i],mentalPowersImages[i],goMentalPower,i);
			} else {
				createIconButton(
					mentalPowers[i],
					"https://cdn.jsdelivr.net/gh/polandstick/mgg2@7b2af95dcfaa66cdf12bf44547469c43066f6142/games/planet-life/images/handling/" + mentalPowersImages[i] + ".gif",
					"full" + mentalPowers[i] + "But",
					"",
					"#278227",
					true,
					"buttons",
					goMentalPower,
					i
				);
			}
		}

	} else {

		changeScene(
			"You feel calm in the presence of Mouladin. You reflect upon your powers",
			"burgulon"
		);
		createGoButton("Back",mouladinImages[state.bMouladinProgress],goMouladin);
		
		for (var i = 0; i < mentalPowers.length; i++) {
			if (state.bMouladinUpgrades[i] == true) {
				createGoButton(mentalPowers[i],mentalPowersImages[i],goReviewMentalPower,i);
			} else {
				
				
				
				
				
				
				
				
				
				
				
			}
		}
	}

	var mentalDescriptions = [
		"When you fight against Dereks, you get to an extra jerk action every turn.",
		"When you fight against Dereks, you get to draw an extra jerk every turn.",
		"When you fuel your core with beans, they give you twice as much stardust.",
		"When you go into the Ancient Dungeon, your gnome is twice as sneaky."
	];

	function goMentalPower(nr) {
		changeScene(
			mentalDescriptions[nr] + "</br></br>Do you want Mouladin to grant you this power?",
			mentalPowersImages[nr]
		);
		createGoButton("No","no",goMouladinUpgrade);
		createGoButton("Yes","yes",goMouladinUpgradeConfirm,nr);
	}

	function goMouladinUpgradeConfirm(nr) {
		updateArrayState('bMouladinUpgrades', nr, true);
		updateState('bMouladinUpgradePoints', state.bMouladinUpgradePoints - 1);
		upgradeAnimation("UNLIMITED, POWEEER!",mentalPowersImages[nr],goMouladin);
		if (nr == 0) {
			updateState('bJerkActions', 4);
		}
		if (nr == 1) {
			updateState('bJerksPerTurn', state.bJerksPerTurn + 1);
		}
	}

	function goReviewMentalPower(nr) {
		changeScene(
			mentalDescriptions[nr],
			mentalPowersImages[nr]
		);
		createGoButton("Back","burgulon",goMouladinUpgrade,false);
	}

}

function goWelcomeRemouladin() {
	playSound(soundEffect.worm);
	changeScene(
		"You can tell that, this is not really Mouladin anymore.. There is something new and godly about this worm in an apple.</br>You decide to call him Remouladin. You have a vague feeling like you have met him before, but that can't be. He just got born out of eating all those lollipops",
		"appleWorm",
	);
	createGoButton("You are Remouladin","talk",goNameRemouladin);
}

function goNameRemouladin() {
	changeScene(
		"Remouladin nods in approval. He also hands you a new pair of fashionable planetary sunglasses. You are going to need those if you ever hope to take on the self absorbed sun",
		"appleWorm"
	);
	createGoButton("Thanks!","talk",goMouladin);
}




function goPotato() {
	changeScene(
		"The potato is sitting in the grass. He is imagining <span style='color:#ffc800'>1 gold</span> per second for you. He is almost crying",
		"potato"
	);
	createGoButton("Back","beanieImagination",goBeanieImagination);
	createGoButton("What's the matter?","talk",goPotatoAsk);
}

function goPotatoAsk() {
	changeScene(
		"It seems to be a touchy subject for him. He starts wailing again",
		"potatoCrying"
	);
	createGoButton("There there","talk",goPotato);
}

function goSlopnaxFriend() {
	changeScene(
		"Slopnax is trying to meditate. But somehow wooden logs keep popping out of his ears.</br>He is probably doing it wrong, but you are getting <span style='color:#d0ba91'>3 wood</span> per second",
		"slopnax"
	);
	createGoButton("Back","beanieImagination",goBeanieImagination);
	createGoButton("Talk","talk",goSlopnaxFriendTalk);
}

function goSlopnaxFriendTalk() {
	if (slopnaxTalkCount == 2 && state.bCoco >= 50) {
		updateState('bCoco', state.bCoco - 50);
	} else if (slopnaxTalkCount == 2) {
		slopnaxTalkCount++;
	}
	var slopnaxTalks = [
		"He tells you that he is very happy to finally get a vacation from that stressful pirate life",
		"He is complaining about meditating. Why is it so hard to think of nothing. Thoughts of loot and coco keeps popping into his mind",
		"Slopnax <span style='color:#8b5937'>eats 50 of your coco pops.</span> It is true what they say about pirates. They have no manners!",
		"Slopnax is munching on some coco pops. He shouts WHAT over his unbearable crunching sounds",
		"Slopnax starts to rant and yell about Jack. Apparently he was a terrible boss, and his parties sucked",
		"You try to act like you are Jack, making your voice all deep and silly. Slopnax almost gets a heart attack from the scare you gave him. But then he realizes that it was just you and laughs a roaring laughter",
	];
	changeScene(
		slopnaxTalks[slopnaxTalkCount],
		"slopnax"
	);
	createGoButton("Back","slopnax",goSlopnaxFriend);
	if (slopnaxTalkCount < slopnaxTalks.length - 1) {
		slopnaxTalkCount++;
		createGoButton("Talk some more","talk",goSlopnaxFriendTalk);
	} else {
		slopnaxTalkCount = 0;
	}
}

function goLemonada() {
	changeScene(
		"Lemonada is rolling around in the soft grass. With a relaxed smile he performs a rain dance that makes <span style='color:#8b5937'>6 coco</span> fall from the sky per second",
		"lemonada"
	);
	createGoButton("Back","beanieImagination",goBeanieImagination);
	createGoButton("Talk","talk",goLemonadaTalk);
}

function goLemonadaTalk() {
	var lemonadaTalks = [
		"Lemonada smiles at you. Maybe he is not used to talking. He did spend quite a while with a worm in his mouth after all",
		"Lemonada smiles. He shows you some photos from his past",
		"It turns out that he used to be a lemon shaped planet. He had it all going on for him",
		"He used to hang around near that big space broccoli. It seemed a pretty decent place in the universe",
		"But then it turned out that the broccoli had a major jerk infestation going on, and he caught some of it too",
		"It took several years for some Derekulian mercenaries to clear out the jerks from his lemon dungeons",
		"Then that foul Mayonada trapped him with her evil godly powers. He spent a few millenia serving as a home for her",
	];
	changeScene(
		lemonadaTalks[lemonadaTalkCount],
		"lemonada"
	);
	createGoButton("Back","lemonada",goLemonada);
	if (lemonadaTalkCount < lemonadaTalks.length - 1) {
		lemonadaTalkCount++;
		createGoButton("Stick around","talk",goLemonadaTalk);
	} else {
		lemonadaTalkCount = 0;
	}
}

function goJerkinson() {
	changeScene(
		"Jerkinson is happy to be back in civilization again. He has no clue that he is inside someones imagination",
		"jerkinsonCrusoe"
	);
	createGoButton("Back","beanieImagination",goBeanieImagination);
	if (!state.bJerkinsonRecruited) {
		createGoButton("Ask favor","talk",goRecruitJerkinson);
	}
	createGoButton("Talk","talk",goTalkJerkinson);
}

function goTalkJerkinson() {
	var jerkinsonTalks = [
		"Jerkinson Crusoe is happy to be back in civilization. He doesn't appear to get that he is in somebody elses imagination. There's a casino here after all",
		"He starts to cry. Apparently he lost all his gold to the Derekulian Roulette. Then he starts to shake.. You don't know if it's the memory of the eye in the coffee cup or just too much coffee",
		"Jerkinson finds a <span style='color:#ff0000'>sticky lollipop</span> stuck in his beard. Here, you can have it!",
		"Jerkinson laughs embarrassed when you ask him to explain his sunburn",
		"He shouts at you in a hoarse voice. It must be the trauma from being stuck in a dungeon for too long",
		"Jerkinson tells you that he used to play on a jerk volleyball team",
	];
	changeScene(
		jerkinsonTalks[jerkinsonTalkCount],
		"jerkinsonCrusoe"
	);
	createGoButton("Back","jerkinsonCrusoe",goJerkinson);
	if (jerkinsonTalkCount == 2) {
		updateState('bLollipops', state.bLollipops + 1);
	}
	if (jerkinsonTalkCount < jerkinsonTalks.length - 1) {
		jerkinsonTalkCount++;
		createGoButton("Talk more","talk",goTalkJerkinson);
		if (jerkinsonTalkCount == 2) {
			if (Math.random() > 0.25) {
				jerkinsonTalkCount++;
			}
		}
	} else {
		jerkinsonTalkCount = 0;
	}
}

function goRecruitJerkinson() {
	updateState('bJerkinsonRecruited', true);
	newJerkToPile("Jerkinson Crusoe");
	changeScene(
		"Jerkinson stops you mid sentence. He knows you want him on your team.</br>It doesn't seem like you have a say in the matter. Jerkinson Crusoe joins your jerk squad",
		"jerkinsonCrusoe"
	);
	createGoButton("Well ok","talk",goJerkinson);
}

function goSweatson() {
	if (!state.bPlanetBack) {
		changeScene(
			"Sweatson is making your floor all wet. Good boy!</br>He reminds you of your old planet buddy, and you feel a little sad",
			"sweatson"
		);
	} else {
		changeScene(
			"Sweatson is making your floor all wet. Good boy!</br>He reminds you of your planet buddy, and you feel happy that he is close by again",
			"sweatson"
		);
	}
	createGoButton("Back","beanieImagination",goBeanieImagination);
	createGoButton("Talk","talk",goSweatsonTalk);
	createGoButton("Try to remember","planet",goSweatsonPlanet);
}

function goSweatsonPlanet() {
	changeScene(
		"Sweatson reminds you of how fun it was being a planet. He can take you back there for a while if you want?",
		"sweatson"
	);
	createGoButton("Maybe later","burgulon",goSweatson);
	createGoButton("That would be nice","planet",goBackToPlanet);
}

function goBackToPlanet() {
	changeBackground("BG_FriendHouse");
	updateState('burgulonTime', false);
	goFriend(state.friends[1]);
}

function goSweatsonTalk() {
	var sweatsonTalks = [
		"Sweatson is creating a new lake in Beanies imagination from all his sweat",
		"Sweatson thinks it's funny that you are training jerks to fight Dereks. You remember back when you were a robot and helped train Derek to fight jerks",
		"Sweatson asked why WIFY made you into a planet. And if that was supposed to be a bad thing.. You are still trying to figure out how you feel about this",
		"Sweatson is trying to comfort you. He pretends that you are just as fine as a planet as when you were a robot. You appreciate him lying to make you feel better. It's just not the same being a planet",
		"You throw a ball into orbit. Sweatson gets all sweaty just from thinking about fetching it"
	];
	changeScene(
		sweatsonTalks[sweatsonTalkCount],
		"sweatson"
	);
	createGoButton("Back","sweatson",goSweatson);
	if (sweatsonTalkCount < sweatsonTalks.length - 1) {
		sweatsonTalkCount++;
		createGoButton("Good boy!","talk",goSweatsonTalk);
	} else {
		sweatsonTalkCount = 0;
	}
}

function goAncientDerek() {
	changeScene(
		"The ancient Derek is enjoying the sunshine. He seems to enjoy this last chapter of his life",
		"ancientDerek"
	);
	createGoButton("Back","beanieImagination",goBeanieImagination);
	if (!state.bDoubleRings) {
		createGoButton("Hear secret","talk",goAncientDerekSecret);
	}
	createGoButton("Listen","talk",goAncientDerekTalk);
}

function goAncientDerekSecret() {
	updateState('bDoubleRings', true);
	changeScene(
		"You lean in and hear an ancient Derekulian secret: Dereks keep extra space rings in their socks. Keep that in mind next time you fight a Derek!",
		"ancientDerek"
	);
	createGoButton("Hey thanks!","talk",goAncientDerek);
}

function goAncientDerekTalk() {
	var ancientDerekTalks = [
		"The ancient derek uses a full minute to clear his throat. It's annoying beyond words",
		"He tells you that Derekulians are also just fine with being called Dereks. But back when he was a kid, you had to say Derekulians or people would just think you are talking about THE Derek. But that's a long time ago now",
		"The original Derek was the one that brought the Derekulians to power. There would be no Derekulus X without him",
		"You try to tell him that you know Derek, but he seems to have lost his ability to hear",
		"You ask what happened to Derek since he ended up in a freezer. He just smiles at you and says, yes he would like a Breezer. He prefers the orange taste"
	];
	changeScene(
		ancientDerekTalks[ancientDerekTalkCount],
		"ancientDerek"
	);
	createGoButton("Back","ancientDerek",goAncientDerek);
	if (ancientDerekTalkCount < ancientDerekTalks.length - 1) {
		ancientDerekTalkCount++;
		createGoButton("Stay a while, and listen","talk",goAncientDerekTalk);
	} else {
		ancientDerekTalkCount = 0;
	}
}

</script>  <script src="https://cdn.jsdelivr.net/gh/polandstick/mgg2@7b2af95dcfaa66cdf12bf44547469c43066f6142/games/planet-life/woodenPoker.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/polandstick/mgg2@7b2af95dcfaa66cdf12bf44547469c43066f6142/games/planet-life/ancientPlanet.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/polandstick/mgg2@7b2af95dcfaa66cdf12bf44547469c43066f6142/games/planet-life/stanley.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/polandstick/mgg2@7b2af95dcfaa66cdf12bf44547469c43066f6142/games/planet-life/burgulonCore.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/polandstick/mgg2@7b2af95dcfaa66cdf12bf44547469c43066f6142/games/planet-life/jack.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/polandstick/mgg2@7b2af95dcfaa66cdf12bf44547469c43066f6142/games/planet-life/derekulianManager.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/polandstick/mgg2@7b2af95dcfaa66cdf12bf44547469c43066f6142/games/planet-life/jerkBattle.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/polandstick/mgg2@7b2af95dcfaa66cdf12bf44547469c43066f6142/games/planet-life/jerkManager.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/polandstick/mgg2@7b2af95dcfaa66cdf12bf44547469c43066f6142/games/planet-life/derekSkills.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/polandstick/mgg2@7b2af95dcfaa66cdf12bf44547469c43066f6142/games/planet-life/quizManager.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/polandstick/mgg2@7b2af95dcfaa66cdf12bf44547469c43066f6142/games/planet-life/beanshop.js"></script>
  <script>


function goJerkClub() {
	changeBackground("BG_JerkClub");
	if (state.bJerkStarted) {
		changeScene(
			"To be honest, it's not a nice smell in here. But spirits are high, and the jerks are having a blast",
			"jerkClub",
			"goJerkClub"
		);	
		createGoButton("Back","burgulonSurface",goBurgulonSurface);
		createGoButton("Jerk Squad","jerkSquad",goJerkSquad);
		if (state.bDerekSummoningDevice) {
			createGoButton("Derek Summoning Device","derekSummoningDevice",goDerekSummoningDevice);
		}
		createGoButton("Buy jerk cans","jerkBartender",goBuyJerkCans);
		if (state.bBeanieImaginationUpgrade) {
			createGoButton("Talk to Beanie","beanieBean",goBeanieImagineJerks);
		}
		if (state.bDerekProgress == 1) {
			createGoButton("Derek","derek",goJerkDerek);
		}
		createGoButton("Backstage","jerkClubBackstage",goJerkBackstage);
		if (!state.bDerekSummoningDevice && state.bDerekShipStates[0] > 0) {
			createGoButton("Talk to Bartender","jerkBartender",goSellOven);
		}
		createProduct("Jerk Attack Power");
		createProduct("Jerk Muffin Power");

	} else {
		changeScene(
			"To be honest, it's not a nice smell in here. But spirits are high, and the jerks are having a blast. The bartender looks like he wants a word with you",
			"jerkClub"
		);
		createGoButton("Back","burgulonSurface",goBurgulonSurface);
		createGoButton("Talk to bartender","talk",goBartenderTalk);
	}
}

function goBuyJerkCans() {

	var squadFullText = "";
	if (countJerksInPile() >= 50) {
		squadFullText = "</br><span style='color:#ff0000'>There are 50 jerks in your squad. It's completely packed!! You need to remove some if you want to buy new jerks</span>";
	}

	changeScene(
		"The bartender is selling Canned Jerks.</br>You have <span style='color:#ffc800'>" + state.bSpaceRings + " space rings</span>" + squadFullText,
		"jerkBartender",
		"goBuyJerkCans"
	);
	createGoButton("Back","jerkClub",goJerkClub);

	if (countJerksInPile() < 50) {
		createSingleProduct("Standard Jerk Can (10 space rings)");
	} else {
		createIconButton(
			"Standard Jerk Can (10 space rings)",
			"https://cdn.jsdelivr.net/gh/polandstick/mgg2@7b2af95dcfaa66cdf12bf44547469c43066f6142/games/planet-life/images/handling/canOfJerksRegular.gif",
			"standardCanOfJerksBut",
			"",
			"#8c1d1d",
			true,
			"buttons",
			stardustExchange,
			0
		);	
	}
	if (state.bJerkCanCool) {
		if (countJerksInPile() < 50) {
			createSingleProduct("Cool Jerk Can (100 space rings)");
		} else {
			createIconButton(
				"Cool Jerk Can (100 space rings)",
				"https://cdn.jsdelivr.net/gh/polandstick/mgg2@7b2af95dcfaa66cdf12bf44547469c43066f6142/games/planet-life/images/handling/canOfJerksCool.gif",
				"coolCanOfJerksBut",
				"",
				"#8c1d1d",
				true,
				"buttons",
				stardustExchange,
				0
			);
		}
	} else if (state.bSpaceBen) {
		createProduct("Cool Jerk Cans");
	}
	if (state.bJerkCanFantastic) {
		if (countJerksInPile() < 50) {
			createSingleProduct("Fantastic Jerk Can (800 space rings)");
		} else {
			createIconButton(
				"Fantastic Jerk Can (800 space rings)",
				"https://cdn.jsdelivr.net/gh/polandstick/mgg2@7b2af95dcfaa66cdf12bf44547469c43066f6142/games/planet-life/images/handling/canOfJerksFantastic.gif",
				"fantasticCanOfJerksBut",
				"",
				"#8c1d1d",
				true,
				"buttons",
				stardustExchange,
				0
			);
		}
	} else if (state.bBentProgress > 0) {
		createProduct("Fantastic Jerk Cans");
	}
}

function goBartenderTalk() {
	changeScene(
		"The bartender is acting like he is in an american movie or something. You get really distracted, and forget to listen to what he is saying.</br>Somehow you have ended up with a whole squad of jerks",
		"jerkBartender"
	);
	createGoButton("Wild","talk",goBartenderTalk2);
}

function goBartenderTalk2() {
	updateState('bJerkStarted', true);
	
	newJerkToPile("Regular Jerk");
	newJerkToPile("Regular Jerk");
	newJerkToPile("Regular Jerk");
	newJerkToPile("Regular Jerk");
	newJerkToPile("Regular Jerk");
	newJerkToPile("Regular Jerk");
	
	
	newJerkToPile("Jerk Baker");
	newJerkToPile("Jerk Baker");
	newJerkToPile("Jerk Baker");
	newJerkToPile("Jerk Baker");
	newJerkToPile("Jerk Baker");

	changeScene(
		"The bartender tells you that there is more where that came from, and points at a shelf tucked full with cans. It seems like they are selling canned jerks here.</br>And if you ever need advice on how to use your jerk squad for fighting, you should go talk to the bartender in the backstage room. He doesn't want everyone else to hear his secret jerk wisdom!",
		"canOfJerksRegular"
	);
	createGoButton("Crazy","talk",goBartenderTalk3);
}

function goBartenderTalk3() {
	updateState('bSpaceRings', state.bSpaceRings + 50);
	changeScene(
		"He winks at you.</br>Here's <span style='color:#ffc800'>50 space rings.</span> You need those to buy jerk cans for",
		"spaceRing"
	);
	createGoButton("Thanks!","talk",goJerkClub)
}

function goJerkSquad() {
	playSound(soundEffect.jerkSquad);
	var jp = state.jerkPile;
	changeScene(
		"These are the toughest jerks stardust can buy.</br>They'll protect your shining core from invaders. Or they'll try at least. These are jerks after all.</br>Your <span style='color:#00fff7'>" + countJerksInPile() + "</span> jerks have an <span style='color:#ff0000'>attack power of " + Math.round(state.bJerkAttackPower * 100) + "%</span> and a <span style='color:#fca903'>muffin power of " + Math.round(state.bJerkMuffinPower * 100) + "%</span>",
		"jerkSquad",
		"goJerkSquad"
	);
	createGoButton("Back","jerkClub",goJerkClub);
	for (var i = 0; i < allJerks.length; i++) {
		var x = 0;
		for (var j = 0; j < jp.length; j++) {
			if (!jp[j].removed && allJerks[i].navn == jp[j].navn) {
				x++;
			}
		}
		if (x > 0) {
			createGoButton(x + "x " + allJerks[i].navn, allJerks[i].image, goCheckoutJerk, i);
		}
	}
}

function goCheckoutJerk(nr) {
	
	
	
	
	changeScene(
		allJerks[nr].description,
		allJerks[nr].image
	);
	createGoButton("Back","jerkSquad",goJerkSquad);
	createGoButton("Remove (1) " + allJerks[nr].navn + " (" + state.bRemoveJerkPrice + " stardust)","stardust",goRemoveJerk,nr);
}

function countJerksInPile() {
	var count = 0;
	for (var i = 0; i < state.jerkPile.length; i++) {
		if (!state.jerkPile[i].removed) {
			count++;
		}
	}
	return count;
}

function goRemoveJerk(nr) {
	if (countJerksInPile() > 10) {
		if (state.bStardust >= state.bRemoveJerkPrice) {
			changeScene(
				"Are you sure you want to remove poor " + allJerks[nr].navn + " from your squad?",
				allJerks[nr].image,
			);
			createGoButton("No","no",goJerkClub);
			createGoButton("Yes","yes",goRemoveJerkConfirmed,nr);
		} else {
			changeScene(
				"You <span style='color:#ff0000'>don't have enough stardust</span> to get rid of this jerk",
				allJerks[nr].image
			);
			createGoButton("Back","jerkSquad",goJerkSquad);
		}
	} else {
		changeScene(
			"You need to have <span style='color:#ff0000'>at least 10 jerks in your jerk squad,</span> or they will become terribly lonely",
			"jerkSquad"
		);
		createGoButton("Back","jerkSquad",goJerkSquad);
	}
}

function goRemoveJerkConfirmed(nr) {
	playSound(soundEffect.cry);
	updateState('bStardust', state.bStardust - state.bRemoveJerkPrice);
	if (state.bRemoveJerkPrice < 500) {
		updateState('bRemoveJerkPrice', state.bRemoveJerkPrice + 5);
	}
	var replies = [
		"Poor " + allJerks[nr].navn + " left crying. It's not easy being a jerk",
		allJerks[nr].navn + " realizes what a jerk he has been, and leaves the squad",
		allJerks[nr].navn + " rants about what a jerk you are for taking him off the squad. Ironic",
		allJerks[nr].navn + " apologizes for having been such a jerk. He leaves the squad",
		allJerks[nr].navn + " is relieved to be off the squad. It's super scary getting beaten all the time!"
	];
	changeScene(
		replies[Math.floor(Math.random() * replies.length)],
		allJerks[nr].image
	);
	var jp = state.jerkPile;
	var chosenOne;
	for (var i = 0; i < jp.length; i++) {
		if (!jp[i].removed && jp[i].navn == allJerks[nr].navn) {
			chosenOne = i;
		}
	}
	jp[chosenOne].removed = true;
	if (jp[chosenOne].navn == "Jerkinson Crusoe") {
		updateState('bJerkinsonRecruited', false);
	}
	console.log("removed " + jp[chosenOne].navn);
	updateState('jerkPile', jp);
	createGoButton("Sorry","talk",goJerkSquad);
}

function openCan(rarity) {
	playSound(soundEffect.canOpen);
	var openedJerks;
	pickTwoJerks();
	while (openedJerks[0].navn == openedJerks[1].navn) {
		pickTwoJerks();
	}
	function pickTwoJerks() {
		openedJerks = [allJerks[pickJerkByRarity(rarity)],allJerks[pickJerkByRarity(rarity)]];
	}
	
	changeScene(
		"Two jerks pop out:</br>A <span style='color:#2fde10'>" + openedJerks[0].navn + "</span></br>and a <span style='color:#2fde10'>" + openedJerks[1].navn + "</span></br>Which one do you want on your squad?",
		"jerkBartender"
	);
	createGoButton("I don't want any of these jerks!","no",goBuyJerkCans);
	createGoButton(openedJerks[0].navn + " <span style='color:#ffea00'>(" + openedJerks[0].actionCost + " actions)</span>" + "</br><span style='color:#8a8a8a'>" + openedJerks[0].description + "</span>",openedJerks[0].image,pickAJerk,openedJerks[0],false);
	createGoButton(openedJerks[1].navn + " <span style='color:#ffea00'>(" + openedJerks[1].actionCost + " actions)</span>" + "</br><span style='color:#8a8a8a'>" + openedJerks[1].description + "</span>",openedJerks[1].image,pickAJerk,openedJerks[1],false);
}	

function pickAJerk(jerk,beanie) {
	newJerkToPile(jerk.navn);
	changeScene(
		"You get a new " + jerk.navn + " on your squad!",
		jerk.image
	);
	if (beanie) {
		createGoButton("What a jerk!",jerk.image,goBeanieImagineJerks);
	} else {
		createGoButton("What a jerk!",jerk.image,goBuyJerkCans);
	}
}

function goJerkBackstage() {
	playSound(soundEffect.technoLow);
	changeScene(
		"It is very untidy back here!",
		"jerkClubBackstage"
	);
	createGoButton("Back","jerkClub",goJerkClub);
	createGoButton("Chat with bartender","jerkBartender",goBartenderChat);
	if (state.bFriendBananaMan) {
		createGoButton("Banana Man","bananaMan",goVisitBananaman);
	}
	if (state.bFriendJerkWiseman) {
		createGoButton("Wise Man","jerkWiseMan",goVisitWiseman);
	}
	if (state.bFriendBrokenRobot) {
		createGoButton("Broken Robot","brokenRobot",goVisitBrokenRobot);
	}
}

function goBartenderChat() {
	var bartenderTalks = [
		"The bartender leans in and whispers some jerk wisdom to you. Your jerk squad is great for fighting Derekulians and other threats out in space",
		"Fighting happens in rounds. Every round you need to spend your <span style='color:#ffea00'>jerk actions</span> to use your jerks against the enemy",
		"Every round you draw 4 random jerks from your pile of jerks",
		"The <span style='color:#00fff7'>stardust in your core</span> is very important when fighting. Your enemies will try to suck it out of you every round, and when you are all out of stardust, you are done!",
		"But your enemies are easy to distract. If you make your jerks bake some <span style='color:#fca903'>muffins</span>, they will eat those before they touch your stardust",
		"When you defeat your enemies you should steal all the <span style='color:#ffc800'>space rings.</span> You can use those to buy new jerk cans",
		"Jerk cans have some way better jerks than those basics jerks in your squad, you should definitely buy some jerk cans!",
		"Also, remember to upgrade your jerks Attack Power and Muffin Power. That's a great way to make your squad more powerful!",
		"The bartender looks exhausted. That was a lot of wisdom in one go. He needs to take a rest"
	];
	changeScene(
		bartenderTalks[bartenderTalkCount],
		"jerkBartender"
	);
	createGoButton("Back","jerkClubBackstage",goJerkBackstage);
	if (bartenderTalkCount < bartenderTalks.length - 1) {
		bartenderTalkCount++;
		createGoButton("Tell me more","talk",goBartenderChat);
	} else {
		bartenderTalkCount = 0;
	}
}

function goVisitBananaman() {
	changeScene(
		"The Banana Man is taking a breather. He is eating a banana.</br>He promises to get back out there in a minute and make you the usual <span style='color:#ffc800'>1 gold/sec</span>",
		"bananaMan"
	);
	createGoButton("Back","jerkClub",goJerkClub);
	createGoButton("Talk","talk",goTalkBananaman);
}

function goTalkBananaman() {
	var bananaTalks = [
		"Banana Man offers you a banana, but you are a planet",
		"You ask him if he has any super powers. He snaps his fingers and pulls out a banana from his costume. You wonder where he gets all his bananas from",
		"He shows you the banana dance. It must be incredibly hard to perform those moves while in a banana costume, but it seems like second nature to him. This guy has talent after all",
		"You ask him about his time with the Derekulians. He looks pale.</br>Apparently they would use him to throw at each other as a prank. Sounds pretty mean",
	];
	changeScene(
		bananaTalks[bananaTalkCount],
		"bananaMan"
	);
	createGoButton("Back","bananaMan",goVisitBananaman);
	if (bananaTalkCount < bananaTalks.length - 1) {
		bananaTalkCount++;
		createGoButton("Hang around","talk",goTalkBananaman);
	} else {
		bananaTalkCount = 0;
	}
}

function goVisitWiseman() {
	changeScene(
		"The wiseman is taking a dirt nap. Just to give you a picture, that means that he has fallen asleep in an ashtray, and that his snoring is creating little clouds of ash.</br>You have a little giggle. He is going to go back to earning you <span style='color:#8b5937'>3 coco/sec</span> in a little while",
		"jerkWiseMan"
	);
	createGoButton("Back","jerkClub",goJerkClub);
	createGoButton("Talk","talk",goWisemanTalk);
}

function goWisemanTalk() {
	var wisemanTalks = [
		"He gets ready to dish out some wisdom: A turd in your pocket is better than two fingers in an electrical socket",
		"Here comes some more wisdom: When life gives you apples, you know it's a great day",
		"Ok, wisdom time: There is no such thing as free coco pops, unless you don't have to pay for them",
		"Had enough? Wisdom: Eat your vegetables or they might turn into galactic empires",
		"More wisdom: Never talk with your mouth full, or you will get kicked in the nuts by a bull",
	];
	changeScene(
		wisemanTalks[wisemanTalkCount],
		"jerkWiseMan"
	);
	createGoButton("Back","jerkWiseMan",goVisitWiseman);
	if (wisemanTalkCount < wisemanTalks.length - 1) {
		wisemanTalkCount++;
		createGoButton("Endure more wisdom","talk",goWisemanTalk);
	} else {
		wisemanTalkCount = 0;
	}
}

function goVisitBrokenRobot() {
	changeScene(
		"The robot is trying to look happy. It makes you <span style='color:#d0ba91'>6 wood/sec</span> from all the dust and dirt in the club",
		"brokenRobot"
	);
	createGoButton("Back","jerkClub",goJerkClub);
	createGoButton("Talk","talk",goBrokenRobotTalk);
}

function goBrokenRobotTalk() {
	var brokenRobotTalks = [
		"You ask the broken robot where it comes from. It looks sad, and says the Derekulians abused most of its memory space for storing funny fart videos. Now there are only vague memories of a life on another planet",
		"It shows you some pictures of a very tall city. It tells you that it is the capital city on its home planet",
		"It tells you that it was created in a place where there were other robots. There was a very friendly AI, that ran the place. Those were good times",
		"It asks you how you became a robot planet. You explain that it's quite a long story",
		"It tells you that it is happy to live here. It's nice to have a fellow robot in this crazy universe"
	];
	changeScene(
		brokenRobotTalks[brokenRobotTalkCount],
		"brokenRobot"
	);
	createGoButton("Back","brokenRobot",goVisitBrokenRobot);
	if (brokenRobotTalkCount < brokenRobotTalks.length - 1) {
		brokenRobotTalkCount++;
		createGoButton("Talk some more","talk",goBrokenRobotTalk);
	} else {
		brokenRobotTalkCount = 0;
	}
}

function goJerkDerek() {
	changeScene(
		"Derek is not being comfortable around all those jerks. The jerks are also keeping their distance.. What's going on here?</br>Some of the jerks bake Derek some muffins. It helps on the overall situation",
		"derek"
	);
	createGoButton("What's the plan Derek?","talk",goJerkDerek2);
}



function goJerkDerek2() {
	changeScene(
		"Derek yells. He hands you a paper, and explains to you that it's from your old planet friend.</br>The paper has a secret formula for special coco infused stardust. It's supposed to be highly explosive when combined with certain elements found inside of a sun",
		"cocoStardustFormula",
		"goDerekFormula"
	);
	createGoButton("Back","jerkClub",goJerkClub);
	createGoButton("How's the planet doing?","talk",goDerekTalkPlanet);
	createProduct("Coco Infused Stardust");
}

function goDerekTalkPlanet() {
	changeScene(
		"Derek yells out the warmest regards from the planet. He misses you though!</br>If only you could see each other again",
		"derek"
	);
	createGoButton("*Sigh*","talk",goJerkDerek2);
}




function goDerekSummoningDevice() {
	bossBattle = "randomDerek";
	changeScene(
		"The oven/summoning device is ready to go. Pay the technician/baker some gold to get going.</br>Here's a little tip the amount of muffins you bake equals the level of Derek you summon",
		"derekSummoningDevice",
		"goDerekSummoningDevice"
	);
	createGoButton("Back","jerkClub",goJerkClub);
	for (var i = 0; i < muffinValues.length; i++) {
		createSingleProduct("Bake " + muffinValues[i] + " muffins (" + muffinValues[i] + " gold)");
	}
}

function bakeADerek(nr) {
	var derekNr = Math.floor(Math.random() * allDereks.length);
	pickADerek(allDereks[derekNr].navn,muffinValues[nr]);
}

function goSellOven() {
	changeScene(
		"The Bartender pulls you over. He hears that you have started fighting the Derekulians, and he is pretty excited about that. In fact he would like to help you out.</br>You know that Dereks like muffins.. He has come up with a device to summon Dereks for you to train your jerks against. He just needs a bit of funding to complete the project",
		"jerkBartender",
		"goSellOven"
	);
	createGoButton("Back","jerkClub",goJerkClub);
	createProduct("Derek Summoning Device");
}

</script>  <script>

function goStartMenu() {

	if (hasBridge() && state.tGamesCompleted < 1) {
		goFirstStartMenu();
	} else {
		goStartChapter1();
	}

}

function goFirstStartMenu() {
	var call = BridgeCommander.call("loadProducts");
	call.then(function(value) {
		var json = JSON.parse(value);

		var chapter2IAP = json.filter(p => p.identifier === "broccoliWorldUnlock")[0];
		var chapter3IAP = json.filter(p => p.identifier === "chapter3Unlock")[0];
		var chapter2and3IAP = json.filter(p => p.identifier === "unlockChapter2and3")[0];

		changeScene(
			"</br></br>Welcome to <span style='color:#16fa05'>PLANET LIFE!</span></br></br>Let's get started",
			"PlanetLifeTitle",
			"goStartMenu"
		);
		createMenuButton(
			"<span style='color:#16fa05'>Chapter 1</span>",
			"chapter1",
			"- More than 2 hours free of gameplay</br>- New friends to meet</br>- Dungeons to explore</br>- An endless dungeon",
			goStartChapter1,
			"planet1Button",
			"Play (free)"
		);

		createChapter2Button(chapter2IAP);
		createChapter3Button(chapter3IAP);
		createBothChaptersButton(chapter2and3IAP);
		createRestorePurchases(goFirstStartMenu);

		createGoButton("Tell me more about this game","bobBottle",goExplainGame);
	});
}

function createChapter2Button(chapter2IAP) {
	var buttonText = "Error";
	if (chapter2IAP) {
		buttonText = !state.purchasedChapter2 ? "Unlock (" + chapter2IAP.localPrice + ")" : "Play (Purchased)";
	}

	createMenuButton(
		"<span style='color:#ffea00'>Chapter 2</span>",
		"chapter2",
		"- More than 4 hours of new gameplay</br>- More dungeons</br>- More endless dungeons</br>- New friends and characters to meet</br>- A vicious quiz",
		buyChapter2,
		"planet2Button",
		buttonText
	);
}

function createChapter3Button(chapter3IAP) {
	var buttonText = "Error";
	if (chapter3IAP) {
		buttonText = !state.purchasedChapter3 ? "Unlock (" + chapter3IAP.localPrice + ")" : "Play (Purchased)";	
	}

	createMenuButton(
		"<span style='color:#00fff7'>Chapter 3</span>",
		"chapter3",
		"- More than 8 hours of new gameplay</br>- Deckbuilding!</br>- A new kind of dungeon</br>- A lot more friends</br>- New characters to meet</br>- Boss fights</br>- A proper ending to the space adventure",
		buyChapter3,
		"planet3Button",
		buttonText
	);
}

function createBothChaptersButton(chapter2and3IAP) {
	var buttonText = "Error";
	if (chapter2and3IAP) {
		if (state.purchasedChapter2 && state.purchasedChapter3) {
			buttonText = "Play (Purchased)"
		} else {
			buttonText = "Unlock (" + chapter2and3IAP.localPrice + ")";
		}	
	}

	createMenuButton(
		"Chapter <span style='color:#ffea00'>2</span> + <span style='color:#00fff7'>3</span>",
		"chapterAll",
		"- More than 12 hours of new gameplay</br>- Everything from chapter 2 & 3",
		buyBothChapters,
		"planetAllButton",
		buttonText
	);
}

function createRestorePurchases(onRestore) {
	createGoButton("Restore purchases","gold",function(){
		var call = BridgeCommander.call('restorePurchases');
		call.then(function(productIds) {
			var hasChapter2 = productIds.indexOf('broccoliWorldUnlock') !== -1;
			var hasChapter3 = productIds.indexOf('chapter3Unlock') !== -1;
			var hasBothChapters = productIds.indexOf('unlockChapter2and3') !== -1;
			updateState('purchasedChapter2', hasChapter2 || hasBothChapters);
			updateState('purchasedChapter3', hasChapter3 || hasBothChapters);
			onRestore();
		});
	});
}

function goExplainGame() {
	changeScene(
		"This is Bob the Bottle. You will meet him later in the game.</br></br>He explains to you that Planet Life is consisting of 3 chapters.</br> Chapter 1 is a <span style='color:#16fa05'>free demo.</span> After that you will have to pay to unlock the next two chapters.</br> But <span style='color:#ffea00'>Chapter 2</span> is even bigger than Chapter 1 and quite exciting. And then <span style='color:#00fff7'>Chapter 3</span> is the biggest of them all, and where things really starts to heat up",
		"bobBottle"
	);
	createGoButton("Back","PlanetLifeTitle",goStartMenu);
	createGoButton("Tell me more","talk",goExplainGame2);
}

function goExplainGame2() {
	playSound(soundEffect.worm);
	changeScene(
		"In Planet Life you are on an journey through the universe, experiencing all sorts of crazy adventures",
		"appleWormhole"
	);
	createGoButton("Back","PlanetLifeTitle",goStartMenu);
	createGoButton("Tell me more","talk",goExplainGame3);
}

function goExplainGame3() {
	playSound(soundEffect.hi);
	changeScene(
		"You will get a lot of new friends along the way",
		"bananaMan"
	);
	createGoButton("Back","PlanetLifeTitle",goStartMenu);
	createGoButton("Tell me more","talk",goExplainGame4);
}

function goExplainGame4() {
	playSound(soundEffect.stanley);
	changeScene(
		"Even meet the stars of the universe",
		"stanley"
	);
	createGoButton("Back","PlanetLifeTitle",goStartMenu);
	createGoButton("Tell me more","talk",goExplainGame5);
}

function goExplainGame5() {
	changeScene(
		"You will need to gather a lot of resources to become a better planet",
		"woodSynthesizer"
	);
	createGoButton("Back","PlanetLifeTitle",goStartMenu);
	createGoButton("Tell me more","talk",goExplainGame6);
}

function goExplainGame6() {
	playSound(soundEffect.beating);
	changeScene(
		"And you need to be the best planet you can be, if you ever hope to beat all of the jerks infesting the dungeons inside yourself",
		"dungeonBeating"
	);
	createGoButton("Back","PlanetLifeTitle",goStartMenu);
	createGoButton("Tell me more","talk",goExplainGame7);
}

function goExplainGame7() {
	changeScene(
		"The universe is a crazy place, full of unexptected things",
		"universe"
	);
	createGoButton("Back","PlanetLifeTitle",goStartMenu);
	createGoButton("Tell me more","talk",goExplainGame8);
}

function goExplainGame8() {
	changeScene(
		"Like this broccoli..",
		"spaceBroccoli"
	);
	createGoButton("Back","PlanetLifeTitle",goStartMenu);
	createGoButton("Tell me more","talk",goExplainGame9);
}

function goExplainGame9() {
	changeScene(
		"With a whole world on it!",
		"spaceBroccoliClose"
	);
	createGoButton("Back","PlanetLifeTitle",goStartMenu);
	createGoButton("Tell me more","talk",goExplainGame10);
}

function goExplainGame10() {
	changeScene(
		"Or this intergalactic mailman..",
		"intergalacticMailman"
	);
	createGoButton("Back","PlanetLifeTitle",goStartMenu);
	createGoButton("Tell me more","talk",goExplainGame11);
}

function goExplainGame11() {
	playSound(soundEffect.cheer);
	changeScene(
		"Breakdancing!",
		"intergalacticMailmanBreakdance"
	);
	createGoButton("Back","PlanetLifeTitle",goStartMenu);
	createGoButton("Tell me more","talk",goExplainGame12);
}

function goExplainGame12() {
	changeScene(
		"There are other planets to befriend",
		"beanie"
	);
	createGoButton("Back","PlanetLifeTitle",goStartMenu);
	createGoButton("Tell me more","talk",goExplainGame13);
}

function goExplainGame13() {
	changeScene(
		"And even this cup of coffee..",
		"coffeeCup"
	);
	createGoButton("Back","PlanetLifeTitle",goStartMenu);
	createGoButton("Tell me more","talk",goExplainGame14);
}

function goExplainGame14() {
	playSound(soundEffect.shock);
	changeScene(
		"With somebody's eye in it!",
		"coffeeCupEye"
	);
	createGoButton("Back","PlanetLifeTitle",goStartMenu);
	createGoButton("Tell me more","talk",goExplainGame15);
}

function goExplainGame15() {
	changeScene(
		"Now go play the game!",
		"bobBottle"
	);
	createGoButton("Back","PlanetLifeTitle",goStartMenu);
	createGoButton("OK!","talk",goStartMenu);
}

function goStartChapter1() {
	if (state.impatientMode) {
		delay = 1;
	} else {
		delay = 10;
	}
	skipAllowed = true;
	toggleResIcons();
	goRoot();
}

function goStartMenu2() {
	var call = BridgeCommander.call("loadProducts");
	call.then(function(value) {
		var json = JSON.parse(value);

		var chapter2IAP = json.filter(p => p.identifier === "broccoliWorldUnlock")[0];
		var chapter3IAP = json.filter(p => p.identifier === "chapter3Unlock")[0];
		var chapter2and3IAP = json.filter(p => p.identifier === "unlockChapter2and3")[0];

		changeScene(
			"",
			"PlanetLifeTitle",
			"goStartMenu"
		);

		createIconButton(
			"Chapter 1 (completed)",
			"https://cdn.jsdelivr.net/gh/polandstick/mgg2@7b2af95dcfaa66cdf12bf44547469c43066f6142/games/planet-life/images/handling/planet.gif",
			"chapter23but",
			"",
			"#9e9e9e",
			true,
			"buttons",
			stardustExchange,
			0
		);

		createChapter2Button(chapter2IAP);
		createChapter3Button(chapter3IAP);
		createBothChaptersButton(chapter2and3IAP);
		createRestorePurchases(goStartMenu2);

		createGoButton("What do I get for my money?","talk",goTeaseGame);
		createGoButton("Go back to free solar system","planet",goRoot);
	});
}

function goTeaseGame() {
	changeScene(
		"Bob the Bottle is ready to show you what is in store for you",
		"bobBottle"
	);
	createGoButton("Back","PlanetLifeTitle",goStartMenu2);
	createGoButton("Show me Bob","talk",goTeaseGame2);
}

function goTeaseGame2() {
	changeScene(
		"Here are some things you will see in <span style='color:#ffea00'>Chapter 2</span>",
		"bobBottle"
	);
	createGoButton("Oh yeah?","talk",goNotPay4);
}

function goNotPay4() {
	playSound(soundEffect.vomit);
	changeScene(
		"A vomitting purple monster",
		"lochJuiceVomit"
	);
	createGoButton("Really?","talk",goNotPay5);
}

function goNotPay5() {
	playSound(soundEffect.burger);
	changeScene(
		"Something crazy happening to Burger",
		"burger"
	);
	setTimeout(function() {
		changeScene(
			"Something crazy happening to Burger",
			"burg3r"
		);
	},1300);
	setTimeout(function() {
		changeScene(
			"Something crazy happening to Burger",
			"burger"
		);
		createGoButton("But what is it!?","talk",goTeaseDungeons);
	},1500);
}

function goTeaseDungeons() {
	playSound(soundEffect.beating);
	changeScene(
		"More dungeons!",
		"cocoDungeonBeating"
	);
	createGoButton("!","talk",goTeaseDungeons2);
}

function goTeaseDungeons2() {
	playSound(soundEffect.ghost);
	changeScene(
		"GHOSTS!",
		"ghost"
	);
	createGoButton("!!!","talk",goNotPay6);
}

function goNotPay6() {
	changeScene(
		"And...",
		"invisibleImg"
	);
	createGoButton("And?","talk",goNotPay7);
}

function goNotPay7() {
	changeScene(
		"THIS PENGUIN!!!",
		"cocoPenguin"
	);
	createGoButton("What, REALLY!?","talk",goTeaseLastChapter);
}

function goTeaseLastChapter() {
	changeScene(
		"And that's just a few of the things you'll see in <span style='color:#ffea00'>Chapter 2.</span>",
		"bobBottle"
	);
	createGoButton("What about Chapter 3?","talk",goTeaseLastChapter2);
}

function goTeaseLastChapter2() {
	changeScene(
		"<span style='color:#00fff7'>Chapter 3</span> is huge!",
		"bobBottle"
	);
	createGoButton("Oh yeah?","talk",goTeaseLastChapter3);
}

function goTeaseLastChapter3() {
	changeScene(
		"You'll get to sneak through dungeons",
		"catPawsCalvin"
	);
	createGoButton("Uuh","talk",goTeaseLastChapter4);
}

function goTeaseLastChapter4() {
	changeScene(
		"Meet strange new Dereks",
		"derekFootball"
	);
	createGoButton("New Dereks?","talk",goTeaseLastChapter5);
}

function goTeaseLastChapter5() {
	changeScene(
		"Fight gigantic bosses!",
		"bentBoss"
	);
	createGoButton("Is that a moon?","talk",goTeaseLastChapter6);
}

function goTeaseLastChapter6() {
	changeScene(
		"Buy canned jerks from this fine fellow",
		"jerkBartender"
	);
	createGoButton("Jerks?","talk",goTeaseLastChapter7);
}

function goTeaseLastChapter7() {
	changeScene(
		"Go to the casino",
		"casino"
	);
	createGoButton("Gambling!","talk",goTeaseLastChapter8);
}

function goTeaseLastChapter8() {
	changeScene(
		"And even enter somebody's imagination",
		"beanieImagination"
	);
	createGoButton("Really?","talk",goTeaseLastChapter9);
}

function goTeaseLastChapter9() {
	changeScene(
		"And that's only just a few of the things that are going to happen.</br>But I recommend that you go check it out yourself",
		"bobBottle"
	);
	if (state.broccoliChapter) {
		createGoButton("Wow","talk",goStartMenu3);
	} else {
		createGoButton("Wow","talk",goStartMenu2);
	}
}


function goStartMenu3() {
	var call = BridgeCommander.call("loadProducts");
	call.then(function(value) {
		var json = JSON.parse(value);

		var chapter3IAP = json.filter(p => p.identifier === "chapter3Unlock")[0];

		changeScene(
			"",
			"PlanetLifeTitle",
			"goStartMenu"
		);
		createIconButton(
			"Chapter 1 (completed)",
			"https://cdn.jsdelivr.net/gh/polandstick/mgg2@7b2af95dcfaa66cdf12bf44547469c43066f6142/games/planet-life/images/handling/planet.gif",
			"chapter23but",
			"",
			"#9e9e9e",
			true,
			"buttons",
			stardustExchange,
			0
		);
		createIconButton(
			"Chapter 2 (completed)",
			"https://cdn.jsdelivr.net/gh/polandstick/mgg2@7b2af95dcfaa66cdf12bf44547469c43066f6142/games/planet-life/images/handling/spaceBroccoli.gif",
			"chapter23242but",
			"",
			"#9e9e9e",
			true,
			"buttons",
			stardustExchange,
			0
		);

		createChapter3Button(chapter3IAP);
		createRestorePurchases(goStartMenu3);

		createGoButton("What do I get for my money?","talk",goTeaseLastChapter2);
		createGoButton("Go back to the Broccoli Empire","spaceBroccoli",goRoot);
	});
}


function goThanksForPaying(nextFunction) {
	changeScene(
		"Wow!</br>Thanks a bunch for your support.</br>You are an amazing person, and everyone is happy to have you around. Especially Derek. He wouldn't have a clue what to do without you really",
		"bobBottle"
	);
	createGoButton("Yay!","talk",nextFunction);
}

function goProblemPaying() {
	changeScene(
		"Oh no!</br>Looks like there was a problem with paying for the chapter.</br>Get in touch with christian@northplay.co for help",
		"bobBottle"
	);
	if (state.burgulonCreated) {
		createGoButton("Oh no","talk",goStartMenu3);
	} else {
		createGoButton("Oh no","talk",goStartMenu2);
	}

}


</script>  <script src="https://cdn.jsdelivr.net/gh/polandstick/mgg2@7b2af95dcfaa66cdf12bf44547469c43066f6142/games/planet-life/productManagerNew.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/polandstick/mgg2@7b2af95dcfaa66cdf12bf44547469c43066f6142/games/planet-life/dungeonManager.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/polandstick/mgg2@7b2af95dcfaa66cdf12bf44547469c43066f6142/games/planet-life/globalVars.js"></script>
<script>



var myVar = setInterval(sekund, 1000);

function sekund() {
	if (isGamePaused === true) {
		return;
	}

	draw();

	if (!state.broccoliChapter) {
		oldPriceCheck();
	}

	if (!state.burgulonTime) {
		updateState("wood", state.wood + state.woodPS);
		updateState("coco", state.coco + state.cocoPS);
		if (state.burgerDoing == "gold") {
			if (Math.random() < state.goldChance) {
				updateState("gold", state.gold + state.goldPS);
			} else if (state.goldPS > 1) {
				updateState("gold", state.gold + (state.goldPS - 1));
			}
		} else {
			updateState("gold", state.gold + state.goldPS);
		}
	} else {
		updateState("bWood", state.bWood + state.bWoodPS);
		updateState("bGold", state.bGold + state.bGoldPS);
		updateState("bCoco", state.bCoco + state.bCocoPS);
	}

	if (state.tTerrariumFound) {
		if (state.tWood < state.tWoodCapacity) {
			updateState('tWood', state.tWood + state.tWoodPS);
			if (state.tWood > state.tWoodCapacity) {
				updateState('tWood', state.tWoodCapacity);
			}
		}
		if (state.tGoldPS < state.tGoldCapacity) {
			updateState('tGold', state.tGold + state.tGoldPS);
			if (state.tGold > state.tGoldCapacity) {
				updateState('tGold', state.tGoldCapacity);
			}
		}
		if (state.tCoco < state.tCocoCapacity) {
			updateState('tCoco', state.tCoco + state.tCocoPS);
			if (state.tCoco > state.tCocoCapacity) {
				updateState('tCoco', state.tCocoCapacity);
			}
		}
	}

	if (place == "spaceBen") {
		for (var i = 0; i < state.shopPrices.length; i++) {
			if (i == 4 && state.starmapNr < 3) {
				buttonDisableCheck(state.shopPrices[i][state.starmapNr],state.shopPrices[i][state.starmapNr][4]);
			} else if (state.shopPrices[i][5]) {
				buttonDisableCheck(state.shopPrices[i],state.shopPrices[i][4]);
			}
		}
	}

	if (place == "goDungeon" || place == "goPickDungeon") {
		if (state.derekHealth < state.derekMaxHealth) {
			buttonDisableCheck([0,0,(state.derekMaxHealth - state.derekHealth),0],"healDerekBut");
		}
	}

	if (!state.slotmachinePrice[4] && place == "workshop") {
		buttonDisableCheck(state.slotmachinePrice,"slotmachineBut");
	}

	if (place == "goCocoDungeons") {
		if (state.derekHealth < state.derekMaxHealth) {
			buttonDisableCheck([0,0,(state.derekMaxHealth - state.derekHealth),0],"healDerekBut2");
		}
	}

	if (place == "goMonsterDungeon") {
		if (state.derekHealth < state.derekMaxHealth) {
			buttonDisableCheck([0,0,(state.derekMaxHealth - state.derekHealth),0],"healDerekBut3");
		}
	}

	if (place == "goSpaceDungeon") {
		if (state.derekHealth < state.derekMaxHealth) {
			buttonDisableCheck([0,0,(state.derekMaxHealth - state.derekHealth),0],"healDerekBut4");
		}
	}

	if (place == "slotmachine") {
		buttonDisableCheck(playSmallPrice,"playSmallBut");
		buttonDisableCheck(playMediumPrice,"playMediumBut");
		buttonDisableCheck(playBigPrice,"playBigBut");
	}

	if (place == "planetudTrade") {
		if (pBuying != 0) {
			buttonDisableCheck([state.planetudPrices[pBuying][0],0,0,0],"exchangeWoodBut");
		}
		if (pBuying != 1) {
			buttonDisableCheck([0,state.planetudPrices[pBuying][1],0,0],"exchangeGoldBut");
		}
		if (pBuying != 2) {
			buttonDisableCheck([0,0,state.planetudPrices[pBuying][2],0],"exchangeCocoBut");
		}
	}

	if (place == "goPlanetudSellStardust") {
		buttonDisableCheck([0,0,0,10],"woodStardustBut");
		buttonDisableCheck([0,0,0,10],"goldStardustBut");
		buttonDisableCheck([0,0,0,10],"cocoStardustBut");
	}

	if (!state.friendHousePrice[4] && place == "workshop") {
		buttonDisableCheck(state.friendHousePrice,"buildFriendHouseBut");
	}

	
	
	

	

	for (var i = 0; i < allProducts.length; i++) {
		if (place == allProducts[i].place) {
			for (var j = 0; j < allProductTiers.length; j++) {
				if (allProductTiers[j].ID == allProducts[i].ID && allProductTiers[j].tierNr == state.productStates[i] + 1) {
					for (var k = 0; k < curButtons.length; k++) {
						if (curButtons[k] == "full" + allProducts[i].ID) {
							if (allProductTiers[j].burgulon) {
								buttonDisableCheck(allProductTiers[j].price,allProducts[i].ID,true);
							} else {
								buttonDisableCheck(allProductTiers[j].price,allProducts[i].ID);
							}
						}
					}
				}
			}
		}
	}

	

	for (var i = 0; i < allSingleProducts.length; i++) {
		if (place == allSingleProducts[i].place) {
			for (var j = 0; j < curButtons.length; j++) {
				if (curButtons[j] == allSingleProducts[i].ID) {
					buttonSmallDisableCheck(
						allSingleProducts[i].currency,
 						allSingleProducts[i].price,
	 					allSingleProducts[i].ID
	 				);
				}
			}
		}
	}

	
	if (state.ghostTradeFound) {
		ghostTradeTick++;
		if (ghostTradeTick >= 15) {
			calculateGhostPrice();
		}
	}

	if (place == "goGhostTrade") {
		buttonSmallDisableCheck("ghosts",1,"sellGhostBut");
		if (state.ghosts > 1) {
			buttonSmallDisableCheck("ghosts",1,"sellMultipleGhostsBut");	
		}
		buttonSmallDisableCheck("stardust",state.ghostPrice,"buyGhostBut");
		if (state.stardust >= (state.ghostPrice * 2)) {
			buttonSmallDisableCheck("stardust",state.ghostPrice,"buyMultipleGhostsBut");
		}
	}

	
	if (state.bStanley && place != "goStanley") {
		if (state.bStanleyStardust < 30) {
			if (stanleyTick > 5) {
				updateState('bStanleyStardust', state.bStanleyStardust + 1);
				stanleyTick = 0;
			}
			stanleyTick++;
		}
	}

	
	if (state.bSpaceBarCoco > 0) {
		if (spaceBarTick >= 10) {
			
			updateState('bSpaceBarGold', state.bSpaceBarGold + (Math.round(state.bSpaceBarRate * (state.bSpaceBarCoco / 500)) + 1));
			spaceBarTick = 0;
		}
		updateState('bSpaceBarCoco', state.bSpaceBarCoco - (Math.round(state.bSpaceBarCoco / 500) + 1));
		
		spaceBarTick++;
	}


	
	if (place == "goWoodshroom") {
		timeButtonDisableCheck("Nurture WoodshroomBut",1);
		timeButtonDisableCheck("Deepen Wood BucketBut",1);
	}

	if (place == "goGoldFlower") {
		timeButtonDisableCheck("Nurture Gold FlowerBut",2);
		timeButtonDisableCheck("Deepen Gold BucketBut",1);
	}

	if (place == "goCocoPotato") {
		timeButtonDisableCheck("Nurture Coco PotatoBut",1);
		timeButtonDisableCheck("Deepen Coco BucketBut",1);
	}

	if (place == "goTimeClub" && state.tClubSlots < 6) {
		timeButtonDisableCheck("Additional Jerk SlotBut",state.tClubSlots);
	}

	if (place == "goTimeCloset" && state.tClosetSlots < 3) {
		timeButtonDisableCheck("Additional Item SlotBut",(state.tClosetSlots * 4));
	}

	

	if (place == "goDerekHub") {
		if (calculateEmptyPotionSlots() > 0) {
			buttonSmallDisableCheck("gold",(calculateEmptyPotionSlots() * 25),"fillPotionBeltBut");
		}
	}

}

function oldPriceCheck() {
	if (!state.workshopPrice[4] && place == "surface") {
		buttonDisableCheck(state.workshopPrice,"workshopBut");
	}

	if (state.cocoPopsAsteroid && place == "asteroid_st") {
		if (!state.strawPrice[4]) {
			buttonDisableCheck(state.strawPrice,"strawBut");
		} else if (state.strawNr < strawPrices.length) {
			buttonDisableCheck(strawPrices[state.strawNr],"upgradeStrawBut");
		}
	}

	if (place == "workshop" && state.axeNr < axes.length) {
		buttonDisableCheck(axes[state.axeNr],"upgradeAxeBut");
	}

	if (place == "workshop" && state.drillNr < drills.length) {
		buttonDisableCheck(drills[state.drillNr],"upgradeDrillBut");
	}
}

function draw() {
	if (!state.burgulonTime) {
		

		document.getElementById("wood").innerHTML = countToKString(state.wood);
		document.getElementById("gold").innerHTML = countToKString(state.gold);
		document.getElementById("coco").innerHTML = countToKString(state.coco);
		document.getElementById("stardust").innerHTML = countToKString(state.stardust);
		document.getElementById("woodSec").innerHTML = "+" + state.woodPS + "/s";
		document.getElementById("goldSec").innerHTML = "+" + state.goldPS + "/s";
		document.getElementById("cocoSec").innerHTML = "+" + state.cocoPS + "/s";
		document.getElementById("ringCounter").style.display = "none";
		if (state.cocoDungeonsFound) {
			document.getElementById("ghostCounter").style.display = "inline";
			document.getElementById("ghostCount").innerHTML = state.ghosts;
		} else {
			document.getElementById("ghostCounter").style.display = "none";
		}
	} else {
		if (state.bLollipops > 0) {
			document.getElementById("ringCounter").style.display = "inline";
			document.getElementById("ringCount").innerHTML = state.bLollipops;
		} else {
			document.getElementById("ringCounter").style.display = "none";
		}
		document.getElementById("wood").innerHTML = countToKString(state.bWood);
		document.getElementById("gold").innerHTML = countToKString(state.bGold);
		document.getElementById("coco").innerHTML = countToKString(state.bCoco);
		document.getElementById("stardust").innerHTML = countToKString(state.bStardust);
		document.getElementById("woodSec").innerHTML = "+" + state.bWoodPS + "/s";
		document.getElementById("goldSec").innerHTML = "+" + state.bGoldPS + "/s";
		document.getElementById("cocoSec").innerHTML = "+" + state.bCocoPS + "/s";
		document.getElementById("ghostCounter").style.display = "none";
	}
	
	if (!settingsToggled) {
		if (place == "goWoodshroom") {
			document.getElementById("resCounter").innerHTML = "There is <span style='color:#d0ba91'>" + state.tWood + "/" + state.tWoodCapacity + " wood</span> in the bucket";
		} else if (place == "goGoldFlower") {
			document.getElementById("resCounter").innerHTML = "There is <span style='color:#ffc800'>" + state.tGold + "/" + state.tGoldCapacity + " gold</span> in the bucket";
		} else if (place == "goCocoPotato") {
			document.getElementById("resCounter").innerHTML = "There is <span style='color:#8b5937'>" + state.tCoco + "/" + state.tCocoCapacity + " coco</span> in the bucket";
		} else if (place == "goTimeTerrarium") {
			document.getElementById("resCounter").innerHTML = "<span style='color:#d0ba91'>" + state.tWood + "/" + state.tWoodCapacity + " wood</span></br><span style='color:#ffc800'>" + state.tGold + "/" + state.tGoldCapacity + " gold</span></br><span style='color:#8b5937'>" + state.tCoco + "/" + state.tCocoCapacity + " coco</span>";
	   		if (checkIfFullTerrarium()) {
	   			document.getElementById("handlingArt").src = "https://cdn.jsdelivr.net/gh/polandstick/mgg2@7b2af95dcfaa66cdf12bf44547469c43066f6142/games/planet-life/images/handling/timeTerrariumFull.gif";
	   		} else {
	   			document.getElementById("handlingArt").src = "https://cdn.jsdelivr.net/gh/polandstick/mgg2@7b2af95dcfaa66cdf12bf44547469c43066f6142/games/planet-life/images/handling/timeTerrarium.gif";
	   		}
	    } else {
			document.getElementById("resCounter").innerHTML = "";
		}
		if (place == "surface") {
			if (checkIfFullTerrarium()) {
				document.getElementById("imgTime TerrariumBut").src = "https://cdn.jsdelivr.net/gh/polandstick/mgg2@7b2af95dcfaa66cdf12bf44547469c43066f6142/games/planet-life/images/handling/timeTerrariumFull.gif";
			}
		}
		if (place == "goBurgulonSurface") {
			if (checkIfFullTerrarium()) {
				document.getElementById("imgTime TerrariumBut").src = "https://cdn.jsdelivr.net/gh/polandstick/mgg2@7b2af95dcfaa66cdf12bf44547469c43066f6142/games/planet-life/images/handling/timeTerrariumFull.gif";
			}
		}
	}

}

function countToKString(count) {
	if (count > 1000) {
		return Math.floor(count / 100) / 10 + "K";
	} else {
		return count;
	}
}

window.addEventListener("touchstart", function() {
	if (transition && skipAllowed) {
		handlingUncut = "";
		cutCount = cutHandling.length;
		document.getElementById("handling").innerHTML = curHandling;
		transition = false;
	}
});

function findResource(nr) {
	if (nr == 0) {
		return state.wood;
	} else if (nr == 1) {
		return state.gold;
	} else if (nr == 2) {
		return state.coco;
	}
}

function findResourcePS(nr) {
	if (nr == 0) {
		return state.woodPS;
	} else if (nr == 1) {
		return state.goldPS;
	} else if (nr == 2) {
		return state.cocoPS;
	}
}

function clearButtons() {
	var myNode = document.getElementById("buttons");
	while (myNode.firstChild) {
		myNode.removeChild(myNode.firstChild);
	}
	curButtons = [];
	curButtonCount = 0;
}

function showButtons() {
	setTimeout(function() {
		if (curButtons[curButtonCount]) {
			document.getElementById(curButtons[curButtonCount]).style.display = "block";
		}
		curButtonCount++;
		if (curButtonCount < curButtons.length) {
			showButtons();
		} else {
			transition = false;
		}
	},buttonDelay);
}

function testSvin() {
	console.log("svinet kører");
}

function T(def, key) {
	if (translations == undefined || translations[key] == null) {
		return def;
	} else {
		return translations[key];
	}
}

function newHandling(handling) {
	curHandling = handling;
	handlingUncut = "";
	cutCount = 0;
	cutHandling = handling.split(" ");
	transition = true;
	drawHandling();
}

function drawHandling() {
	setTimeout(function() {
		handlingUncut = handlingUncut += cutHandling[cutCount] + " ";
		if (cutHandling[cutCount] != undefined) {
			document.getElementById("handling").innerHTML = handlingUncut;
		}
		cutCount++;
		if (cutCount < cutHandling.length) {
			drawHandling();
		} else {
			showButtons();
		}
		
	},delay);
}

function changeScene(thisHandling,thisArt,thisPlace) {
	document.getElementById("loading_container").innerHTML = "";

	
	
	
	clearButtons();
	newHandling(thisHandling);
	curArt = thisArt;
	changeArt(curArt);
	if (thisPlace) {
		place = thisPlace;
	}
}

function changeArt(curArt) {
	if (curArt == "derek") {
		loadDerekEquipmentImages();
		document.getElementById('derekDiv').style.display = "inline-block";
	} else {
		document.getElementById('derekDiv').style.display = "none";
	}
	document.getElementById("handlingArt").src = "https://cdn.jsdelivr.net/gh/polandstick/mgg2@7b2af95dcfaa66cdf12bf44547469c43066f6142/games/planet-life/images/handling/" + curArt + ".gif";
}

function changeBackground(bgImage) {
	document.getElementById("backgroundDiv").style.backgroundImage = "url('https://cdn.jsdelivr.net/gh/polandstick/mgg2@7b2af95dcfaa66cdf12bf44547469c43066f6142/games/planet-life/images/backgrounds/" + bgImage + ".png')";
	if (bgImage != "BG_AlmostBlack") {
		lastBackground = bgImage;	
	}
}

function shortUpgradeAnimation(text,art,funct) {
	changeScene(text,art,"upgradeAnimation");
	setTimeout(function() {
		funct();
	},400);
}

function affordCheck(list,burgulon) {
	if (burgulon) {
		var affordable = true;
		if (state.bWood < list[0] && list[0] != 0) {
			affordable = false;
		}
		if (state.bGold < list[1] && list[1] != 0) {
			affordable = false;
		}
		if (state.bCoco < list[2] && list[2] != 0) {
			affordable = false;
		}
		if (state.bStardust < list[3] && list[3] != 0) {
			affordable = false;
		}
	} else {
		var affordable = true;
		if (state.wood < list[0] && list[0] != 0) {
			affordable = false;
		}
		if (state.gold < list[1] && list[1] != 0) {
			affordable = false;
		}
		if (state.coco < list[2] && list[2] != 0) {
			affordable = false;
		}
		if (state.stardust < list[3] && list[3] != 0) {
			affordable = false;
		}
	}
	return affordable;
}

function buttonDisableCheck(list,id,burgulon) {
	if (!burgulon) {
		if (affordCheck(list)) {
			document.getElementById(id).disabled = false;
		} else {
			document.getElementById(id).disabled = true;
		}
	} else {
		if (affordCheck(list,true)) {
			document.getElementById(id).disabled = false;
		} else {
			document.getElementById(id).disabled = true;
		}
	}
}

function timeButtonDisableCheck(id,price) {
	if (state.wormCubes >= price) {
		document.getElementById(id).disabled = false;
	} else {
		document.getElementById(id).disabled = true;
	}	
}

function smallAffordCheck(currency,price) {
	var affordable = false;
	if (currency == "ghosts" && state.ghosts >= price) {
		affordable = true;
	}
	if (currency == "coins" && state.coins >= price) {
		affordable = true;
	}
	if (currency == "gold" && state.gold >= price) {
		affordable = true;
	}
	if (currency == "stardust" && state.stardust >= price) {
		affordable = true;
	}
	if (currency == "coco" && state.coco >= price) {
		affordable = true;
	}
	if (currency == "bCoco" && state.bCoco >= price) {
		affordable = true;
	}
	if (currency == "bGold" && state.bGold >= price) {
		affordable = true;
	}
	if (currency == "bWood" && state.bWood >= price) {
		affordable = true;
	}
	if (currency == "bStardust" && state.bStardust >= price) {
		affordable = true;
	}
	if (currency == "bSpaceRings" && state.bSpaceRings >= price) {
		affordable = true;
	}
	return affordable;
}

function buttonSmallDisableCheck(currency,price,ID) {
	if (smallAffordCheck(currency,price)) {
		document.getElementById(ID).disabled = false;
	} else {
		document.getElementById(ID).disabled = true;
	}
}

function toggleResIcons() {
	
	
	
	
	
	
	
	
}

function toggleResInfo() {
	if (resInfoToggled) {
		document.getElementById("infoContentHolder").style.display = "none";
		resInfoToggled = false;
	} else {
		document.getElementById("infoContentHolder").style.display = "inline";
		resInfoToggled = true;
	}
}

function resetProgress(settingsToggle) {
	resetState(false);
	resetMusic();
	if (settingsToggle) {
		toggleSettings();
	}
	startGame();
}

window.addEventListener("didEnterBackground", function (e) {
	isGamePaused = true;
	console.log("didEnterBackground");
}, false);

window.addEventListener("didBecomeActive", function (e) {
	isGamePaused = false;
	console.log("didBecomeActive");
}, false);

function isTouchDevice() {
	return "ontouchstart" in document.documentElement;
}



function boost() {
	if (state.burgulonTime) {
		updateState("bWood", state.wood += 9000);
		updateState("bGold", state.gold += 5000);
		updateState("bCoco", state.coco += 9000);
		updateState("bStardust", state.stardust + 1000);
	} else {
		updateState("pickedRobot", true);
		updateState("wood", state.wood += 9000);
		updateState("gold", state.gold += 5000);
		updateState("coco", state.coco += 9000);
		updateState("stardust", state.stardust + 5);		
	}

}

function burgerBoost() {
	updateState("bWood", state.bWood += 1000);
	updateState("bGold", state.bGold += 1000);
	updateState("bCoco", state.bCoco += 1000);
	updateState("bStardust", state.bStardust + 1000);
}

function getAllTheFirstFriends() {
	var newFriends = state.friends;
	for (var i = 0; i < 6; i++) {
		newFriends[i].found = true;
	}
	updateState("friends",newFriends);
	updateState("wormFound",true);
}

function spaceFarts() {
	getAllTheFirstFriends();
	updateState("pickedRobot", true);
	updateState("burgerWoodPS", 0);
	updateState("burgerGoldPS", 0);
	updateState("burgerDoing", "");
	updateState("wood", 9000);
	updateState("gold", 4000);
	updateState("coco", 9000);
	updateState("cocoPS", 3);
	updateState("woodPS", 1);
	updateState("goldPS", 2);
	updateState("stardust", 30);
	
	
	completeDungeons();
	updateState("derekDefrosted", true);
	updateArrayState("workshopPrice", 4, true);
	updateArrayState("slotmachinePrice", 4, true);
	updateArrayState("friendHousePrice", 4, true);
	updateArrayState("ddsPrice", 4, true);
	updateState("dungeonFound", true);
	updateArrayState("shopPrices", 1, false);
	updateArrayState("shopPrices", 2, false);
	updateArrayState("shopPrices", 3, false);
	updateState("starmapNr",3);
	burgerCheat = false;
	updateState("dungeonMasterSummoned", true);
	updateArrayState("productStates", 12, true);
	updateState("dungeonsCompleted", true);
	upgradeAnimation("SPACE FARTS!","spaceBroccoli",broccoli);
}

function derekSemiUpgrade() {
	for (var i = 0; i < 3; i++) {
		updateArrayState("skillStates", i, 2);
		updateArrayState("productStates", findProductIndex(allSkills[i].navn), 2);
	}
	updateArrayState("productStates", findProductIndex("Upgrade strength"), 2);
	updateArrayState("productStates", findProductIndex("Upgrade potion belt"), 1);
	updateArrayState("productStates", findProductIndex("Upgrade health"), 2);
	updateState("derekMaxHealth", 200);
	updateState("derekHealth", 200);
	updateState("healthPotionCapacity", 3);
	updateState("derekToughness", 150);
}

function completeDungeons() {
	for (var i = 0; i < state.dungeons.length; i++) {
		if (i < 3) {
			var newDungeons = state.dungeons;
			newDungeons[i].completed = true;
			updateState("dungeons", newDungeons);
		}
	}
}

function goDerekCheckCheat() {
	changeScene(
		"Derek discovers a powerful nuclear fart in a hidden corner of the school.<br/><br/>He can choose to gain it's crazily overpowered bonus, or leave it alone. There is NO WAY BACK once Derek has become nuclear",
		"dungeonSchool",
		"derekCheat"
	);
	createGoButton("GO NUCLEAR","bullFart",goDerekCheat);
	createGoButton("No thanks","talk",goDDS);
}

function goDerekCheat() {
	playSound(soundEffect.derek);
	changeScene("DEREK!??","derek","derekCheat");
	setTimeout(function(){
		playSound(soundEffect.fart);
		changeScene("Derek has drawn insane power from the nuclear fart!!!","bullFart");
		createGoButton("Better watch out!","derek",goDDS);
	},1000);
	updateArrayState("skillStates", 0, 98);
	updateArrayState("skillStates", 1, 98);
	updateArrayState("skillStates", 2, 98);
	updateArrayState("skillStates", 3, 98);
	updateArrayState('productStates', 0, 98);
	updateArrayState('productStates', 1, 98);
	updateArrayState('productStates', 2, 98);
	updateArrayState('productStates', 3, 98);
	updateState("derekHealth", 15999);
	updateState("derekMaxHealth", 15999);
	updateState("derekToughness", 15999);
	updateState("healthPotionCapacity", 399);
	updateState("healthPotions", 399);
	updateState("healthPotionHeal", 1040);
}

function goDerekCheckAntiCheat() {
	changeScene(
		"Derek seems to have found a way into his inner door of regret. Maybe this is a way to become less nuclear.. Wanna give it a try?",
		"doorOfRegret",
		"derekAntiCheat"
	);
	createGoButton("Let's do this","doorOfRegret",goDerekAntiCheat);
	createGoButton("No thanks","talk",goDDS);
}

function goSetDerekAntiCheat() {
	upgradeAnimation("...","doorOfRegret",goDerekAntiCheat);
}

function goDerekAntiCheat() {
	playSound(soundEffect.derek);
	changeScene(
		"Derek enters his inner door of regret. He immediatly becomes less nuclear",
		"derek"
	);
	createGoButton("Cool!","derek",goDDS);

	if (state.skillStates[0] > 20) {
		updateArrayState("skillStates", 0, state.skillStates[0] - 20);
	} else {
		updateArrayState("skillStates", 0, 1);
	}
	if (state.skillStates[1] > 20) {
		updateArrayState("skillStates", 1, state.skillStates[1] - 20);
	} else {
		updateArrayState("skillStates", 1, 1);
	}
	if (state.skillStates[2] > 20) {
		updateArrayState("skillStates", 2, state.skillStates[2] - 20);
	} else {
		updateArrayState("skillStates", 2, 1);
	}
	if (state.skillStates[3] > 20) {
		updateArrayState("skillStates", 3, state.skillStates[3] - 20);
	} else {
		updateArrayState("skillStates", 3, 1);
	}
	if (state.productStates[0] > 20) {
		updateArrayState("productStates", 0, state.productStates[0] - 20);
	} else {
		updateArrayState("productStates", 0, 1);
	}
	if (state.productStates[1] > 20) {
		updateArrayState("productStates", 1, state.productStates[1] - 20);
	} else {
		updateArrayState("productStates", 1, 1);
	}
	if (state.productStates[2] > 20) {
		updateArrayState("productStates", 2, state.productStates[2] - 20);
	} else {
		updateArrayState("productStates", 2, 1);
	}
	if (state.productStates[3] > 20) {
		updateArrayState("productStates", 3, state.productStates[3] - 20);
	} else {
		updateArrayState("productStates", 3, 1);
	}
	updateState("derekHealth", (state.productStates[7] + 1) * 50);
	updateState("derekMaxHealth", (state.productStates[7] + 1) * 50);
	updateState("derekToughness", (state.productStates[5] + 1) * 40);
	updateState("healthPotionCapacity", state.productStates[6] + 1);
	if (state.healthPotions > state.healthPotionCapacity) {
		updateState('healthPotions', state.healthPotionCapacity);
	}
	updateState("healthPotionHeal", 50 + (state.productStates[16] * 10));
}

if (scrollEnabled) {
	document.getElementById('gameDiv').style.overflowY = 'scroll';
	document.getElementById('gameDiv').style.height = '600px';
	document.getElementById('resInfoDiv').style.position = 'relative';
}

window.addEventListener('scroll', function() {
  if (window.pageYOffset.toFixed() > 0) {
      console.log("Absolute");
      document.getElementById("resInfoDiv").style.position = "absolute";
  } else {
      console.log("Fixed");
      document.getElementById("resInfoDiv").style.position = "fixed";
  }
})

  
</script><script>


var movedInButton = false;

function createIconButton(headline,image,thisID,buttonText,clr,disabled,buttonsDiv,fnct,parameter1,parameter2,parameter3) {
	var fullDiv = document.createElement('div');
	fullDiv.className = "fullWidth";
	if (document.getElementById("full" + thisID)) {
		
		fullDiv.id = "full" + thisID + Math.random();
	} else {
		fullDiv.id = "full" + thisID;
	}
	if (buttonsDiv == "buttons") {
		fullDiv.style.display = "none"; 
	} else {
		fullDiv.id += "Settings";
	}
	curButtons.push(fullDiv.id);
	fullDiv.style.marginBottom = "10px";
	var head = document.createElement('h1');
	head.innerHTML = headline;
	head.style.color = clr;
	head.style.marginLeft = "15px";
	head.style.marginTop = "20px";
	head.style.marginRight = "10px";
	if (image) {
		var img = document.createElement('img');
		img.className = "buttonImg";
		img.src = image;
		img.id = "img" + thisID;
		img.style.marginRight = "20px";
		img.style.float = "left";
	}
	var backgroundDiv = document.createElement('div');
	var clicked = false;
	if (disabled) {
		backgroundDiv.className = "buildBackground";
	} else {
		backgroundDiv.className = "buttonBackground";
		
		
		
		
		
		
		fullDiv.addEventListener("click",up);
	}
	function down(e) {
		if (e.srcElement.innerText == "Sound (off)" || e.srcElement.innerText == "Sound (on)" || e.srcElement.innerText == "Music (off)" || e.srcElement.innerText == "Music (on)") {
			e.preventDefault();
		}
		backgroundDiv.className = "buttonBackgroundPressed";
		fullDiv.style.transform = "translateY(4px)";
		playSound(soundEffect.click);
		movedInButton = false;
		clicked = true;
	}
	function up(e) {
		
		if (!movedInButton) {
			if (fnct != null) { fnct(parameter1,parameter2,parameter3); }
		}
		resetButton();
	}
	function move(e) {
		
		movedInButton = true;
		if (clicked) {
			resetButton();
		}
	}
	function resetButton() {
		backgroundDiv.className = "buttonBackground";
		fullDiv.style.transform = "translateY(-1px)";
		clicked = false;
	}
	if (buttonsDiv == "buttons") {
		document.getElementById("buttons").appendChild(fullDiv);
	} else {
		document.getElementById("settingsButtons").appendChild(fullDiv);
	}
	if (image) {
		document.getElementById(fullDiv.id).appendChild(img);
	}
	document.getElementById(fullDiv.id).appendChild(head);
	document.getElementById(fullDiv.id).appendChild(backgroundDiv);
}

function createGoButton(headline,image,fnct,parameter,parameter2) {
	createIconButton(headline,"https://cdn.jsdelivr.net/gh/polandstick/mgg2@7b2af95dcfaa66cdf12bf44547469c43066f6142/games/planet-life/images/handling/" + image + ".gif",headline + "But","go here","#FFFFFF",false,"buttons",fnct,parameter,parameter2);
}

function createSettingsIconButton(headline,image,fnct,parameter) {
	var id = headline.split(' ').join('_') + 'But';
	createIconButton(headline,"https://cdn.jsdelivr.net/gh/polandstick/mgg2@7b2af95dcfaa66cdf12bf44547469c43066f6142/games/planet-life/images/handling/" + image + ".gif",id,"go here","#FFFFFF",false,"settingsButtons",fnct,parameter);
}

function createSettingsButton(text,fnct,parameter) {
	createSmallIconButton(text,"",text + "But",false,"settings",fnct,parameter);
}

function createSettingsImportButton(headline,image,fnct,parameter) {
	var id = headline.split(' ').join('_') + 'But';
	createIconButton(headline,"https://cdn.jsdelivr.net/gh/polandstick/mgg2@7b2af95dcfaa66cdf12bf44547469c43066f6142/games/planet-life/images/handling/" + image + ".gif",id,"go here","#FFFFFF",false,"settingsButtons",() => { fileSelector.click(); },parameter);
	
	var fileSelector = document.createElement('input');
	fileSelector.setAttribute('type', 'file');
	fileSelector.setAttribute('accept', '.planet');
	fileSelector.onchange = fnct;
}

function createBuildButton(headline,image,text,fnct,thisID,buttonText,price,parameter1) {
	var fullDiv = document.createElement('div');
	fullDiv.className = "fullWidth";
	fullDiv.id = "full" + thisID;
	fullDiv.style.display = "none";
	curButtons.push(fullDiv.id);
	fullDiv.style.marginBottom = "10px";
	var img = document.createElement('img');
	img.src = "https://cdn.jsdelivr.net/gh/polandstick/mgg2@7b2af95dcfaa66cdf12bf44547469c43066f6142/games/planet-life/images/handling/" + image + ".gif";
	img.className = "buildButtonImage";
	img.style.marginRight = "20px";
	var head = document.createElement('h1');
	head.innerHTML = headline;
	head.className = "buildButtonHeadline";
	var iconDiv = document.createElement('div');
	iconDiv.className = "resIconDiv";
	iconDiv.style.display = "inline-block";
	iconDiv.id = "icon" + thisID;
	iconDiv.style.marginLeft = "10px";
	iconDiv.style.width = "100%";
	var fullDiv2 = document.createElement('div');
	fullDiv2.className = "fullWidth";
	fullDiv2.id =  "full2" + thisID;
	fullDiv2.style.marginLeft = "10px";
	var description = document.createElement('p');
	description.className = "buildButtonText";
	description.id = thisID + "-buildButtonDescription";
	description.innerHTML = text;
	description.style.marginRight = "20px";
	var but = document.createElement('button');
	but.id = thisID;
	but.className = "buildButton";
	but.innerHTML = buttonText;
	but.disabled = true;
	var clicked = false;
	
	
	
	
	
	
	fullDiv.addEventListener("click",up);
	function down(e) {
		
		if (!but.disabled) {
			but.className = "buildButtonActive";
			clicked = true;
		} 
		playSound(soundEffect.click);
	 	movedInButton = false;
	}
	function up(e) {
		e.preventDefault();
		if (!movedInButton) {
			if (!but.disabled) {
				fnct(parameter1);	
			}	
		}
		resetButton();
	}
	function move(e) {
		
		movedInButton = true;
		if (clicked) {
			resetButton();
		}
	}
	function resetButton() {
		if (!but.disabled) {
			but.className = "buildButton";
			clicked = false;
		}
	}
	
	function showResource(name, amount) {
		var img = document.createElement('img');
		img.src = "https://cdn.jsdelivr.net/gh/polandstick/mgg2@7b2af95dcfaa66cdf12bf44547469c43066f6142/games/planet-life/images/icons/" + name + ".png";
		img.className = "resIcon";
		img.style.display = (amount == 0 ? "none" : "inline-block");
		
		var p = document.createElement('p');
		p.className = "buildButtonText";
		p.style.display = (amount == 0 ? "none" : "inline-block");
		
		p.innerHTML = amount.toLocaleString();
		
		document.getElementById("icon" + thisID).appendChild(img);
		document.getElementById("icon" + thisID).appendChild(p);
	}
	
	var backgroundDiv = document.createElement('div');
	backgroundDiv.className = "buildBackground";
	var br = document.createElement("br");
	var br2 = document.createElement("br");
	document.getElementById("buttons").appendChild(fullDiv);
	document.getElementById("full" + thisID).appendChild(img);
	document.getElementById("full" + thisID).appendChild(head);
	document.getElementById("full" + thisID).appendChild(iconDiv);
	document.getElementById("full" + thisID).appendChild(fullDiv2);
	document.getElementById("full" + thisID).appendChild(backgroundDiv);
	document.getElementById("full2" + thisID).appendChild(description);
	document.getElementById("icon" + thisID).appendChild(but);
	
	showResource("wood", price[0]);
	showResource("gold", price[1]);
	showResource("coco", price[2]);
	showResource("stardust", price[3]);
	
	document.getElementById("buttons").appendChild(br);
	document.getElementById("buttons").appendChild(br2);
}

function createTimeBuildButton(headline,image,text,fnct,thisID,buttonText,price,parameter1,parameter2) {
	var fullDiv = document.createElement('div');
	fullDiv.className = "fullWidth";
	fullDiv.id = "full" + thisID;
	fullDiv.style.display = "none";
	curButtons.push(fullDiv.id);
	fullDiv.style.marginBottom = "10px";
	var img = document.createElement('img');
	img.src = "https://cdn.jsdelivr.net/gh/polandstick/mgg2@7b2af95dcfaa66cdf12bf44547469c43066f6142/games/planet-life/images/handling/" + image + ".gif";
	img.className = "buildButtonImage";
	img.style.marginRight = "20px";
	var head = document.createElement('h1');
	head.innerHTML = headline;
	head.className = "buildButtonHeadline";
	var iconDiv = document.createElement('div');
	iconDiv.className = "resIconDiv";
	iconDiv.style.display = "inline-block";
	iconDiv.id = "icon" + thisID;
	iconDiv.style.marginLeft = "10px";
	iconDiv.style.width = "100%";
	var fullDiv2 = document.createElement('div');
	fullDiv2.className = "fullWidth";
	fullDiv2.id =  "full2" + thisID;
	fullDiv2.style.marginLeft = "10px";
	var description = document.createElement('p');
	description.className = "buildButtonText";
	description.id = thisID + "-buildButtonDescription";
	description.innerHTML = text;
	description.style.marginRight = "20px";
	var but = document.createElement('button');
	but.id = thisID;
	but.className = "buildButton";
	but.innerHTML = buttonText;
	but.disabled = true;
	var clicked = false;
	
	
	
	
	
	
	fullDiv.addEventListener("click",up);
	function down(e) {
		
		if (!but.disabled) {
			but.className = "buildButtonActive";
			clicked = true;
		} 
		playSound(soundEffect.click);
	 	movedInButton = false;
	}
	function up(e) {
		e.preventDefault();
		if (!movedInButton) {
			if (!but.disabled) {
				fnct(parameter1,parameter2);	
			}	
		}
		resetButton();
	}
	function move(e) {
		
		movedInButton = true;
		if (clicked) {
			resetButton();
		}
	}
	function resetButton() {
		if (!but.disabled) {
			but.className = "buildButton";
			clicked = false;
		}
	}
	
	function showResource(name, amount) {
		var img = document.createElement('img');
		img.src = "https://cdn.jsdelivr.net/gh/polandstick/mgg2@7b2af95dcfaa66cdf12bf44547469c43066f6142/games/planet-life/images/icons/" + name + ".gif";
		img.className = "resIcon";
		img.style.display = (amount == 0 ? "none" : "inline-block");
		
		var p = document.createElement('p');
		p.className = "buildButtonText";
		p.style.display = (amount == 0 ? "none" : "inline-block");
		
		p.innerHTML = amount.toLocaleString();
		
		document.getElementById("icon" + thisID).appendChild(img);
		document.getElementById("icon" + thisID).appendChild(p);
	}
	
	var backgroundDiv = document.createElement('div');
	backgroundDiv.className = "buildBackground";
	var br = document.createElement("br");
	var br2 = document.createElement("br");
	document.getElementById("buttons").appendChild(fullDiv);
	document.getElementById("full" + thisID).appendChild(img);
	document.getElementById("full" + thisID).appendChild(head);
	document.getElementById("full" + thisID).appendChild(iconDiv);
	document.getElementById("full" + thisID).appendChild(fullDiv2);
	document.getElementById("full" + thisID).appendChild(backgroundDiv);
	document.getElementById("full2" + thisID).appendChild(description);
	document.getElementById("icon" + thisID).appendChild(but);
	
	showResource("wormCube", price[0]);
	
	document.getElementById("buttons").appendChild(br);
	document.getElementById("buttons").appendChild(br2);
}

function createMenuButton(headline,image,text,fnct,thisID,buttonText,parameter1) {
	var fullDiv = document.createElement('div');
	fullDiv.className = "fullWidth";
	fullDiv.id = "full" + thisID;
	fullDiv.style.display = "none";
	curButtons.push(fullDiv.id);
	fullDiv.style.marginBottom = "10px";
	var img = document.createElement('img');
	img.src = "https://cdn.jsdelivr.net/gh/polandstick/mgg2@7b2af95dcfaa66cdf12bf44547469c43066f6142/games/planet-life/images/handling/" + image + ".gif";
	img.className = "buildButtonImageFull";
	
	var head = document.createElement('h1');
	head.innerHTML = headline;
	head.className = "menuButtonHeadline";
	var iconDiv = document.createElement('div');
	iconDiv.className = "resIconDiv";
	iconDiv.style.display = "inline-block";
	iconDiv.id = "icon" + thisID;
	iconDiv.style.marginLeft = "10px";
	iconDiv.style.width = "100%";
	var fullDiv2 = document.createElement('div');
	fullDiv2.className = "fullWidth";
	fullDiv2.id =  "full2" + thisID;
	fullDiv2.style.marginLeft = "10px";
	var description = document.createElement('p');
	description.className = "buildButtonText";
	description.id = thisID + "-buildButtonDescription";
	description.innerHTML = text;
	description.style.marginRight = "20px";
	var but = document.createElement('button');
	but.id = thisID;
	but.className = "buildButton";
	but.innerHTML = buttonText;
	
	var clicked = false;
	
	
	
	
	
	
	fullDiv.addEventListener("click",up);
	function down(e) {
		
			but.className = "buildButtonActive";
			clicked = true;
		playSound(soundEffect.click);
	 	movedInButton = false;
	}
	function up(e) {
		e.preventDefault();
		if (!movedInButton) {
				fnct(parameter1);	
		}
		resetButton();
	}
	function move(e) {
		
		movedInButton = true;
		if (clicked) {
			resetButton();
		}
	}
	function resetButton() {
			but.className = "buildButton";
			clicked = false;
	}
	
	
	
	
	
	
		
	
	
	
		
	
		
	
	
	
	
	var backgroundDiv = document.createElement('div');
	backgroundDiv.className = "buildBackground";
	var br = document.createElement("br");
	var br2 = document.createElement("br");
	document.getElementById("buttons").appendChild(fullDiv);
	document.getElementById("full" + thisID).appendChild(head);
	document.getElementById("full" + thisID).appendChild(img);
	document.getElementById("full" + thisID).appendChild(iconDiv);
	document.getElementById("full" + thisID).appendChild(fullDiv2);
	document.getElementById("full" + thisID).appendChild(backgroundDiv);
	document.getElementById("full2" + thisID).appendChild(description);
	document.getElementById("icon" + thisID).appendChild(but);
	
	
	
	
	
	
	document.getElementById("buttons").appendChild(br);
	document.getElementById("buttons").appendChild(br2);
}

function createSmallBuildButton(text,image,thisID,fnct,parameter,parameter2) {
	var but = document.createElement('button');
	but.id = thisID;
	curButtons.push(but.id);
	but.style.display = "none";
	but.className = "buildButton";
	but.style.width = '100%';
	but.style.padding = '0px';
	but.style.marginBottom = '10px';
	but.disabled = true;
	if (image) {
		var img = document.createElement('img');
		img.src = "https://cdn.jsdelivr.net/gh/polandstick/mgg2@7b2af95dcfaa66cdf12bf44547469c43066f6142/games/planet-life/images/handling/" + image + ".gif";
		img.className = "smallBuildButtonImage";
	}
	var txt = document.createElement('p');
	txt.innerHTML = text;
	txt.className = 'smallBuildButtonText';
	var clicked = false;
	
	
	
	
	
	
	but.addEventListener("click",up);
	function down(e) {
		
		if (!but.disabled) {
			but.className = "buildButtonActive";
			playSound(soundEffect.click);
		 	movedInButton = false;
		 	clicked = true;
		}
	}
	function up(e) {
		
		if (!but.disabled) {
			if (!movedInButton) {
				fnct(parameter,parameter2);
			}
			resetButton();
		}
	}
	function move(e) {
		
		if (!but.disabled) {
			movedInButton = true;
			if (clicked) {
				resetButton();
			}
		}
	}
	function resetButton() {
		if (!but.disabled) {
			but.className = "buildButton";
			clicked = false;
		}
	}
	document.getElementById("buttons").appendChild(but);
	document.getElementById(thisID).appendChild(img);
	document.getElementById(thisID).appendChild(txt);
}

function createSmallIconButton(headline,image,thisID,disabled,buttonsDiv,fnct,parameter) {
	var fullDiv = document.createElement('div');
	fullDiv.className = "fullWidth";
	fullDiv.id = "full" + thisID;
	if (buttonsDiv != "settings") {
		fullDiv.style.display = "none";
	}
	curButtons.push(fullDiv.id);
	fullDiv.style.marginBottom = "15px";
	var head = document.createElement('h2');
	head.innerHTML = headline;
	head.style.color = "#FFFFFF";
	head.style.marginLeft = "20px";
	head.style.marginTop = "15px";
	head.style.marginRight = "10px";
	if (image) {
		var img = document.createElement('img');
		img.className = "buttonImg";
		img.src = image;
		img.id = "img" + thisID;
		img.style.marginBottom = "5px";
		img.style.marginRight = "20px";
		img.style.float = "left";
	}
	var btn = document.createElement('button');
	btn.id = "button" + thisID;
	if (disabled) {
		btn.disabled = true;
	}
	var clicked = false;
	
	
	
	
	
	
	fullDiv.addEventListener("click",up);
	function down(e) {
		
		backgroundDiv.className = "buttonBackgroundPressed";
		fullDiv.style.transform = "translateY(3px)";
		movedInButton = false;
		clicked = true;
	}
	function up(e) {
		
		playSound(soundEffect.click);
		if (!movedInButton) {
			fnct(parameter);
		}
		resetButton();
	}
	function move(e) {
		
		movedInButton = true;
		if (clicked) {
			resetButton();
		}
	}
	function resetButton() {
		backgroundDiv.className = "buttonBackground";
		fullDiv.style.transform = "translateY(-3px)";	
		clicked = false;	
	}
	var backgroundDiv = document.createElement('div');
	backgroundDiv.className = "buttonBackground";
	if (buttonsDiv == "buttons") {
		document.getElementById("buttons").appendChild(fullDiv);
	} else {
		document.getElementById("settingsButtons").appendChild(fullDiv);
	}
	if (image) {
		document.getElementById("full" + thisID).appendChild(img);
	}
	document.getElementById("full" + thisID).appendChild(head);
	document.getElementById("full" + thisID).appendChild(backgroundDiv);
}

function createButton(text,fnct,parameter) {
	createSmallIconButton(text,"",text + "But",false,"buttons",fnct,parameter);
}

function createTextButton(headline,image,text,fnct,thisID,buttonText,parameter1) {
	var fullDiv = document.createElement('div');
	fullDiv.className = "fullWidth";
	fullDiv.id = "full" + thisID;
	fullDiv.style.display = "none";
	curButtons.push(fullDiv.id);
	fullDiv.style.marginBottom = "10px";
	var img = document.createElement('img');
	img.src = "https://cdn.jsdelivr.net/gh/polandstick/mgg2@7b2af95dcfaa66cdf12bf44547469c43066f6142/games/planet-life/images/handling/" + image + ".gif";
	img.className = "buildButtonImage";
	img.style.marginRight = "20px";
	var head = document.createElement('h1');
	head.innerHTML = headline;
	head.className = "buildButtonHeadline";
	var iconDiv = document.createElement('div');
	iconDiv.className = "resIconDiv";
	iconDiv.style.display = "inline-block";
	iconDiv.id = "icon" + thisID;
	iconDiv.style.marginLeft = "10px";
	iconDiv.style.width = "100%";
	var fullDiv2 = document.createElement('div');
	fullDiv2.className = "fullWidth";
	fullDiv2.id =  "full2" + thisID;
	fullDiv2.style.marginLeft = "10px";
	var description = document.createElement('p');
	description.className = "buildButtonText";
	description.id = thisID + "-buildButtonDescription";
	description.innerHTML = text;
	description.style.marginRight = "20px";
	var but = document.createElement('button');
	but.id = thisID;
	but.className = "buildButton";
	but.innerHTML = buttonText;
	var clicked = false;
	
	
	
	
	
	
	fullDiv.addEventListener("click",up);
	function down(e) {
		
		if (!but.disabled) {
			but.className = "buildButtonActive";
			clicked = true;
		} 
		playSound(soundEffect.click);
	 	movedInButton = false;
	}
	function up(e) {
		e.preventDefault();
		if (!movedInButton) {
			if (!but.disabled) {
				fnct(parameter1);	
			}	
		}
		resetButton();
	}
	function move(e) {
		
		movedInButton = true;
		if (clicked) {
			resetButton();
		}
	}
	function resetButton() {
		if (!but.disabled) {
			but.className = "buildButton";
			clicked = false;
		}
	}
	var backgroundDiv = document.createElement('div');
	backgroundDiv.className = "buildBackground";
	var br = document.createElement("br");
	var br2 = document.createElement("br");
	document.getElementById("buttons").appendChild(fullDiv);
	document.getElementById("full" + thisID).appendChild(img);
	document.getElementById("full" + thisID).appendChild(head);
	document.getElementById("full" + thisID).appendChild(iconDiv);
	document.getElementById("full" + thisID).appendChild(fullDiv2);
	document.getElementById("full" + thisID).appendChild(backgroundDiv);
	document.getElementById("full2" + thisID).appendChild(description);
	document.getElementById("icon" + thisID).appendChild(but);
	document.getElementById("buttons").appendChild(br);
	document.getElementById("buttons").appendChild(br2);
}

</script>  <script src="https://cdn.jsdelivr.net/gh/polandstick/mgg2@7b2af95dcfaa66cdf12bf44547469c43066f6142/games/planet-life/presentManager.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/polandstick/mgg2@7b2af95dcfaa66cdf12bf44547469c43066f6142/games/planet-life/s_startolar.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/polandstick/mgg2@7b2af95dcfaa66cdf12bf44547469c43066f6142/games/planet-life/timeTerrarium.js"></script>
  <script>



function writeAllDerekStats() {
	var h = "Derek is finally wearing something! He gets all these advantages:</br><span style='color:#0088ff'>";
	var noStats = true;
	for (var key in allDerekStats) {
		if (allDerekStats[key] != 0) {
			if (allItemStats[findItemStatIndexByName(key)].valueType == "%") {
				h += allDerekStats[key] + "% " + key + "</br>";
			} else {
				h += "+" + allDerekStats[key] + " " + key + "</br>";
			}
			noStats = false;
		}
	}
	if (noStats) {
		h = "Derek is not wearing anything. How embarrassing!";
	}
	return h;
}

function findItemStatIndexByName(navn) {
	for (var i = 0; i < allItemStats.length; i++) {
		if (navn == allItemStats[i].navn) {
			return i;
		}
	}
}

function goDerekEquipment() {

	changeScene(
		writeAllDerekStats() + "</span>",
		"derek",
		"goDerekEquipment"
	);
	createGoButton("Back","derek",goDerekHub);
	createGoButton(
		"Head (" + countEquipmentType("head") + ") " + writeEquippedItem("head","text"),
		writeEquippedItem("head","image"),
		goCheckEquipment,
		"head"
	);
	createGoButton(
		"Hand (" + countEquipmentType("fist") + ") " + writeEquippedItem("fist","text"),
		writeEquippedItem("fist","image"),
		goCheckEquipment,
		"fist"
	);
	createGoButton(
		"Legs (" + countEquipmentType("legs") + ") " + writeEquippedItem("legs","text"),
		writeEquippedItem("legs","image"),
		goCheckEquipment,
		"legs"
	);
}

function writeEquippedItem(type,output) {
	var anything = false;
	for (var i = 0; i < state.derekItems.length; i++) {
		if (state.derekItems[i].clothesType == type && state.derekItems[i].equipped) {
			anything = true;
			if (output == "image") {
				return state.derekItems[i].itemImage;
			}
			if (output == "text") {
				return " " + writeItemName(i,state.derekItems,true);
			}
		}
	}
	if (!anything && output == "image") {
		if (type == "head") {
			return "equipmentHead";
		}
		if (type == "fist") {
			return "equipmentFist";
		}
		if (type == "legs") {
			return "equipmentLegs";
		}
	}
	if (!anything && output == "text") {
		return "";
		
	}
}

function goCheckEquipment(type) {
	var h = "Derek has nothing equipped here";
	var img = "derek";
	var item = state.derekItems;
	for (var i = 0; i < item.length; i++) {
		if (item[i].clothesType == type && item[i].equipped) {
			h = "Derek is wearing " + writeItemName(i,state.derekItems,false) + "</br><span style='color:#a1a1a1'>'" + item[i].text + "'</span></br>" + writeItemStats(i,state.derekItems);
			img = item[i].itemImage;
		}
	}
	changeScene(
		h,
		img
	);
	createGoButton("Back","derek",goDerekEquipment);
	if (type == "head" && countEquipmentType("head") > 0) {
		createGoButton(
			"Browse headgear (" + countEquipmentType("head") + ")",
			"equipmentHead",
			goBrowseEquipment,
			"head"
		);
	}
	if (type == "fist" && countEquipmentType("fist") > 0) {
		createGoButton(
			"Browse handheld (" + countEquipmentType("fist") + ")",
			"equipmentFist",
			goBrowseEquipment,
			"fist"
		);
	}
	if (type == "legs" && countEquipmentType("legs") > 0) {
		createGoButton(
			"Browse pants (" + countEquipmentType("legs") + ")",
			"equipmentLegs",
			goBrowseEquipment,
			"legs"
		);
	}
	if (h != "Derek has nothing equipped here") {
		createGoButton("Unequip",writeEquippedItem(type,"image"),goUnequipItem,type);
	}
}

function countEquipmentType(type) {
	var count = 0;
	for (var i = 0; i < state.derekItems.length; i++) {
		if (state.derekItems[i].clothesType == type && !state.derekItems[i].equipped) {
			count++;
		}
	}
	return count;
}

function goBrowseEquipment(type) {
	changeScene(
		"Some of this equipment is smelling weird",
		"derek"
	);
	createGoButton("Back","derek"	,goCheckEquipment,type);
	if (getPriceOfAllUnequippedOfType(type) > 0) {
		createGoButton(
			"Sell all (" + getPriceOfAllUnequippedOfType(type) + " gold)",
			"gold",
			sellAllUnequippedOfType,
			type
		);
	}
	var items = state.derekItems
	for (var i = 0; i < items.length; i++) {
		if (items[i].clothesType == type && !items[i].equipped) {
			createGoButton(writeItemName(i,state.derekItems,false),items[i].itemImage,goInspectItem,type,i);
		}
	}
}

function getPriceOfAllUnequippedOfType(type) {
	var total = 0;
	for (var i = 0; i < state.derekItems.length; i++) {
		if (state.derekItems[i].clothesType == type && !state.derekItems[i].equipped) {
			total += calculateItemPrice(i);	
		}
	}
	return total;
}

function sellAllUnequippedOfType(type) {
	var price = getPriceOfAllUnequippedOfType(type);
	updateState('gold', state.gold + price);
	var newDerekItems = state.derekItems;
	remove = []; 
	for (var i = 0; i < state.derekItems.length; i++) {
		if (state.derekItems[i].clothesType == type && !state.derekItems[i].equipped) {
			console.log("Should be removing " + state.derekItems[i].navn);
			remove.push(i);
		}
	}
	for (var i = remove.length -1; i >= 0; i--) 
	    newDerekItems.splice(remove[i], 1); 

	updateState('derekItems', newDerekItems);
	upgradeAnimation("Space Ben bought all those stinky things for " + price + " gold</span>","space_ben",goBrowseEquipment,type);
}

function goInspectItem(type,index) {
	console.log("The type here is " + type);
	var items = state.derekItems;
	var currentlyEquipped = "";
	for (var i = 0; i < items.length; i++) {
		if (items[i].clothesType == type && items[i].equipped) {
			currentlyEquipped = "</br>Derek is wearing " + writeItemName(i,state.derekItems,false) + "</br>" + writeItemStats(i,state.derekItems);
		}
	}
	changeScene(
		"Look! It's " + writeItemName(index,state.derekItems,false) + "</br>" + writeItemStats(index,state.derekItems) + currentlyEquipped,
		items[index].itemImage
	);
	createGoButton("Back","derek",goBrowseEquipment,type);
	createGoButton("Equip",items[index].itemImage,goEquipItem,type,index);
	createGoButton("Sell (" + calculateItemPrice(index) + " gold)","gold",goSellItem,index,calculateItemPrice(index));
}

function calculateItemPrice(index) {
	var rarityTypes = ["Scruffy","Decent","Excellent","Crazy"];
	var goldRates = [30,100,800,2000];
	for (var i = 0; i < rarityTypes.length; i++) {
		if (state.derekItems[index].rarityType == rarityTypes[i]) {
			var price = Math.round(goldRates[i] * (state.derekItems[index].rarity / 4));
			return price;
		}
	}	
}

function goSellItem(index,price) {
	updateState('gold', state.gold + price);
	var type = state.derekItems[index].clothesType;
	var newDerekItems = state.derekItems;
	newDerekItems.splice(index,1);
	updateState('derekItems', newDerekItems);
	upgradeAnimation("Space Ben bought that stinky thing for " + price + " gold</span>","space_ben",goBrowseEquipment,type);
}

function goEquipItem(type,index) {
	var items = state.derekItems;
	for (var i = 0; i < items.length; i++) {
		if (items[i].clothesType == type && items[i].equipped) {
			items[i].equipped = false;
		}
	}	
	items[index].equipped = true;
	updateState('derekItems', items);
	calculateDerekStats();
	upgradeAnimation("Fits perfectly!","derek",goBrowseEquipment,type);
}

function goUnequipItem(type) {
	var items = state.derekItems;
	for (var i = 0; i < items.length; i++) {
		if (items[i].clothesType == type && items[i].equipped) {
			items[i].equipped = false;
		}
	}
	calculateDerekStats();
	updateState('derekItems', items);
	upgradeAnimation("Ah, what a relief","derek",goCheckEquipment,type);
}

function loadDerekEquipmentImages() {
	var items = state.derekItems;
	var headEquipped = false;
	var fistEquipped = false;
	var legsEquipped = false;
	for (var i = 0; i < items.length; i++) {
		if (items[i].clothesType == "head" && items[i].equipped) {
			document.getElementById('headImg').src = "https://cdn.jsdelivr.net/gh/polandstick/mgg2@7b2af95dcfaa66cdf12bf44547469c43066f6142/games/planet-life/images/handling/invisibleImg.gif";
			document.getElementById('headImg').src = "https://cdn.jsdelivr.net/gh/polandstick/mgg2@7b2af95dcfaa66cdf12bf44547469c43066f6142/games/planet-life/images/items/" + items[i].derekImage + ".gif";
			headEquipped = true;
		} 
		if (items[i].clothesType == "fist" && items[i].equipped) {
			document.getElementById('fistImg').src = "https://cdn.jsdelivr.net/gh/polandstick/mgg2@7b2af95dcfaa66cdf12bf44547469c43066f6142/games/planet-life/images/handling/invisibleImg.gif";
			document.getElementById('fistImg').src = "https://cdn.jsdelivr.net/gh/polandstick/mgg2@7b2af95dcfaa66cdf12bf44547469c43066f6142/games/planet-life/images/items/" + items[i].derekImage + ".gif";
			fistEquipped = true;
		}
		if (items[i].clothesType == "legs" && items[i].equipped) {
			document.getElementById('legsImg').src = "https://cdn.jsdelivr.net/gh/polandstick/mgg2@7b2af95dcfaa66cdf12bf44547469c43066f6142/games/planet-life/images/handling/invisibleImg.gif";
			document.getElementById('legsImg').src = "https://cdn.jsdelivr.net/gh/polandstick/mgg2@7b2af95dcfaa66cdf12bf44547469c43066f6142/games/planet-life/images/items/" + items[i].derekImage + ".gif";
			legsEquipped = true;
		}
	}
	if (!headEquipped) {
		document.getElementById('headImg').src = "https://cdn.jsdelivr.net/gh/polandstick/mgg2@7b2af95dcfaa66cdf12bf44547469c43066f6142/games/planet-life/images/handling/invisibleImg.gif";
	} 
	if (!fistEquipped) {
		document.getElementById('fistImg').src = "https://cdn.jsdelivr.net/gh/polandstick/mgg2@7b2af95dcfaa66cdf12bf44547469c43066f6142/games/planet-life/images/handling/invisibleImg.gif";
	}
	if (!legsEquipped) {
		document.getElementById('legsImg').src = "https://cdn.jsdelivr.net/gh/polandstick/mgg2@7b2af95dcfaa66cdf12bf44547469c43066f6142/games/planet-life/images/handling/invisibleImg.gif";
	}
	document.getElementById('derekBlackImg').src = "https://cdn.jsdelivr.net/gh/polandstick/mgg2@7b2af95dcfaa66cdf12bf44547469c43066f6142/games/planet-life/images/handling/invisibleImg.gif";
	document.getElementById('derekBlackImg').src = "https://cdn.jsdelivr.net/gh/polandstick/mgg2@7b2af95dcfaa66cdf12bf44547469c43066f6142/games/planet-life/images/handling/derekBlack.gif";
}

function calculateDerekStats() {

	for (var key in allDerekStats) {
		allDerekStats[key] = 0;
	} 
	var items = state.derekItems;
	for (var i = 0; i < items.length; i++) {
		if (items[i].equipped) {
			for (var j = 0; j < items[i].stats.length; j++) {
				allDerekStats[items[i].stats[j][0]] = allDerekStats[items[i].stats[j][0]] + items[i].stats[j][1];
			}
		}
	}

}

function writeItemName(index,array,capsuled) {
	var h;
	var item = array;
	if (item[index].rarityType == "Scruffy") {
		h = "<span style='color:#8a8a8a'>Scruffy " + item[index].navn + "</span>";
		if (capsuled) {
			h = "<span style='color:#8a8a8a'>(Scruffy " + item[index].navn + ")</span>";
		}
	}
	if (item[index].rarityType == "Decent") {
		h = "<span style='color:#0066ff'>Decent " + item[index].navn + "</span>";
		if (capsuled) {
			h = "<span style='color:#0066ff'>(Decent " + item[index].navn + ")</span>";
		}
	}
	if (item[index].rarityType == "Excellent") {
		h = "<span style='color:#ffa200'>Excellent " + item[index].navn + "</span>";
		if (capsuled) {
			h = "<span style='color:#ffa200'>(Excellent " + item[index].navn + ")</span>";
		}
	}
	if (item[index].rarityType == "Crazy") {
		h = "<span style='color:#ff29ff'>Crazy " + item[index].navn + "</span>";
		if (capsuled) {
			h = "<span style='color:#ff29ff'>(Crazy " + item[index].navn + ")</span>";
		}
	}
	return h;
}

function writeItemStats(index,array) {
	var h;
	var stat1 = "", stat2 = "", stat3 = "", stat4 = "";
	var item = array;
	stat1 = writeSingleStat(index,0,array);
	if (item[index].stats[1]) {
		stat2 = writeSingleStat(index,1,array);
	}
	if (item[index].stats[2]) {
		stat3 = writeSingleStat(index,2,array);
	}
	if (item[index].stats[3]) {
		stat4 = writeSingleStat(index,3,array);
	}
	return "<span style='color:#0088ff'>" + stat1 + stat2 + stat3 + stat4 + "</span>";
}

function writeSingleStat(index,statNr,array) {
	var item = array;
	if (item[index].stats[statNr][2] == "%") {

		return "+" + item[index].stats[statNr][1] + "% " + item[index].stats[statNr][0] + "</br>";
	} else {
		return "+" + item[index].stats[statNr][1] + " " + item[index].stats[statNr][0] + "</br>";
	}
}




var allItemStats = [];
var allDerekStats = [];

function itemStat(navn,valueType,rarity,scruffyValues,decentValues,excellentValues,crazyValues) {
	this.navn = navn;
	this.scruffyValues = scruffyValues;
	this.decentValues = decentValues;
	this.excellentValues = excellentValues;
	this.crazyValues = crazyValues;
	this.valueType = valueType;
	this.rarity = rarity;
}

function derekStat(navn) {
	this.navn = navn;
	this.value;
}

function newItemStat(navn,valueType,rarity,scruffyValues,decentValues,excellentValues,crazyValues) {
	var newItemStat = new itemStat(navn,valueType,rarity,scruffyValues,decentValues,excellentValues,crazyValues);
	
	allItemStats.push(newItemStat);	
	allDerekStats[navn] = 0;
	
}

function rollStat(rarityType,navn) {
	if (navn) {
		console.log("It has a name");
		for (var i = 0; i < allItemStats.length; i++) {
			if (allItemStats[i].navn == navn) {
				console.log("And it did return " + allItemStats.navn);
				return [
					allItemStats[i].navn,
					rollStatValue(rarityType,i),
					allItemStats[i].valueType,
				];
			}
		}
	} else {

		var rollModifier = 0;
		if (rarityType == "Scruffy") {
			rollModifier = 2.5;
		}
		if (rarityType == "Decent") {
			rollModifier = 5;
		}
		if (rarityType == "Excellent") {
			rollModifier = 7.5;
		}
		if (rarityType == "Crazy") {
			rollModifier = 10;
		}

		var roll = (Math.random() * (rollModifier));
		console.log("Stat roll: " + roll); 
		if (Math.random() < 0.1) {
			roll += (8 + (Math.random() * 4)) - rollModifier / 2;
			console.log("Lucky roll!!!: " + roll);
		}


		var statPointDifference = [];
		for (var i = 0; i < allItemStats.length; i++) {
			var stat = allItemStats[i];
			var statScore = allItemStats[i].rarity - Math.random();
			var difference = Math.abs(statScore - roll);
			statPointDifference.push(difference);
		}
		var magicNumber = 0;
		var lowestDifference = 99;
		for (var i = 0; i < statPointDifference.length; i++) {
			if (statPointDifference[i] < lowestDifference) {
				magicNumber = i;
				lowestDifference = statPointDifference[i];
			}
		}
		console.log("You rolled stat: " + allItemStats[magicNumber].navn);

		return [
			allItemStats[magicNumber].navn,
			rollStatValue(rarityType,magicNumber),
			allItemStats[magicNumber].valueType,
		];

	}
}

function rollStatValue(rarityType,index) {
	var min;
	var max;
	if (rarityType == "Scruffy") {
		min = allItemStats[index].scruffyValues[0];
		max = allItemStats[index].scruffyValues[1];
	}
	if (rarityType == "Decent") {
		min = allItemStats[index].decentValues[0];
		max = allItemStats[index].decentValues[1];
	} 
	if (rarityType == "Excellent") {
		min = allItemStats[index].excellentValues[0];
		max = allItemStats[index].excellentValues[1];
	}
	if (rarityType == "Crazy") {
		min = allItemStats[index].crazyValues[0];
		max = allItemStats[index].crazyValues[1];	
	}
	var statValue = Math.round(Math.random() * (max - min) + min);
	console.log("statValue is " + statValue);
	return statValue;
}

newItemStat(
	"chance of Bull Fart",
	"%",
	6,
	[1,2],
	[3,5],
	[6,10],
	[11,20]
);

newItemStat(
	"chance of Thirsty",
	"%",
	4,
	[1,3],
	[3,6],
	[7,12],
	[15,25]
);

newItemStat(
	"strength",
	"+",
	2,
	[5,50],
	[20,150],
	[70,300],
	[110,600]
);

newItemStat(
	"health",
	"+",
	2,
	[5,50],
	[20,150],
	[70,300],
	[110,600]
);

newItemStat(
	"potion healing",
	"+",
	2,
	[5,30],
	[10,50],
	[30,150],
	[100,300]
);

newItemStat(
	"chance of stardust door",
	"%",
	6,
	[1,2],
	[2,4],
	[4,8],
	[8,15]
);

newItemStat(
	"chance of shortcut door",
	"%",
	9,
	[1,2],
	[2,3],
	[4,5],
	[5,10]
);

newItemStat(
	"chance of chest door",
	"%",
	7,
	[1,2],
	[2,3],
	[4,5],
	[5,10]
);

newItemStat(
	"extra gold from gold doors",
	"%",
	4,
	[5,30],
	[10,50],
	[30,100],
	[70,300]
);

newItemStat(
	"extra wood from wood doors",
	"%",
	1,
	[5,30],
	[10,50],
	[30,100],
	[70,300]
);

newItemStat(
	"extra coco from coco doors",
	"%",
	1,
	[5,30],
	[10,50],
	[30,100],
	[70,300]
);

newItemStat(
	"extra stardust from stardust doors",
	"%",
	4,
	[5,30],
	[10,50],
	[30,100],
	[70,300]
);

newItemStat(
	"extra Thirsty uses",
	"+",
	6,
	[1,1],
	[2,3],
	[3,5],
	[5,10]
);

newItemStat(
	"extra Bull Fart uses",
	"+",
	8,
	[1,1],
	[2,3],
	[3,5],
	[5,10]
);

newItemStat(
	"extra Door of Regret uses",
	"+",
	4,
	[1,1],
	[2,4],
	[4,7],
	[8,15]
);

newItemStat(
	"extra Full Heal uses",
	"+",
	10,
	[1,1],
	[2,2],
	[3,3],
	[4,4]
);

newItemStat(
	"health regeneration per dungeon level",
	"+",
	6,
	[1,15],
	[5,40],
	[30,120],
	[100,300]
);

newItemStat(
	"armor",
	"+",
	5,
	[5,15],
	[10,50],
	[40,200],
	[100,600]
);



var allItems = [];

function derekItem(navn,text,ID,clothesType,itemImage,derekImage,starterStat,rarity) {
	this.ID = ID;
	this.navn = navn;
	this.clothesType = clothesType;
	this.text = text;
	this.rarityType = "";
	this.itemImage = itemImage;
	this.derekImage = derekImage;
	this.rarity = rarity;
	this.stats = [];
	this.equipped = false;
	this.starterStat = starterStat;
}

function newItem(navn,text,clothesType,itemImage,derekImage,starterStat,rarity) {
	var newItem = new derekItem(navn,text,0,clothesType,itemImage,derekImage,starterStat,rarity);
	allItems.push(newItem);
}

function rollNewItem(difficulty,level) {

	

	
	var roll = (difficulty / 4) + ((Math.random() * (difficulty + 3))) + (Math.random() * (level / 10));
	console.log("Roll is: " + roll); 
	if (Math.random() < 0.1) {
		roll += Math.random() * 8;
		
		console.log("Lucky roll!!!: " + roll);
	}

	var itemPointDifference = [];

	for (var i = 0; i < allItems.length; i++) {
		var item = allItems[i];
		var itemScore = item.rarity - Math.random();
		var difference = Math.abs(itemScore - roll);
		itemPointDifference.push(difference);
	}

	var magicNumber = 0;
	var lowestDifference = 99;

	for (var i = 0; i < allItems.length; i++) {
		if (itemPointDifference[i] < lowestDifference) {
			console.log(allItems[i].navn + " has lower difference of " + itemPointDifference[i]);
			magicNumber = i;
			lowestDifference = itemPointDifference[i];
		}
	}

	console.log("You got a: " + allItems[magicNumber].navn);
	console.log("Lowest difference: " + lowestDifference);
	

	var mag = allItems[magicNumber];
	var ID = state.derekItems.length;
	var chosenItem = new derekItem(
		mag.navn,
		mag.text,
		ID,
		mag.clothesType,
		mag.itemImage,
		mag.derekImage,
		mag.starterStat,
		mag.rarity
	);

	



	

	var rarityTypeRoll = difficulty + (Math.random() * 6) + (level / 10);
	console.log("Rarity type roll is " + rarityTypeRoll);
	if (Math.random() < 0.1) {
		var extraBonusTimez = Math.random() * 5;
		rarityTypeRoll += extraBonusTimez;
		console.log("Lucky roll for rarity type! + " + extraBonusTimez);
	}

	if (rarityTypeRoll < 7) {
		chosenItem.rarityType = "Scruffy";
		chosenItem.stats[0] = rollStat(chosenItem.rarityType,chosenItem.starterStat);
	} else if (rarityTypeRoll < 12) {
		chosenItem.rarityType = "Decent";
		chosenItem.stats[0] = rollStat(chosenItem.rarityType,chosenItem.starterStat);
		chosenItem.stats[1] = rollStat(chosenItem.rarityType);
		while (!checkIfStatIsUnique(chosenItem.stats,1)) {
			chosenItem.stats[1] = rollStat(chosenItem.rarityType);				
		}
		
		
		
		
	} else if (rarityTypeRoll < 20) {
		chosenItem.rarityType = "Excellent";
		chosenItem.stats[0] = rollStat(chosenItem.rarityType,chosenItem.starterStat);
		chosenItem.stats[1] = rollStat(chosenItem.rarityType);
		while (!checkIfStatIsUnique(chosenItem.stats,1)) {
			chosenItem.stats[1] = rollStat(chosenItem.rarityType);				
		}
		
	} else {
		chosenItem.rarityType = "Crazy";
		chosenItem.stats[0] = rollStat(chosenItem.rarityType,chosenItem.starterStat);
		chosenItem.stats[1] = rollStat(chosenItem.rarityType);
		chosenItem.stats[2] = rollStat(chosenItem.rarityType);
		while (!checkIfStatIsUnique(chosenItem.stats,1)) {
			chosenItem.stats[1] = rollStat(chosenItem.rarityType);				
		}
		while (!checkIfStatIsUnique(chosenItem.stats,2)) {
			chosenItem.stats[2] = rollStat(chosenItem.rarityType);				
		}
		
	}

	console.log("This is the item " + chosenItem.navn + " -- " + chosenItem.rarityType);

	
	var newDerekItems = state.derekItems;
	newDerekItems.push(chosenItem);
	updateState('derekItems', newDerekItems);

	
	
	

}

function checkIfStatIsUnique(chosenItemStats,statNr) {
	for (var i = 0; i < chosenItemStats.length; i++) {
		if (chosenItemStats[i][0] == chosenItemStats[statNr][0] && i != statNr) {
			console.log("This is NOT UNIQUE in any way!");
			return false;
		}
	}
	return true;
}






newItem(
	"Melon Glasses",
	"These were very cheap",
	"head",
	"item_MelonGlasses",
	"melonGlasses",
	"chance of Thirsty",
	3
);

newItem(
	"Third Horn",
	"Is it the devil? No, it's just Derek",
	"head",
	"item_ThirdHorn",
	"thirdHorn",
	"strength",
	6
);

newItem(
	"Level 3 Helmet",
	"Nobody can headshot Derek now",
	"head",
	"item_Level3Helmet",
	"level3Helmet",
	"armor",
	7
);

newItem(
	"Sørens Man Bun",
	"Makes Derek look like a hipster",
	"head",
	"item_SorensManBun",
	"sorensManBun",
	"extra Bull Fart uses",
	16
);

newItem(
	"Glasses of Chrysitis",
	"Can Derek see through pure gold?",
	"head",
	"item_GlassesOfChrysitis",
	"glassesOfChrysitis",
	"extra gold from gold doors",
	10
);

newItem(
	"Green Jerk Hair",
	"It's surprisingly solid",
	"head",
	"item_GreenJerkHair",
	"greenJerkHair",
	"armor",
	2
);

newItem(
	"Daves Pot",
	"Only a crazy person would use this as a hat",
	"head",
	"item_DavesPot",
	"davesPot",
	"potion healing",
	4
);

newItem(
	"Leather Cap",
	"Smelly and out of style",
	"head",
	"item_LeatherCap",
	"leatherCap",
	"extra wood from wood doors",
	1
);

newItem(
	"Thirsty Glasses",
	"These glasses are desperately looking for something to drink",
	"head",
	"item_GlassesOfThirsty",
	"glassesOfThirsty",
	"extra Thirsty uses",
	5
);

newItem(
	"Ancient Jerk Hat",
	"Worn by the primitive jerks of the past",
	"head",
	"item_AncientJerkHat",
	"ancientJerkHat",
	"armor",
	8
);

newItem(
	"Eyes Of Burger",
	"The eyes are chirping happily as they softly land on Dereks head",
	"head",
	"item_EyesOfBurger",
	"eyesOfBurger",
	"extra Full Heal uses",
	18
);

newItem(
	"Sunglasses",
	"Cool!",
	"head",
	"item_sunglasses",
	"sunglasses",
	"extra stardust from stardust doors",
	14
);

newItem(
	"Eyes Of The Worm God",
	"Whooooah!",
	"head",
	"item_EyesOfRemouladin",
	"eyesOfRemouladin",
	"chance of shortcut door",
	22
);

newItem(
	"Purple Jerk Hair",
	"It's surprisingly solid",
	"head",
	"item_PurpleJerkHair",
	"purpleJerkHair",
	"armor",
	4
);

newItem(
	"Blue Jerk Hair",
	"It's surprisingly solid",
	"head",
	"item_BlueJerkHair",
	"blueJerkHair",
	"armor",
	8
);

newItem(
	"Yellow Jerk Hair",
	"It's surprisingly solid",
	"head",
	"item_YellowJerkHair",
	"yellowJerkHair",
	"armor",
	16
);

newItem(
	"Hat of Stardust",
	"Derek, you're a star!",
	"head",
	"item_HatOfStardust",
	"hatOfStardust",
	"chance of stardust door",
	10
);

newItem(
	"Eyes of Regret",
	"The eyes you wear when you enter the wrong room",
	"head",
	"item_EyesOfRegret",
	"eyesOfRegret",
	1
);





newItem(
	"Soft Pillow",
	"Spares Derek's knuckles from much pain",
	"fist",
	"item_SoftPillow",
	"softPillow",
	"armor",
	4
);

newItem(
	"Green Glove",
	"Just a single green glove",
	"fist",
	"item_GreenGlove",
	"greenGlove",
	"health",
	2
);

newItem(
	"Broccoli Hands",
	"Fart infused fists",
	"fist",
	"item_BroccoliHands",
	"broccoliHands",
	"chance of Bull Fart",
	5
);

newItem(
	"Confusing Map",
	"Derek can't read maps! They are very confusing",
	"fist",
	"item_ConfusingMap",
	"confusingMap",
	"chance of chest door",
	12
);

newItem(
	"Golden Glove",
	"This golden fist looks like it was worn by an ancient hero without arms and legs",
	"fist",
	"item_GoldenGlove",
	"goldenGlove",
	"extra gold from gold doors",
	5
);

newItem(
	"Axe",
	"This guy is eager to chop some wood",
	"fist",
	"item_Axe",
	"axe",
	"extra wood from wood doors",
	3
);

newItem(
	"Light Weight",
	"Might as well do some light exercise while punching jerks",
	"fist",
	"item_LightWeight",
	"lightWeight",
	"strength",
	4
);

newItem(
	"Dry Biscuit Glove",
	"Just looking at it makes Dereks mouth really dry",
	"fist",
	"item_DryBiscuitGlove",
	"dryBiscuitGlove",
	"chance of Thirsty",
	10
);

newItem(
	"Ancient Jerk Glove",
	"Worn by the primitive jerks of the past",
	"fist",
	"item_AncientJerkGlove",
	"ancientJerkGlove",
	"armor",
	8
);

newItem(
	"Claw Of Burger",
	"It gives a friendly handshake",
	"fist",
	"item_ClawOfBurger",
	"clawOfBurger",
	"extra Full Heal uses",
	18
);

newItem(
	"Cowbar",
	"Somebody etched the name Bret into the side of it",
	"fist",
	"item_Cowbar",
	"cowbar",
	"extra coco from coco doors",
	6
);

newItem(
	"Worn Glove",
	"What uncomfortable hand could have worn this glove out",
	"fist",
	"item_WornGlove",
	"wornGlove",
	"strength",
	1
);

newItem(
	"Fist Of The Worm God",
	"Whooooah!",
	"fist",
	"item_FistOfRemouladin",
	"fistOfRemouladin",
	"chance of shortcut door",
	22
);

newItem(
	"Muffin",
	"It's surprisingly healthy",
	"fist",
	"item_Muffin",
	"muffin",
	"health regeneration per dungeon level",
	13
);

newItem(
	"Lollipop Wand",
	"It's divine",
	"fist",
	"Item_LollipopWand",
	"lollipopWand",
	"extra stardust from stardust doors",
	14
);

newItem(
	"Mega Hand",
	"What giant did this hand belong to?",
	"fist",
	"item_MegaHand",
	"megaHand",
	"health",
	10
);





newItem(
	"Leather Pants",
	"These were originally worn by SNP the cat",
	"legs",
	"item_LeatherPants",
	"leatherPants",
	"strength",
	2
);

newItem(
	"Itchy Pants",
	"These pants are number 1!",
	"legs",
	"item_ItchyPants",
	"itchyPants",
	"chance of Bull Fart",
	6
);

newItem(
	"Blue Jeans of Karen",
	"They fit perfectly",
	"legs",
	"item_BlueJeansOfKaren",
	"blueJeansOfKaren",
	"health",
	15
);

newItem(
	"Cat Pants of Ulababula",
	"They have nice cats on them",
	"legs",
	"item_CatPantsOfUlababula",
	"catPantsOfUlababula",
	"health regeneration per dungeon level",
	15
);

newItem(
	"Golden Pants",
	"Derek can barely walk in these stiff gold pants",
	"legs",
	"item_GoldenPants",
	"goldenPants",
	"extra gold from gold doors",
	7
);

newItem(
	"Jerk Pants",
	"Derek hates them with a fury. But they have a camouflage pattern",
	"legs",
	"item_JerkPants",
	"jerkPants",
	"extra Door of Regret uses",
	3
);

newItem(
	"Coco Stained Pants",
	"Mmmh.. Coco!",
	"legs",
	"item_CocoStainedPants",
	"cocoStainedPants",
	"extra coco from coco doors",
	1
);

newItem(
	"Svens Lost Pants",
	"They have pockets full of sawdust",
	"legs",
	"item_SvensLostPants",
	"svensLostPants",
	"extra wood from wood doors",
	4
);

newItem(
	"Ancient Jerk Pants",
	"Worn by the primitive jerks of the past",
	"legs",
	"item_AncientJerkPants",
	"ancientJerkPants",
	"armor",
	8
);

newItem(
	"Pants Of Burger",
	"Burger has a peculiar taste in pants",
	"legs",
	"item_PantsOfBurger",
	"pantsOfBurger",
	"extra Full Heal uses",
	18
);

newItem(
	"Pants Of The Worm God",
	"Whooooah!",
	"legs",
	"item_PantsOfRemouladin",
	"pantsOfRemouladin",
	"chance of shortcut door",
	22
);

newItem(
	"Green Pants",
	"Just some green pants",
	"legs",
	"item_GreenPants",
	"greenPants",
	"health",
	4
);

newItem(
	"Bull Diaper",
	"Let's not talk about this",
	"legs",
	"item_BullDiaper",
	"bullDiaper",
	"extra Thirsty uses",
	7
);

newItem(
	"Wet Pants",
	"These pants are dripping",
	"legs",
	"item_WetPants",
	"wetPants",
	"chance of Thirsty",
	12
);

newItem(
	"Worn Pants",
	"Somebody wore these pants the wrong way",
	"legs",
	"item_WornPants",
	"wornPants",
	"strength",
	1
);

newItem(
	"Glittering Skirt",
	"This skirt is mega shiny",
	"legs",
	"item_GlitteringSkirt",
	"glitteringSkirt",
	"extra stardust from stardust doors",
	14
);

</script>  <script src="https://cdn.jsdelivr.net/gh/polandstick/mgg2@7b2af95dcfaa66cdf12bf44547469c43066f6142/games/planet-life/intro.js"></script>
	<script src="https://cdn.jsdelivr.net/gh/polandstick/mgg2@7b2af95dcfaa66cdf12bf44547469c43066f6142/games/planet-life/build.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/polandstick/mgg2@7b2af95dcfaa66cdf12bf44547469c43066f6142/games/planet-life/starmap.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/polandstick/mgg2@7b2af95dcfaa66cdf12bf44547469c43066f6142/games/planet-life/friendHouse.js"></script>
  <script>

function toggleSettings() {
	document.getElementById("resCounter").innerHTML = "";
	boostCheatCount = 0;
	playSound(soundEffect.click);
	toggleResInfo();
	clearSettingsScene();
	if (!settingsToggled) {
		settingsToggled = true;
		if (curArt == "derek") {
			document.getElementById('derekDiv').style.display = "none";
		}
		document.getElementById("buttons").style.display = "none";
		document.getElementById("handling").style.display = "none";
		document.getElementById("handlingArt").style.display = "none";
		document.getElementById("settingsButtons").style.display = "block";
		document.getElementById("settingsHandling").style.display = "block";
		document.getElementById("settingsArt").style.display = "inline-block";
		document.getElementById("settingsHeadline").style.display = "block";
		changeBackground("BG_AlmostBlack");
		goSettings();
	} else {
		settingsToggled = false;
		if (curArt == "derek") {
			loadDerekEquipmentImages();
			document.getElementById('derekDiv').style.display = "inline-block";
		}
		document.getElementById("buttons").style.display = "block";
		document.getElementById("handling").style.display = "block";
		document.getElementById("handlingArt").style.display = "inline-block";
		document.getElementById("settingsButtons").style.display = "none";
		document.getElementById("settingsHandling").style.display = "none";
		document.getElementById("settingsArt").style.display = "none";
		document.getElementById("settingsHeadline").style.display = "none";
		changeBackground(lastBackground);
		if (donateFromEnd) {
			donateFromEnd = false;
			goNotDonate();
		}
	}
}

function goSettings() {
	clearSettingsScene();
	document.getElementById("settingsHeadline").innerHTML = "Settings";
	document.getElementById("settingsHandling").innerHTML = "";
	createSettingsIconButton("Back","planet",toggleSettings);
	if (audioSettings.isSFXMuted) {
		createSettingsIconButton("Sound (off)","doorShhh",toggleSounds);
	} else {
		createSettingsIconButton("Sound (on)","explosion",toggleSounds);
	}
	if (audioSettings.isMusicMuted) {
		createSettingsIconButton("Music (off)","universe",toggleMusic);
	} else {
		createSettingsIconButton("Music (on)","spaceRadio",toggleMusic);
	}
	if (state.impatientMode) {
		createSettingsIconButton("Impatient mode (on)","derekDoom",toggleImpatientMode);
	} else {
		createSettingsIconButton("Impatient mode (off)","derek",toggleImpatientMode);
	}
	createSettingsIconButton("About","northplay",goAbout);
	if (burgerCheat) {
		createSettingsIconButton("Space farts","spaceBroccoli",goSpaceFarts);
	}
	if (hasBridge()) {
		createSettingsIconButton("Donate","burger",goDonate);
	}
	if (!hasBridge() && !disableExport) {
		createSettingsIconButton("Export savegame","derekPaper",goExport);
		createSettingsImportButton("Import savegame","doorShortcut",goImportConfirm);
	}
	createSettingsIconButton("Start over","newSurface",goStartOver);
}

function toggleImpatientMode() {
	if (state.impatientMode) {
		updateState('impatientMode', false);
		delay = 10;
		buttonDelay = 40;
	} else {
		updateState('impatientMode', true);
		delay = 1;
		buttonDelay = 10;
	}
	goSettings();
}

function goSpaceFarts() {
	toggleSettings();
	spaceFarts();
}

function goAbout() {
	clearSettingsScene();
	boostCheatCount++;
	if (boostCheatCount > 3 && state.tGamesCompleted < 1) {
		boostCheatCount = 0;
		boost();
		document.getElementById("settingsHeadline").innerHTML = "Jerks";
		document.getElementById("settingsArt").src="https://cdn.jsdelivr.net/gh/polandstick/mgg2@7b2af95dcfaa66cdf12bf44547469c43066f6142/games/planet-life/images/handling/bret.gif";
		document.getElementById("settingsHandling").innerHTML =
			"--- A jerk by Northplay ---</br></br></br>Made by Christian Laumark Jerkson</br></br>Backend: Kristian Andersen Jerkson</br></br>Design direction: Michael Flarup Jerkson</br></br>Music: Frederik Boye Jerkson</br></br><span style='color:#565656'>jerk version " + state.version + "</span><br/><br/>";
	} else {
		document.getElementById("settingsHeadline").innerHTML = "settings";
		document.getElementById("settingsArt").src="https://cdn.jsdelivr.net/gh/polandstick/mgg2@7b2af95dcfaa66cdf12bf44547469c43066f6142/games/planet-life/images/handling/northplay.gif";
		document.getElementById("settingsHandling").innerHTML =
			"--- A game by Northplay ---</br></br></br>Made by Christian Laumark</br></br>Backend: Kristian Andersen</br></br>Design direction: Michael Flarup</br></br>Music: Frederik Boye</br></br><span style='color:#565656'>version " + state.version + "</span><br/><br/>";
	}
	createSettingsIconButton("Back","settings",goSettings);
	if (aboutPromotion) {
		createSettingsIconButton("Follow Northplay","northplay",goFollowNorthplay);
		createSettingsIconButton("Follow Christian","burger",goFollowCrede);
		createSettingsIconButton("Join Planet Life Discord","planet",goJoinDiscord);
		createSettingsIconButton("Download Planet Life Backgrounds","PlanetLifeTitle",goPlanetLifeBackgrounds);
		if (hasBridge()) {
			createSettingsIconButton("Review Game","classroom",goReviewGame);
		}		
	} else {
		document.getElementById("settingsHandling").innerHTML = 
			"--- A game by Northplay ---</br></br></br>Made by Christian Laumark</br></br>Backend: Kristian Andersen</br></br>Design direction: Michael Flarup</br></br>Music: Frederik Boye</br></br><span style='color:#02f41a'>If you have questions about the game, join Northplays Discord server</span></br></br><span style='color:#565656'>version " + state.version + "</span><br/><br/>";		
	}
}

function openExternalUrl(url) {
	if (hasBridge()) {
		BridgeCommander.call("openUrl", url);
	} else if (typeof window.open === "function") {
		const win = window.open(url, "_blank");
		win.focus();
	} else {
		window.location = url;
	}
}

function goFollowNorthplay() {
	openExternalUrl("https://twitter.com/heynorthplay");
}

function goFollowCrede() {
	openExternalUrl("https://twitter.com/3DCrede");
}

function goJoinDiscord() {
	openExternalUrl("https://discord.gg/3nCapx9");
}

function goReviewGame() {
	BridgeCommander.call("requestReview");
}

function goPlanetLifeBackgrounds() {
	openExternalUrl("http://christianlaumark.dk/PlanetLifeSwag/");
}


function toggleSounds() {
	if (!audioSettings.isSFXMuted) {
		muteSound();
	} else {
		unMuteSound();
		playSound(soundEffect.explosion);
	}

	goSettings();
}

function toggleMusic() {
	if (!audioSettings.isMusicMuted) {
		muteMusic();
	} else {
		unMuteMusic();
	}

	goSettings();
}

function donate(option) {
	document.getElementById("loading_container").innerHTML = "<div class=\"blocking-loader\"></div>";

	var call = BridgeCommander.call("purchaseProduct", option);
	call.then(function(value) {
		if (value === "success") {
			if (settingsToggled) {
				toggleSettings();
				document.getElementById("loading_container").innerHTML = "";
			}

			afterDonate();
		}
	});
	call.catch(function(error) {
		document.getElementById("loading_container").innerHTML = "";
		document.getElementById("loading_container").innerText = error;
	});
}

function goDonate() {
	playSound(soundEffect.burger);
	clearSettingsScene();
	document.getElementById("settingsHeadline").innerHTML = "Donate";
	document.getElementById("settingsArt").src="https://cdn.jsdelivr.net/gh/polandstick/mgg2@7b2af95dcfaa66cdf12bf44547469c43066f6142/games/planet-life/images/handling/burger.gif";
	document.getElementById("settingsHandling").innerHTML = "By donating, you are showing your appreciation for this quirky little game, and by that increasing the chance that we will spend more time on it later.</br></br> You are also being an extremely amazing person";
	document.getElementById("settingsButtons").innerHTML = "<div class=\"loader\" id=\"settings_loader\"></div>";

	var call = BridgeCommander.call("loadProducts");
	call.then(function(value) {
		document.getElementById("settingsButtons").innerHTML = "";
		var json = JSON.parse(value);
		var donations = json.filter(p => p.identifier.indexOf("Tip") !== -1);

		createSettingsIconButton(donations[0].name + " " + donations[0].localPrice,"smallSoftPresent",donate,donations[0].identifier);
		createSettingsIconButton(donations[1].name + " " + donations[1].localPrice,"mediumHardPresent",donate,donations[1].identifier);
		createSettingsIconButton(donations[2].name + " " + donations[2].localPrice,"bigMassivePresent",donate,donations[2].identifier);
		createSettingsButton("No thanks",goSettings);
	});
	call.catch(function(error) {
		alert(error);
	});
}

function goExport() {
	var data = encodeState(state);
	var uri = "data:application/octet-stream;charset=utf-8;base64," + data;
	
	var link = document.createElement('a');
	link.setAttribute("download", "save.planet");
	link.setAttribute("href", uri);
	document.body.appendChild(link);
	link.click();
	document.body.removeChild(document.body.lastChild);
}

function goImportConfirm(event) {
	var file = event.target.files[0];
	if (file == null) { return; }

	clearSettingsScene();
	document.getElementById("settingsHeadline").innerHTML = "Import Savegame";
	document.getElementById("settingsArt").src="https://cdn.jsdelivr.net/gh/polandstick/mgg2@7b2af95dcfaa66cdf12bf44547469c43066f6142/games/planet-life/images/handling/doorShortcut.gif";
	document.getElementById("settingsHandling").innerHTML = "Are you sure you want to import a savegame from a .planet file?</br>It will remove all your progress in your current savegame";
	createSettingsIconButton("No","no",goSettings);
	createSettingsIconButton("Yes","yes",() => goImport(file));
}

function goImport(file) {
	var reader = new FileReader();
	reader.onload = function(e) {
		var contents = e.target.result;
		state = JSON.parse(contents);
		saveState();
		console.info("Saved");
	};
	
	reader.readAsText(file);
	location.reload();
}

function goStartOver() {
	clearSettingsScene();
	document.getElementById("settingsHeadline").innerHTML = "Start over";
	document.getElementById("settingsHandling").innerHTML = "Are you sure you want to throw away all that hard work, and begin again as a fresh fresh planet?";
	createSettingsIconButton("No","planetSad",goSettings);
	createSettingsIconButton("Yes!","planet",resetProgress,true);
}

function clearSettingsButtons() {
	var myNode = document.getElementById("settingsButtons");
	while (myNode.firstChild) {
		myNode.removeChild(myNode.firstChild);
	}
	curButtons = [];
	curButtonCount = 0;
}

function clearSettingsScene() {
	clearSettingsButtons();
	document.getElementById("settingsHeadline").innerHTML = "";
	document.getElementById("settingsArt").src="https://cdn.jsdelivr.net/gh/polandstick/mgg2@7b2af95dcfaa66cdf12bf44547469c43066f6142/games/planet-life/images/handling/tinyImg.gif";
	document.getElementById("settingsHandling").innerHTML = "";
	document.getElementById("loading_container").innerHTML = "";
}


</script>  <script src="https://cdn.jsdelivr.net/gh/st39/sdk@main/api.js"></script>

<div id="button" class="imgb imgb_vis" style="position: fixed; top: 10%; left: -100px; z-index: 10; display: none;"><a target="_blank" href="https://sites.google.com/view/classroom6x/" title="More Unblocked Games 6x"><img src="https://lh4.googleusercontent.com/lUEWrXMVEr4AdjKISyJahDRJ61bwfvHdpeYm86Djn5U8oCm9dI60NGXSBqad9HUvzTXgqlkosA_hWV-VuXPjzrkGvh3_kNSgYk8ySWzXnDpbBCBiooyBbU8oBy3YBZMDkW8RcRVmDuC0raoeqZBm8kBlqs6c5mdfkJeN2aE68lXS_lcOZ5_F7lIuM6qLVg" width="100" height="30" style="cursor:pointer;" alt="More of best Classroom 6x Unblocked Games"></a></div></body></html>
